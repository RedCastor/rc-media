{"version":3,"sources":["../bower_components/angular-img-cropper-redcastor/dist/angular-img-cropper.js"],"names":["angular","$","mod","module","factory","__extends","d","b","__","this","constructor","p","hasOwnProperty","prototype","directive","$document","$window","ImageCropper","scope","imgSrc","imgDst","cropWidth","cropHeight","keepAspect","touchRadius","cropAreaBounds","minWidth","minHeight","enforceCropAspect","enforceFileType","color","colorDrag","colorBg","colorCropBg","restrict","link","element","attrs","setup","newValue","oldValue","crop","width","height","oldImage","srcImage","canvas","data","setImage","fileType","load","imageObj","Image","undefined","cors","crossOrigin","addEventListener","$apply","src","imageData","destroyed","$on","$watch","control","internalControl","elem","elemental","document","querySelector","ev","createEvent","initEvent","dispatchEvent","$timeout","image","bind","changeEvent","reader","FileReader","eventThis","onload","loadEvent","thisHook","target","result","files","type","readAsDataURL","PointPool","Bounds","x","y","left","right","top","bottom","getWidth","getHeight","getCentre","w","h","instance","borrow","Handle","_super","CornerMarker","radius","call","drawCornerBorder","ctx","sideLength","over","drag","hDirection","vDirection","horizontalNeighbour","position","verticalNeighbour","beginPath","lineJoin","moveTo","lineTo","closePath","lineWidth","strokeStyle","stroke","drawCornerFill","fillStyle","fill","moveX","setPosition","moveY","move","addHorizontalNeighbour","neighbour","addVerticalNeighbour","getHorizontalNeighbour","getVerticalNeighbour","draw","CropService","init","getContext","DEG2RAD","CropTouch","id","DragMarker","iconPoints","Array","scaledIconPoints","getDragIconPoints","drawIcon","arr","scale","maxLength","arrowWidth","arrowLength","connectorThroat","push","points","k","length","recalculatePosition","bounds","c","returnPoint","Point","offset","setDrag","value","setOver","touchInBounds","getPosition","pressed","share","setPressed","setReleased","setStyle","style","documentElement","css","imageCropperDataShare","aspectRatio","currentDragTouches","isMouseDown","ratioW","ratioH","imageSet","pointPool","buffer","createElement","cropCanvas","tl","tr","bl","br","markers","center","croppedImage","currentlyInteracting","window","jQuery","off","on","onMouseMove","onMouseUp","onMouseDown","onTouchStart","onTouchMove","onTouchEnd","resizeCanvas","getBounds","clearRect","canvasWidth","canvasHeight","fillRect","sourceAspect","canvasAspect","sx","sy","drawImageIOSFix","drawImage","Math","max","marker","i","strokeRect","dragCrop","maxXClamp","minXClamp","minYClamp","maxYClamp","getCropBounds","enforceMinSize","xLength","yLength","xOver","abs","yOver","dragCorner","anchorMarker","iX","iY","ax","ay","newHeight","newWidth","newY","newX","fold","getSide","min","a","n","sign","NaN","handleRelease","newCropTouch","index","dragHandle","splice","handleMove","matched","dragTouch","clampedPositions","clampPosition","updateClampBounds","round","isImageSet","img","srcFileType","cropBounds","cropAspect","cX","cY","tlPos","trPos","blPos","brPos","imageH","cropW","imageW","cropH","vertSquashRatio","detectVerticalSquash","croppedImg","getCroppedImage","fillWidth","fillHeight","offsetH","offsetW","toDataURL","minX","Number","MAX_VALUE","minY","maxX","maxY","setBounds","topLeft","topRight","bottomLeft","bottomRight","currentBounds","getMousePos","evt","rect","getBoundingClientRect","pt","clientX","clientY","offsetHeight","offsetWidth","getTouchPos","touch","e","preventDefault","touches","isDefined","originalEvent","touchPosition","cropTouch","identifier","mousePosition","getDragTouchForID","drawCursors","cursorDrawn","drawCornerCursor","didDraw","changedTouches","sw","sh","dx","dy","dw","dh","ih","naturalWidth","naturalHeight","getImageData","ey","py","ratio","inst","borrowed","prev","firstAvailable","setNext","getNext","next"],"mappings":"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","file":"angular-img-cropper.js","sourcesContent":["(function (angular, $) {\n  'use strict';\n\n  var mod = angular.module('angular-img-cropper', []);\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n\n  mod.factory('__extends', function () {\n\n    var __extends = __extends || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n      function __() {\n        this.constructor = d;\n      }\n\n      __.prototype = b.prototype;\n      d.prototype = new __();\n    };\n\n    return __extends;\n  });\n\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // mod.directive(\"canvasResponsive\", function($window) {\n  //   return {\n  //     restrict: 'A',\n  //     link: function($scope, $element, $attrs) {\n        \n  //       var canvas = $element.find('canvas')[0];\n  //       var element = $element[0];\n  //       var ratio = canvas.offsetHeight / canvas.offsetWidth;\n\n  //       function scale() {\n  //         canvas.width = element.offsetWidth;\n  //         canvas.height = canvas.width * ratio;\n  //         console.log(canvas.width);\n  //         console.log(canvas.height);\n  //       } \n\n  //       scale();\n\n  //       $(window).bind('resize', function() {\n        \n  //         scale();\n\n\n  //       });\n\n  //     }\n  //   };\n  // });\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n\n  mod.directive(\"imgCropper\", function ($document, $window, ImageCropper) {\n    return {\n      scope: {\n        imgSrc: \"=\",\n        imgDst: \"=\",\n        cropWidth: \"=\",\n        cropHeight: \"=\",\n        keepAspect: \"=\",\n        touchRadius: \"=\",\n        cropAreaBounds: \"=\",\n        minWidth: \"=\",\n        minHeight: \"=\",\n        enforceCropAspect: \"=\",\n        enforceFileType: \"@\",\n        color: \"@\",\n        colorDrag: \"@\",\n        colorBg: '@',\n        colorCropBg: '@'\n      },\n      restrict: \"A\",\n      link: function (scope, element, attrs) {\n\n        var crop, destroyed = false;\n        var canvas = element[0];\n\n        scope.color = scope.color || 'rgba(90,90,90,0.75)';\n        scope.colorDrag = scope.colorDrag || 'rgba(0, 0, 0, 0.7)';\n        scope.colorBg = scope.colorBg || 'rgba(192,192,192,1)';\n        scope.colorCropBg = scope.colorCropBg || 'rgba(0, 0, 0, 0.7)';\n\n        scope.$on('$destroy', function () {\n          destroyed = true;\n        });\n\n        function setup(newValue, oldValue) {\n          if (crop && newValue === oldValue) {\n            return;\n          }\n\n\n          var width = scope.cropWidth;\n          var height = scope.cropHeight;\n          var keepAspect = scope.keepAspect;\n          var touchRadius = scope.touchRadius;\n          var oldImage = crop && crop.srcImage;\n\n          crop = new ImageCropper(canvas, canvas.width / 2 - width / 2, canvas.height / 2 - height / 2, width, height, keepAspect, touchRadius, scope, attrs);\n\n          $(canvas).data('crop.angular-img-cropper', crop);\n\n          if (oldImage) {\n            crop.setImage(oldImage, scope.imgSrc.fileType);\n          } else {\n            load(scope.imgSrc);\n          }\n        }\n\n        function load(newValue) {\n          if (!newValue) {\n            return;\n          }\n\n          var imageObj = new Image();\n\n          if (attrs.cors !== undefined && attrs.cors !== \"no\") {\n            imageObj.crossOrigin = \"Anonymous\";\n          }\n\n          imageObj.addEventListener(\"load\", function () {\n            crop.setImage(imageObj, newValue.fileType);\n            scope.$apply();\n          }, false);\n          imageObj.src = newValue.imageData;\n        }\n\n        scope.$watch('cropWidth', setup);\n        scope.$watch('cropHeight', setup);\n        scope.$watch('keepAspect', setup);\n        scope.$watch('touchRadius', setup);\n\n\n        scope.$watch('imgSrc', load);\n\n      }\n    };\n  });\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////\n\n})(angular, angular.element);\n\n\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.directive('imgCropperFilereadCall', function factory() {\n    return {\n      scope: {\n        control: '='\n      },\n      link: function (scope) {\n        scope.internalControl = scope.control || {};\n        scope.internalControl.load = function (elem) {\n\n          var elemental = angular.element(document.querySelector(elem));\n          var ev = document.createEvent(\"MouseEvent\");\n          ev.initEvent(\"click\", true, false);\n          elemental[0].dispatchEvent(ev);\n        };\n      }\n    };\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.directive(\"imgCropperFileread\", function ($timeout) {\n    return {\n      scope: {\n        image: \"=\"\n      },\n      link: function (scope, element) {\n        element.bind(\"change\", function (changeEvent) {\n          var reader = new FileReader();\n          var eventThis = this;\n          reader.onload = function (loadEvent) {\n            $timeout(function () {\n              var thisHook = eventThis;\n              scope.image = {\n                'imageData': loadEvent.target.result,\n                'fileType': thisHook.fileType\n              };\n            }, 0);\n          };\n          if (changeEvent.target.files[0]) {\n            eventThis.fileType = changeEvent.target.files[0].type;\n            reader.readAsDataURL(changeEvent.target.files[0]);\n          }\n        });\n      }\n    };\n  });\n\n  \n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('Bounds', function (PointPool) {\n\n    function Bounds(x, y, width, height) {\n      if (x === void 0) {\n        x = 0;\n      }\n      if (y === void 0) {\n        y = 0;\n      }\n      if (width === void 0) {\n        width = 0;\n      }\n      if (height === void 0) {\n        height = 0;\n      }\n      this.left = x;\n      this.right = x + width;\n      this.top = y;\n      this.bottom = y + height;\n    }\n\n    Bounds.prototype.getWidth = function () {\n      return this.right - this.left;\n    };\n    Bounds.prototype.getHeight = function () {\n      return this.bottom - this.top;\n    };\n    Bounds.prototype.getCentre = function () {\n      var w = this.getWidth();\n      var h = this.getHeight();\n      return PointPool.instance.borrow(this.left + (w / 2), this.top + (h / 2));\n    };\n    return Bounds;\n\n\n\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('CornerMarker', function(Handle, __extends) {\n     var CornerMarker = (function (_super) {\n          __extends(CornerMarker, _super);\n          function CornerMarker(x, y, radius, color, colorCropBg) {\n            _super.call(this, x, y, radius);\n            this.color = color | 'rgba(90,90,90,0.75)';\n            this.colorCropBg = colorCropBg | 'rgba(0,0,0,1)';\n          }\n\n          CornerMarker.prototype.drawCornerBorder = function (ctx) {\n            var sideLength = 10;\n            if (this.over || this.drag) {\n              sideLength = 12;\n            }\n            var hDirection = 1;\n            var vDirection = 1;\n            if (this.horizontalNeighbour.position.x < this.position.x) {\n              hDirection = -1;\n            }\n            if (this.verticalNeighbour.position.y < this.position.y) {\n              vDirection = -1;\n            }\n            ctx.beginPath();\n            ctx.lineJoin = \"miter\";\n            ctx.moveTo(this.position.x, this.position.y);\n            ctx.lineTo(this.position.x + (sideLength * hDirection), this.position.y);\n            ctx.lineTo(this.position.x + (sideLength * hDirection), this.position.y + (sideLength * vDirection));\n            ctx.lineTo(this.position.x, this.position.y + (sideLength * vDirection));\n            ctx.lineTo(this.position.x, this.position.y);\n            ctx.closePath();\n            ctx.lineWidth = 2;\n            ctx.strokeStyle = this.color;\n            ctx.stroke();\n          };\n          CornerMarker.prototype.drawCornerFill = function (ctx) {\n            var sideLength = 10;\n            if (this.over || this.drag) {\n              sideLength = 12;\n            }\n            var hDirection = 1;\n            var vDirection = 1;\n            if (this.horizontalNeighbour.position.x < this.position.x) {\n              hDirection = -1;\n            }\n            if (this.verticalNeighbour.position.y < this.position.y) {\n              vDirection = -1;\n            }\n            ctx.beginPath();\n            ctx.moveTo(this.position.x, this.position.y);\n            ctx.lineTo(this.position.x + (sideLength * hDirection), this.position.y);\n            ctx.lineTo(this.position.x + (sideLength * hDirection), this.position.y + (sideLength * vDirection));\n            ctx.lineTo(this.position.x, this.position.y + (sideLength * vDirection));\n            ctx.lineTo(this.position.x, this.position.y);\n            ctx.closePath();\n            ctx.fillStyle = this.colorCropBg;\n            ctx.fill();\n          };\n          CornerMarker.prototype.moveX = function (x) {\n            this.setPosition(x, this.position.y);\n          };\n          CornerMarker.prototype.moveY = function (y) {\n            this.setPosition(this.position.x, y);\n          };\n          CornerMarker.prototype.move = function (x, y) {\n            this.setPosition(x, y);\n            this.verticalNeighbour.moveX(x);\n            this.horizontalNeighbour.moveY(y);\n          };\n          CornerMarker.prototype.addHorizontalNeighbour = function (neighbour) {\n            this.horizontalNeighbour = neighbour;\n          };\n          CornerMarker.prototype.addVerticalNeighbour = function (neighbour) {\n            this.verticalNeighbour = neighbour;\n          };\n          CornerMarker.prototype.getHorizontalNeighbour = function () {\n            return this.horizontalNeighbour;\n          };\n          CornerMarker.prototype.getVerticalNeighbour = function () {\n            return this.verticalNeighbour;\n          };\n          CornerMarker.prototype.draw = function (ctx) {\n            this.drawCornerFill(ctx);\n            this.drawCornerBorder(ctx);\n          };\n          return CornerMarker;\n        })(Handle);\n\n        return CornerMarker;\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('CropService', function () {\n\n    function CropService() {\n    }\n\n    CropService.init = function (canvas) {\n      this.canvas = canvas;\n      this.ctx = this.canvas.getContext(\"2d\");\n    };\n    CropService.DEG2RAD = 0.0174532925;\n    return CropService;\n\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('CropTouch', function () {\n    function CropTouch(x, y, id) {\n      if (x === void 0) {\n        x = 0;\n      }\n      if (y === void 0) {\n        y = 0;\n      }\n      if (id === void 0) {\n        id = 0;\n      }\n      this.id = 0;\n      this.x = x;\n      this.y = y;\n      this.id = id;\n    }\n\n    return CropTouch;\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('DragMarker', function (Handle, __extends, PointPool) {\n    var DragMarker = (function (_super) {\n      __extends(DragMarker, _super);\n      function DragMarker(x, y, radius, color) {\n        _super.call(this, x, y, radius);\n        this.iconPoints = new Array();\n        this.scaledIconPoints = new Array();\n        this.getDragIconPoints(this.iconPoints, 1);\n        this.getDragIconPoints(this.scaledIconPoints, 1.2);\n        this.color = color || 'rgba(90, 90, 90, 0.75)';\n      }\n\n      DragMarker.prototype.draw = function (ctx) {\n        if (this.over || this.drag) {\n          this.drawIcon(ctx, this.scaledIconPoints);\n        }\n        else {\n          this.drawIcon(ctx, this.iconPoints);\n        }\n      };\n      DragMarker.prototype.getDragIconPoints = function (arr, scale) {\n        var maxLength = 17 * scale;\n        var arrowWidth = 14 * scale;\n        var arrowLength = 8 * scale;\n        var connectorThroat = 4 * scale;\n        arr.push(PointPool.instance.borrow(-connectorThroat / 2, maxLength - arrowLength));\n        arr.push(PointPool.instance.borrow(-arrowWidth / 2, maxLength - arrowLength));\n        arr.push(PointPool.instance.borrow(0, maxLength));\n        arr.push(PointPool.instance.borrow(arrowWidth / 2, maxLength - arrowLength));\n        arr.push(PointPool.instance.borrow(connectorThroat / 2, maxLength - arrowLength));\n        arr.push(PointPool.instance.borrow(connectorThroat / 2, connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(maxLength - arrowLength, connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(maxLength - arrowLength, arrowWidth / 2));\n        arr.push(PointPool.instance.borrow(maxLength, 0));\n        arr.push(PointPool.instance.borrow(maxLength - arrowLength, -arrowWidth / 2));\n        arr.push(PointPool.instance.borrow(maxLength - arrowLength, -connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(connectorThroat / 2, -connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(connectorThroat / 2, -maxLength + arrowLength));\n        arr.push(PointPool.instance.borrow(arrowWidth / 2, -maxLength + arrowLength));\n        arr.push(PointPool.instance.borrow(0, -maxLength));\n        arr.push(PointPool.instance.borrow(-arrowWidth / 2, -maxLength + arrowLength));\n        arr.push(PointPool.instance.borrow(-connectorThroat / 2, -maxLength + arrowLength));\n        arr.push(PointPool.instance.borrow(-connectorThroat / 2, -connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(-maxLength + arrowLength, -connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(-maxLength + arrowLength, -arrowWidth / 2));\n        arr.push(PointPool.instance.borrow(-maxLength, 0));\n        arr.push(PointPool.instance.borrow(-maxLength + arrowLength, arrowWidth / 2));\n        arr.push(PointPool.instance.borrow(-maxLength + arrowLength, connectorThroat / 2));\n        arr.push(PointPool.instance.borrow(-connectorThroat / 2, connectorThroat / 2));\n      };\n      DragMarker.prototype.drawIcon = function (ctx, points) {\n        ctx.beginPath();\n        ctx.moveTo(points[0].x + this.position.x, points[0].y + this.position.y);\n        for (var k = 0; k < points.length; k++) {\n          var p = points[k];\n          ctx.lineTo(p.x + this.position.x, p.y + this.position.y);\n        }\n        ctx.closePath();\n        ctx.fillStyle = this.color;\n        ctx.fill();\n      };\n      DragMarker.prototype.recalculatePosition = function (bounds) {\n        var c = bounds.getCentre();\n        this.setPosition(c.x, c.y);\n        PointPool.instance.returnPoint(c);\n      };\n      return DragMarker;\n    })(Handle);\n\n    return DragMarker;\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n  \n  mod.factory('Handle', function (Point) {\n\n    function Handle(x, y, radius) {\n      this.over = false;\n      this.drag = false;\n      this.position = new Point(x, y);\n      this.offset = new Point(0, 0);\n      this.radius = radius;\n    }\n\n    Handle.prototype.setDrag = function (value) {\n      this.drag = value;\n      this.setOver(value);\n    };\n    Handle.prototype.draw = function (ctx) {\n    };\n    Handle.prototype.setOver = function (over) {\n      this.over = over;\n    };\n    Handle.prototype.touchInBounds = function (x, y) {\n      return (x > this.position.x - this.radius && x < this.position.x + this.radius && y > this.position.y - this.radius && y < this.position.y + this.radius);\n    };\n    Handle.prototype.getPosition = function () {\n      return this.position;\n    };\n    Handle.prototype.setPosition = function (x, y) {\n      this.position.x = x;\n      this.position.y = y;\n    };\n    \n    return Handle;\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('imageCropperDataShare', function () {\n\n    var share = {};\n    var pressed;\n    var over;\n    share.setPressed = function (canvas) {\n      pressed = canvas;\n    };\n\n    share.setReleased = function (canvas) {\n      if (canvas === pressed) {\n        pressed = undefined;\n      }\n    };\n\n    share.setOver = function (canvas) {\n      over = canvas;\n    };\n\n    share.setStyle = function (canvas, style) {\n      if (pressed !== undefined) {\n        if (pressed === canvas) {\n          angular.element(document.documentElement).css('cursor', style);\n        }\n      }\n      else {\n        if (canvas === over) {\n          angular.element(document.documentElement).css('cursor', style);\n        }\n      }\n    };\n    return share;\n\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n(function(angular, $, mod) {\n  'use strict';\n  mod.factory('ImageCropper', function(__extends, Handle, Point, PointPool, CropService, DragMarker, CornerMarker, Bounds, CropTouch, imageCropperDataShare) {\n    function ImageCropper(canvas, x, y, width, height, keepAspect, touchRadius, scope, attrs) {\n      if (x === void 0) {\n        x = 0;\n      }\n      if (y === void 0) {\n        y = 0;\n      }\n      if (width === void 0) {\n        width = 100;\n      }\n      if (height === void 0) {\n        height = 50;\n      }\n      if (keepAspect === void 0) {\n        keepAspect = true;\n      }\n      if (touchRadius === void 0) {\n        touchRadius = 20;\n      }\n      this.scope = scope;\n      this.attrs = attrs;\n      this.keepAspect = false;\n      this.aspectRatio = 0;\n      this.currentDragTouches = new Array();\n      this.isMouseDown = false;\n      this.ratioW = 1;\n      this.ratioH = 1;\n      this.fileType = 'image/png';\n      this.imageSet = false;\n      this.pointPool = new PointPool(200);\n      CropService.init(canvas);\n      this.buffer = document.createElement('canvas');\n      this.cropCanvas = document.createElement('canvas');\n      this.buffer.width = canvas.width;\n      this.buffer.height = canvas.height;\n      this.tl = new CornerMarker(x,y,touchRadius, this.scope.colorDrag, this.scope.colorCropBg);\n      this.tr = new CornerMarker(x + width,y,touchRadius, this.scope.colorDrag, this.scope.colorCropBg);\n      this.bl = new CornerMarker(x,y + height,touchRadius, this.scope.colorDrag, this.scope.colorCropBg);\n      this.br = new CornerMarker(x + width,y + height,touchRadius, this.scope.colorDrag, this.scope.colorCropBg);\n      this.tl.addHorizontalNeighbour(this.tr);\n      this.tl.addVerticalNeighbour(this.bl);\n      this.tr.addHorizontalNeighbour(this.tl);\n      this.tr.addVerticalNeighbour(this.br);\n      this.bl.addHorizontalNeighbour(this.br);\n      this.bl.addVerticalNeighbour(this.tl);\n      this.br.addHorizontalNeighbour(this.bl);\n      this.br.addVerticalNeighbour(this.tr);\n      this.markers = [this.tl, this.tr, this.bl, this.br];\n      // TODO: pass color to dragmarker\n      this.center = new DragMarker(x + (width / 2),y + (height / 2),touchRadius, this.scope.colorDrag);\n      this.canvas = canvas;\n      this.ctx = this.canvas.getContext(\"2d\");\n      this.keepAspect = keepAspect;\n      this.aspectRatio = height / width;\n      this.draw(this.ctx);\n      this.croppedImage = new Image();\n      this.currentlyInteracting = false;\n      this.enforceCropAspect = this.scope.enforceCropAspect || !this.keepAspect;\n      this.enforceFileType = this.scope.enforceFileType ? 'image/' + this.scope.enforceFileType : undefined;\n      if (window.jQuery) {\n        angular.element(window).off('mousemove.angular-img-cropper mouseup.angular-img-cropper').on('mousemove.angular-img-cropper', this.onMouseMove.bind(this)).on('mouseup.angular-img-cropper', this.onMouseUp.bind(this));\n        angular.element(canvas).off('mousedown.angular-img-cropper touchstart.angular-img-cropper  touchmove.angular-img-cropper touchend.angular-img-cropper').on('mousedown.angular-img-cropper', this.onMouseDown.bind(this)).on('touchstart.angular-img-cropper', this.onTouchStart.bind(this)).on('touchmove.angular-img-cropper', this.onTouchMove.bind(this)).on('touchend.angular-img-cropper', this.onTouchEnd.bind(this));\n      } else {\n        window.addEventListener('mousemove', this.onMouseMove.bind(this));\n        window.addEventListener('mouseup', this.onMouseUp.bind(this));\n        canvas.addEventListener('mousedown', this.onMouseDown.bind(this));\n        canvas.addEventListener('touchmove', this.onTouchMove.bind(this), false);\n        canvas.addEventListener('touchstart', this.onTouchStart.bind(this), false);\n        canvas.addEventListener('touchend', this.onTouchEnd.bind(this), false);\n      }\n    }\n    ImageCropper.prototype.resizeCanvas = function(width, height) {\n      this.canvas.width = width;\n      this.canvas.height = height;\n      this.buffer.width = width;\n      this.buffer.height = height;\n      this.draw(this.ctx);\n    }\n    ;\n    ImageCropper.prototype.draw = function(ctx) {\n      var bounds = this.getBounds();\n      if (this.srcImage) {\n        ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n        ctx.fillStyle = this.scope.colorBg;\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        var sourceAspect = this.srcImage.height / this.srcImage.width;\n        var canvasAspect = this.canvasHeight / this.canvasWidth;\n        var w = this.canvasWidth;\n        var h = this.canvasHeight;\n        var sx = 0;\n        var sy = 0;\n        if (canvasAspect > sourceAspect) {\n          w = this.canvasWidth;\n          h = this.canvasWidth * sourceAspect;\n        } else {\n          h = this.canvasHeight;\n          w = this.canvasHeight / sourceAspect;\n        }\n        this.ratioW = w / this.srcImage.width;\n        this.ratioH = h / this.srcImage.height;\n        if (canvasAspect < sourceAspect) {\n          sx = this.buffer.width / 2 - w / 2;\n        } else {\n          sy = this.buffer.height / 2 - h / 2;\n        }\n        this.drawImageIOSFix(ctx, this.srcImage, 0, 0, this.srcImage.width, this.srcImage.height, sx, sy, w, h);\n        this.buffer.getContext('2d').drawImage(this.canvas, 0, 0, this.canvasWidth, this.canvasHeight);\n        ctx.fillStyle = this.scope.colorCropBg;\n        ctx.fillRect(sx, sy, w, h);\n        ctx.drawImage(this.buffer, bounds.left, bounds.top, Math.max(bounds.getWidth(), 1), Math.max(bounds.getHeight(), 1), bounds.left, bounds.top, bounds.getWidth(), bounds.getHeight());\n        var marker;\n        for (var i = 0; i < this.markers.length; i++) {\n          marker = this.markers[i];\n          marker.draw(ctx);\n        }\n        this.center.draw(ctx);\n        ctx.lineWidth = 2;\n        ctx.strokeStyle = this.scope.color;\n        ctx.strokeRect(bounds.left, bounds.top, bounds.getWidth(), bounds.getHeight());\n      } else {\n        ctx.fillStyle = this.scope.colorBg;\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n      }\n    }\n    ;\n    ImageCropper.prototype.dragCrop = function(x, y, marker) {\n      var bounds = this.getBounds();\n      var left = x - (bounds.getWidth() / 2);\n      var right = x + (bounds.getWidth() / 2);\n      var top = y - (bounds.getHeight() / 2);\n      var bottom = y + (bounds.getHeight() / 2);\n      if (right >= this.maxXClamp) {\n        x = this.maxXClamp - bounds.getWidth() / 2;\n      }\n      if (left <= this.minXClamp) {\n        x = bounds.getWidth() / 2 + this.minXClamp;\n      }\n      if (top < this.minYClamp) {\n        y = bounds.getHeight() / 2 + this.minYClamp;\n      }\n      if (bottom >= this.maxYClamp) {\n        y = this.maxYClamp - bounds.getHeight() / 2;\n      }\n      this.tl.moveX(x - (bounds.getWidth() / 2));\n      this.tl.moveY(y - (bounds.getHeight() / 2));\n      this.tr.moveX(x + (bounds.getWidth() / 2));\n      this.tr.moveY(y - (bounds.getHeight() / 2));\n      this.bl.moveX(x - (bounds.getWidth() / 2));\n      this.bl.moveY(y + (bounds.getHeight() / 2));\n      this.br.moveX(x + (bounds.getWidth() / 2));\n      this.br.moveY(y + (bounds.getHeight() / 2));\n      marker.setPosition(x, y);\n      if (this.scope.cropAreaBounds && this.imageSet) {\n        this.scope.cropAreaBounds = this.getCropBounds();\n        this.scope.$apply();\n      }\n    }\n    ;\n    ImageCropper.prototype.enforceMinSize = function(x, y, marker) {\n      var xLength = x - marker.getHorizontalNeighbour().getPosition().x;\n      var yLength = y - marker.getVerticalNeighbour().getPosition().y;\n      var xOver = this.scope.minWidth - Math.abs(xLength);\n      var yOver = this.scope.minHeight - Math.abs(yLength);\n      if (xLength == 0 || yLength == 0) {\n        x = marker.getPosition().x;\n        y = marker.getPosition().y;\n        return PointPool.instance.borrow(x, y);\n      }\n      if (this.scope.keepAspect) {\n        if (xOver > 0 && (yOver / this.aspectRatio) > 0) {\n          if (xOver > (yOver / this.aspectRatio)) {\n            if (xLength < 0) {\n              x -= xOver;\n              if (yLength < 0) {\n                y -= xOver * this.aspectRatio;\n              } else {\n                y += xOver * this.aspectRatio;\n              }\n            } else {\n              x += xOver;\n              if (yLength < 0) {\n                y -= xOver * this.aspectRatio;\n              } else {\n                y += xOver * this.aspectRatio;\n              }\n            }\n          } else {\n            if (yLength < 0) {\n              y -= yOver;\n              if (xLength < 0) {\n                x -= yOver / this.aspectRatio;\n              } else {\n                x += yOver / this.aspectRatio;\n              }\n            } else {\n              y += yOver;\n              if (xLength < 0) {\n                x -= yOver / this.aspectRatio;\n              } else {\n                x += yOver / this.aspectRatio;\n              }\n            }\n          }\n        } else {\n          if (xOver > 0) {\n            if (xLength < 0) {\n              x -= xOver;\n              if (yLength < 0) {\n                y -= xOver * this.aspectRatio;\n              } else {\n                y += xOver * this.aspectRatio;\n              }\n            } else {\n              x += xOver;\n              if (yLength < 0) {\n                y -= xOver * this.aspectRatio;\n              } else {\n                y += xOver * this.aspectRatio;\n              }\n            }\n          } else if (yOver > 0) {\n            if (yLength < 0) {\n              y -= yOver;\n              if (xLength < 0) {\n                x -= yOver / this.aspectRatio;\n              } else {\n                x += yOver / this.aspectRatio;\n              }\n            } else {\n              y += yOver;\n              if (xLength < 0) {\n                x -= yOver / this.aspectRatio;\n              } else {\n                x += yOver / this.aspectRatio;\n              }\n            }\n          }\n        }\n      } else {\n        if (xOver > 0) {\n          if (xLength < 0) {\n            x -= xOver;\n          } else {\n            x += xOver;\n          }\n        }\n        if (yOver > 0) {\n          if (yLength < 0) {\n            y -= yOver;\n          } else {\n            y += yOver;\n          }\n        }\n      }\n      if (x < this.minXClamp || x > this.maxXClamp || y < this.minYClamp || y > this.maxYClamp) {\n        x = marker.getPosition().x;\n        y = marker.getPosition().y;\n      }\n      return PointPool.instance.borrow(x, y);\n    }\n    ;\n    ImageCropper.prototype.dragCorner = function(x, y, marker) {\n      var iX = 0;\n      var iY = 0;\n      var ax = 0;\n      var ay = 0;\n      var newHeight = 0;\n      var newWidth = 0;\n      var newY = 0;\n      var newX = 0;\n      var anchorMarker;\n      var fold = 0;\n      if (this.scope.keepAspect) {\n        anchorMarker = marker.getHorizontalNeighbour().getVerticalNeighbour();\n        ax = anchorMarker.getPosition().x;\n        ay = anchorMarker.getPosition().y;\n        if (x <= anchorMarker.getPosition().x) {\n          if (y <= anchorMarker.getPosition().y) {\n            iX = ax - (100 / this.aspectRatio);\n            iY = ay - (100 / this.aspectRatio * this.aspectRatio);\n            fold = this.getSide(PointPool.instance.borrow(iX, iY), anchorMarker.getPosition(), PointPool.instance.borrow(x, y));\n            if (fold > 0) {\n              newHeight = Math.abs(anchorMarker.getPosition().y - y);\n              newWidth = newHeight / this.aspectRatio;\n              newY = anchorMarker.getPosition().y - newHeight;\n              newX = anchorMarker.getPosition().x - newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            } else if (fold < 0) {\n              newWidth = Math.abs(anchorMarker.getPosition().x - x);\n              newHeight = newWidth * this.aspectRatio;\n              newY = anchorMarker.getPosition().y - newHeight;\n              newX = anchorMarker.getPosition().x - newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            }\n          } else {\n            iX = ax - (100 / this.aspectRatio);\n            iY = ay + (100 / this.aspectRatio * this.aspectRatio);\n            fold = this.getSide(PointPool.instance.borrow(iX, iY), anchorMarker.getPosition(), PointPool.instance.borrow(x, y));\n            if (fold > 0) {\n              newWidth = Math.abs(anchorMarker.getPosition().x - x);\n              newHeight = newWidth * this.aspectRatio;\n              newY = anchorMarker.getPosition().y + newHeight;\n              newX = anchorMarker.getPosition().x - newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            } else if (fold < 0) {\n              newHeight = Math.abs(anchorMarker.getPosition().y - y);\n              newWidth = newHeight / this.aspectRatio;\n              newY = anchorMarker.getPosition().y + newHeight;\n              newX = anchorMarker.getPosition().x - newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            }\n          }\n        } else {\n          if (y <= anchorMarker.getPosition().y) {\n            iX = ax + (100 / this.aspectRatio);\n            iY = ay - (100 / this.aspectRatio * this.aspectRatio);\n            fold = this.getSide(PointPool.instance.borrow(iX, iY), anchorMarker.getPosition(), PointPool.instance.borrow(x, y));\n            if (fold < 0) {\n              newHeight = Math.abs(anchorMarker.getPosition().y - y);\n              newWidth = newHeight / this.aspectRatio;\n              newY = anchorMarker.getPosition().y - newHeight;\n              newX = anchorMarker.getPosition().x + newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            } else if (fold > 0) {\n              newWidth = Math.abs(anchorMarker.getPosition().x - x);\n              newHeight = newWidth * this.aspectRatio;\n              newY = anchorMarker.getPosition().y - newHeight;\n              newX = anchorMarker.getPosition().x + newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            }\n          } else {\n            iX = ax + (100 / this.aspectRatio);\n            iY = ay + (100 / this.aspectRatio * this.aspectRatio);\n            fold = this.getSide(PointPool.instance.borrow(iX, iY), anchorMarker.getPosition(), PointPool.instance.borrow(x, y));\n            if (fold < 0) {\n              newWidth = Math.abs(anchorMarker.getPosition().x - x);\n              newHeight = newWidth * this.aspectRatio;\n              newY = anchorMarker.getPosition().y + newHeight;\n              newX = anchorMarker.getPosition().x + newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            } else if (fold > 0) {\n              newHeight = Math.abs(anchorMarker.getPosition().y - y);\n              newWidth = newHeight / this.aspectRatio;\n              newY = anchorMarker.getPosition().y + newHeight;\n              newX = anchorMarker.getPosition().x + newWidth;\n              var min = this.enforceMinSize(newX, newY, marker);\n              marker.move(min.x, min.y);\n              PointPool.instance.returnPoint(min);\n            }\n          }\n        }\n      } else {\n        var min = this.enforceMinSize(x, y, marker);\n        marker.move(min.x, min.y);\n        PointPool.instance.returnPoint(min);\n      }\n      this.center.recalculatePosition(this.getBounds());\n      if (this.scope.cropAreaBounds && this.imageSet) {\n        this.scope.cropAreaBounds = this.getCropBounds();\n        this.scope.$apply();\n      }\n    }\n    ;\n    ImageCropper.prototype.getSide = function(a, b, c) {\n      var n = this.sign((b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x));\n      //TODO move the return of the pools to outside of this function\n      PointPool.instance.returnPoint(a);\n      PointPool.instance.returnPoint(c);\n      return n;\n    }\n    ;\n    ImageCropper.prototype.sign = function(x) {\n      if (+x === x) {\n        return (x === 0) ? x : (x > 0) ? 1 : -1;\n      }\n      return NaN;\n    }\n    ;\n    ImageCropper.prototype.handleRelease = function(newCropTouch) {\n      if (newCropTouch == null ) {\n        return;\n      }\n      var index = 0;\n      for (var k = 0; k < this.currentDragTouches.length; k++) {\n        if (newCropTouch.id == this.currentDragTouches[k].id) {\n          this.currentDragTouches[k].dragHandle.setDrag(false);\n          newCropTouch.dragHandle = null ;\n          index = k;\n        }\n      }\n      this.currentDragTouches.splice(index, 1);\n      this.draw(this.ctx);\n    }\n    ;\n    ImageCropper.prototype.handleMove = function(newCropTouch) {\n      var matched = false;\n      for (var k = 0; k < this.currentDragTouches.length; k++) {\n        if (newCropTouch.id == this.currentDragTouches[k].id && this.currentDragTouches[k].dragHandle != null ) {\n          var dragTouch = this.currentDragTouches[k];\n          var clampedPositions = this.clampPosition(newCropTouch.x - dragTouch.dragHandle.offset.x, newCropTouch.y - dragTouch.dragHandle.offset.y);\n          newCropTouch.x = clampedPositions.x;\n          newCropTouch.y = clampedPositions.y;\n          PointPool.instance.returnPoint(clampedPositions);\n          if (dragTouch.dragHandle instanceof CornerMarker) {\n            this.dragCorner(newCropTouch.x, newCropTouch.y, dragTouch.dragHandle);\n          } else {\n            this.dragCrop(newCropTouch.x, newCropTouch.y, dragTouch.dragHandle);\n          }\n          this.currentlyInteracting = true;\n          matched = true;\n          imageCropperDataShare.setPressed(this.canvas);\n          break;\n        }\n      }\n      if (!matched) {\n        for (var i = 0; i < this.markers.length; i++) {\n          var marker = this.markers[i];\n          if (marker.touchInBounds(newCropTouch.x, newCropTouch.y)) {\n            newCropTouch.dragHandle = marker;\n            this.currentDragTouches.push(newCropTouch);\n            marker.setDrag(true);\n            newCropTouch.dragHandle.offset.x = newCropTouch.x - newCropTouch.dragHandle.getPosition().x;\n            newCropTouch.dragHandle.offset.y = newCropTouch.y - newCropTouch.dragHandle.getPosition().y;\n            this.dragCorner(newCropTouch.x - newCropTouch.dragHandle.offset.x, newCropTouch.y - newCropTouch.dragHandle.offset.y, newCropTouch.dragHandle);\n            break;\n          }\n        }\n        if (newCropTouch.dragHandle == null ) {\n          if (this.center.touchInBounds(newCropTouch.x, newCropTouch.y)) {\n            newCropTouch.dragHandle = this.center;\n            this.currentDragTouches.push(newCropTouch);\n            newCropTouch.dragHandle.setDrag(true);\n            newCropTouch.dragHandle.offset.x = newCropTouch.x - newCropTouch.dragHandle.getPosition().x;\n            newCropTouch.dragHandle.offset.y = newCropTouch.y - newCropTouch.dragHandle.getPosition().y;\n            this.dragCrop(newCropTouch.x - newCropTouch.dragHandle.offset.x, newCropTouch.y - newCropTouch.dragHandle.offset.y, newCropTouch.dragHandle);\n          }\n        }\n      }\n    }\n    ;\n    ImageCropper.prototype.updateClampBounds = function() {\n      var sourceAspect = this.srcImage.height / this.srcImage.width;\n      var canvasAspect = this.canvas.height / this.canvas.width;\n      var w = this.canvas.width;\n      var h = this.canvas.height;\n      if (canvasAspect > sourceAspect) {\n        w = this.canvas.width;\n        h = this.canvas.width * sourceAspect;\n      } else {\n        h = this.canvas.height;\n        w = this.canvas.height / sourceAspect;\n      }\n      this.minXClamp = this.canvas.width / 2 - w / 2;\n      this.minYClamp = this.canvas.height / 2 - h / 2;\n      this.maxXClamp = this.canvas.width / 2 + w / 2;\n      this.maxYClamp = this.canvas.height / 2 + h / 2;\n    }\n    ;\n    ImageCropper.prototype.getCropBounds = function() {\n      var h = this.canvas.height - (this.minYClamp * 2);\n      var bounds = this.getBounds();\n      bounds.top = Math.round((h - bounds.top + this.minYClamp) / this.ratioH);\n      bounds.bottom = Math.round((h - bounds.bottom + this.minYClamp) / this.ratioH);\n      bounds.left = Math.round((bounds.left - this.minXClamp) / this.ratioW);\n      bounds.right = Math.round((bounds.right - this.minXClamp) / this.ratioW);\n      return bounds;\n    }\n    ;\n    ImageCropper.prototype.clampPosition = function(x, y) {\n      if (x < this.minXClamp) {\n        x = this.minXClamp;\n      }\n      if (x > this.maxXClamp) {\n        x = this.maxXClamp;\n      }\n      if (y < this.minYClamp) {\n        y = this.minYClamp;\n      }\n      if (y > this.maxYClamp) {\n        y = this.maxYClamp;\n      }\n      return PointPool.instance.borrow(x, y);\n    }\n    ;\n    ImageCropper.prototype.isImageSet = function() {\n      return this.imageSet;\n    }\n    ;\n    ImageCropper.prototype.setImage = function(img, srcFileType) {\n      if (!img) {\n        throw \"Image is null\";\n      }\n      this.imageSet = true;\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      var bufferContext = this.buffer.getContext('2d');\n      bufferContext.clearRect(0, 0, this.buffer.width, this.buffer.height);\n      if (this.enforceFileType) {\n        this.fileType = this.enforceFileType;\n      } else if (srcFileType == 'image/png' || srcFileType == 'image/jpeg') {\n        this.fileType = srcFileType;\n      }\n      this.srcImage = img;\n      this.updateClampBounds();\n      var sourceAspect = this.srcImage.height / this.srcImage.width;\n      var cropBounds = this.getBounds();\n      var cropAspect = cropBounds.getHeight() / cropBounds.getWidth();\n      var w = this.canvas.width;\n      var h = this.canvas.height;\n      this.canvasWidth = w;\n      this.canvasHeight = h;\n      var cX = this.canvas.width / 2;\n      var cY = this.canvas.height / 2;\n      var tlPos = PointPool.instance.borrow(cX - cropBounds.getWidth() / 2, cY + cropBounds.getHeight() / 2);\n      var trPos = PointPool.instance.borrow(cX + cropBounds.getWidth() / 2, cY + cropBounds.getHeight() / 2);\n      var blPos = PointPool.instance.borrow(cX - cropBounds.getWidth() / 2, cY - cropBounds.getHeight() / 2);\n      var brPos = PointPool.instance.borrow(cX + cropBounds.getWidth() / 2, cY - cropBounds.getHeight() / 2);\n      this.tl.setPosition(tlPos.x, tlPos.y);\n      this.tr.setPosition(trPos.x, trPos.y);\n      this.bl.setPosition(blPos.x, blPos.y);\n      this.br.setPosition(brPos.x, brPos.y);\n      PointPool.instance.returnPoint(tlPos);\n      PointPool.instance.returnPoint(trPos);\n      PointPool.instance.returnPoint(blPos);\n      PointPool.instance.returnPoint(brPos);\n      this.center.setPosition(cX, cY);\n      if (cropAspect > sourceAspect) {\n        var imageH = Math.min(w * sourceAspect, h);\n        var cropW = imageH / cropAspect;\n        tlPos = PointPool.instance.borrow(cX - cropW / 2, cY + imageH / 2);\n        trPos = PointPool.instance.borrow(cX + cropW / 2, cY + imageH / 2);\n        blPos = PointPool.instance.borrow(cX - cropW / 2, cY - imageH / 2);\n        brPos = PointPool.instance.borrow(cX + cropW / 2, cY - imageH / 2);\n      } else if (cropAspect < sourceAspect) {\n        var imageW = Math.min(h / sourceAspect, w);\n        var cropH = imageW * cropAspect;\n        tlPos = PointPool.instance.borrow(cX - imageW / 2, cY + cropH / 2);\n        trPos = PointPool.instance.borrow(cX + imageW / 2, cY + cropH / 2);\n        blPos = PointPool.instance.borrow(cX - imageW / 2, cY - cropH / 2);\n        brPos = PointPool.instance.borrow(cX + imageW / 2, cY - cropH / 2);\n      } else {\n        var imageW = Math.min(h, w);\n        var cropH = imageW * cropAspect;\n        tlPos = PointPool.instance.borrow(cX - imageW / 2, cY + cropH / 2);\n        trPos = PointPool.instance.borrow(cX + imageW / 2, cY + cropH / 2);\n        blPos = PointPool.instance.borrow(cX - imageW / 2, cY - cropH / 2);\n        brPos = PointPool.instance.borrow(cX + imageW / 2, cY - cropH / 2);\n      }\n      this.tl.setPosition(tlPos.x, tlPos.y);\n      this.tr.setPosition(trPos.x, trPos.y);\n      this.bl.setPosition(blPos.x, blPos.y);\n      this.br.setPosition(brPos.x, brPos.y);\n      PointPool.instance.returnPoint(tlPos);\n      PointPool.instance.returnPoint(trPos);\n      PointPool.instance.returnPoint(blPos);\n      PointPool.instance.returnPoint(brPos);\n      if (this.scope.cropAreaBounds && this.scope.cropAreaBounds.left !== undefined && this.scope.cropAreaBounds.top !== undefined && this.scope.cropAreaBounds.right !== undefined && this.scope.cropAreaBounds.bottom !== undefined) {\n        var canvasAspect = this.canvasHeight / this.canvasWidth;\n        if (canvasAspect > sourceAspect) {\n          w = this.canvasWidth;\n          h = this.canvasWidth * sourceAspect;\n        } else {\n          h = this.canvasHeight;\n          w = this.canvasHeight / sourceAspect;\n        }\n        this.ratioW = w / this.srcImage.width;\n        this.ratioH = h / this.srcImage.height;\n        var bounds = new Bounds();\n        bounds.top = Math.round(h + this.minYClamp - this.ratioH * this.scope.cropAreaBounds.top);\n        bounds.bottom = Math.round(h + this.minYClamp - this.ratioH * this.scope.cropAreaBounds.bottom);\n        bounds.left = Math.round(this.ratioW * this.scope.cropAreaBounds.left + this.minXClamp);\n        bounds.right = Math.round(this.ratioW * this.scope.cropAreaBounds.right + this.minXClamp);\n        this.tl.setPosition(bounds.left, bounds.top);\n        this.tr.setPosition(bounds.right, bounds.top);\n        this.bl.setPosition(bounds.left, bounds.bottom);\n        this.br.setPosition(bounds.right, bounds.bottom);\n        this.center.setPosition(bounds.left + bounds.getWidth() / 2, bounds.top + bounds.getHeight() / 2);\n      }\n      this.vertSquashRatio = this.detectVerticalSquash(this.srcImage);\n      this.draw(this.ctx);\n      var croppedImg = this.getCroppedImage(this.scope.cropWidth, this.scope.cropHeight);\n      if (this.attrs.imgDst !== undefined) {\n        this.scope.imgDst = croppedImg.src;\n      }\n      if (this.scope.cropAreaBounds && this.imageSet) {\n        this.scope.cropAreaBounds = this.getCropBounds();\n      }\n    }\n    ;\n    ImageCropper.prototype.getCroppedImage = function(fillWidth, fillHeight) {\n      var bounds = this.getBounds();\n      if (!this.srcImage) {\n        throw \"Source image not set.\";\n      }\n      if (this.enforceCropAspect) {\n        fillWidth = false;\n      }\n      if (fillWidth && fillHeight) {\n        var sourceAspect = this.srcImage.height / this.srcImage.width;\n        var canvasAspect = this.canvas.height / this.canvas.width;\n        var w = this.canvas.width;\n        var h = this.canvas.height;\n        if (canvasAspect > sourceAspect) {\n          w = this.canvas.width;\n          h = this.canvas.width * sourceAspect;\n        } else if (canvasAspect < sourceAspect) {\n          h = this.canvas.height;\n          w = this.canvas.height / sourceAspect;\n        } else {\n          h = this.canvas.height;\n          w = this.canvas.width;\n        }\n        this.ratioW = w / this.srcImage.width;\n        this.ratioH = h / this.srcImage.height;\n        this.cropCanvas.width = fillWidth;\n        this.cropCanvas.height = fillHeight;\n        var offsetH = (this.buffer.height - h) / 2 / this.ratioH;\n        var offsetW = (this.buffer.width - w) / 2 / this.ratioW;\n        this.drawImageIOSFix(this.cropCanvas.getContext('2d'), this.srcImage, Math.max(Math.round((bounds.left) / this.ratioW - offsetW), 0), Math.max(Math.round(bounds.top / this.ratioH - offsetH), 0), Math.max(Math.round(bounds.getWidth() / this.ratioW), 1), Math.max(Math.round(bounds.getHeight() / this.ratioH), 1), 0, 0, fillWidth, fillHeight);\n        this.croppedImage.width = fillWidth;\n        this.croppedImage.height = fillHeight;\n      } else {\n        this.cropCanvas.width = Math.max(bounds.getWidth(), 1);\n        this.cropCanvas.height = Math.max(bounds.getHeight(), 1);\n        this.cropCanvas.getContext('2d').drawImage(this.buffer, bounds.left, bounds.top, Math.max(bounds.getWidth(), 1), Math.max(bounds.getHeight(), 1), 0, 0, bounds.getWidth(), bounds.getHeight());\n        this.croppedImage.width = this.cropCanvas.width;\n        this.croppedImage.height = this.cropCanvas.height;\n      }\n      this.croppedImage.src = this.cropCanvas.toDataURL(this.fileType);\n      return this.croppedImage;\n    }\n    ;\n    ImageCropper.prototype.getBounds = function() {\n      var minX = Number.MAX_VALUE;\n      var minY = Number.MAX_VALUE;\n      var maxX = -Number.MAX_VALUE;\n      var maxY = -Number.MAX_VALUE;\n      for (var i = 0; i < this.markers.length; i++) {\n        var marker = this.markers[i];\n        if (marker.getPosition().x < minX) {\n          minX = marker.getPosition().x;\n        }\n        if (marker.getPosition().x > maxX) {\n          maxX = marker.getPosition().x;\n        }\n        if (marker.getPosition().y < minY) {\n          minY = marker.getPosition().y;\n        }\n        if (marker.getPosition().y > maxY) {\n          maxY = marker.getPosition().y;\n        }\n      }\n      var bounds = new Bounds();\n      bounds.left = minX;\n      bounds.right = maxX;\n      bounds.top = minY;\n      bounds.bottom = maxY;\n      return bounds;\n    }\n    ;\n    ImageCropper.prototype.setBounds = function(bounds) {\n      var topLeft;\n      var topRight;\n      var bottomLeft;\n      var bottomRight;\n      var currentBounds = this.getBounds();\n      for (var i = 0; i < this.markers.length; i++) {\n        var marker = this.markers[i];\n        if (marker.getPosition().x == currentBounds.left) {\n          if (marker.getPosition().y == currentBounds.top) {\n            topLeft = marker;\n          } else {\n            bottomLeft = marker;\n          }\n        } else {\n          if (marker.getPosition().y == currentBounds.top) {\n            topRight = marker;\n          } else {\n            bottomRight = marker;\n          }\n        }\n      }\n      topLeft.setPosition(bounds.left, bounds.top);\n      topRight.setPosition(bounds.right, bounds.top);\n      bottomLeft.setPosition(bounds.left, bounds.bottom);\n      bottomRight.setPosition(bounds.right, bounds.bottom);\n      this.center.recalculatePosition(bounds);\n      this.center.draw(this.ctx);\n    }\n    ;\n    ImageCropper.prototype.getMousePos = function(canvas, evt) {\n      var rect = canvas.getBoundingClientRect();\n      var pt = PointPool.instance.borrow(evt.clientX - rect.left, evt.clientY - rect.top);\n      if (pt) {\n        var sy = canvas.height / canvas.offsetHeight;\n        var sx = canvas.width / canvas.offsetWidth;\n        pt.scale(sx, sy);\n      }\n      return pt;\n    }\n    ;\n    ImageCropper.prototype.getTouchPos = function(canvas, touch) {\n      var rect = canvas.getBoundingClientRect();\n      return PointPool.instance.borrow(touch.clientX - rect.left, touch.clientY - rect.top);\n    }\n    ;\n    ImageCropper.prototype.onTouchMove = function(e) {\n      if (!destroyed && this.isImageSet()) {\n        e.preventDefault();\n        /**\n         * fixes behaviour if event is wrapped by jquery\n         */\n        var touches = angular.isDefined(e.touches) ? e.touches : e.originalEvent.touches;\n        if (touches.length >= 1) {\n          for (var i = 0; i < touches.length; i++) {\n            var touch = touches[i];\n            var touchPosition = this.getTouchPos(this.canvas, touch);\n            var cropTouch = new CropTouch(touchPosition.x,touchPosition.y,touch.identifier);\n            PointPool.instance.returnPoint(touchPosition);\n            this.move(cropTouch, e);\n          }\n        }\n        this.draw(this.ctx);\n      }\n    }\n    ;\n    ImageCropper.prototype.onMouseMove = function(e) {\n      if (this.isImageSet()) {\n        var mousePosition = this.getMousePos(this.canvas, e);\n        this.move(new CropTouch(mousePosition.x,mousePosition.y,0), e);\n        var dragTouch = this.getDragTouchForID(0);\n        if (dragTouch) {\n          dragTouch.x = mousePosition.x;\n          dragTouch.y = mousePosition.y;\n        } else {\n          dragTouch = new CropTouch(mousePosition.x,mousePosition.y,0);\n        }\n        PointPool.instance.returnPoint(mousePosition);\n        this.drawCursors(dragTouch, e);\n        this.draw(this.ctx);\n      }\n    }\n    ;\n    ImageCropper.prototype.move = function(cropTouch, e) {\n      if (this.isMouseDown) {\n        this.handleMove(cropTouch);\n      }\n    }\n    ;\n    ImageCropper.prototype.getDragTouchForID = function(id) {\n      for (var i = 0; i < this.currentDragTouches.length; i++) {\n        if (id == this.currentDragTouches[i].id) {\n          return this.currentDragTouches[i];\n        }\n      }\n    }\n    ;\n    ImageCropper.prototype.drawCursors = function(cropTouch, e) {\n      var cursorDrawn = false;\n      if (cropTouch != null ) {\n        if (cropTouch.dragHandle == this.center) {\n          imageCropperDataShare.setStyle(this.canvas, 'move');\n          cursorDrawn = true;\n        }\n        if (cropTouch.dragHandle != null && cropTouch.dragHandle instanceof CornerMarker) {\n          this.drawCornerCursor(cropTouch.dragHandle, cropTouch.dragHandle.getPosition().x, cropTouch.dragHandle.getPosition().y, e);\n          cursorDrawn = true;\n        }\n      }\n      var didDraw = false;\n      if (!cursorDrawn) {\n        for (var i = 0; i < this.markers.length; i++) {\n          didDraw = didDraw || this.drawCornerCursor(this.markers[i], cropTouch.x, cropTouch.y, e);\n        }\n        if (!didDraw) {\n          imageCropperDataShare.setStyle(this.canvas, 'auto');\n        }\n      }\n      if (!didDraw && !cursorDrawn && this.center.touchInBounds(cropTouch.x, cropTouch.y)) {\n        this.center.setOver(true);\n        imageCropperDataShare.setOver(this.canvas);\n        imageCropperDataShare.setStyle(this.canvas, 'move');\n      } else {\n        this.center.setOver(false);\n      }\n    }\n    ;\n    ImageCropper.prototype.drawCornerCursor = function(marker, x, y, e) {\n      if (marker.touchInBounds(x, y)) {\n        marker.setOver(true);\n        if (marker.getHorizontalNeighbour().getPosition().x > marker.getPosition().x) {\n          if (marker.getVerticalNeighbour().getPosition().y > marker.getPosition().y) {\n            imageCropperDataShare.setOver(this.canvas);\n            imageCropperDataShare.setStyle(this.canvas, 'nwse-resize');\n          } else {\n            imageCropperDataShare.setOver(this.canvas);\n            imageCropperDataShare.setStyle(this.canvas, 'nesw-resize');\n          }\n        } else {\n          if (marker.getVerticalNeighbour().getPosition().y > marker.getPosition().y) {\n            imageCropperDataShare.setOver(this.canvas);\n            imageCropperDataShare.setStyle(this.canvas, 'nesw-resize');\n          } else {\n            imageCropperDataShare.setOver(this.canvas);\n            imageCropperDataShare.setStyle(this.canvas, 'nwse-resize');\n          }\n        }\n        return true;\n      }\n      marker.setOver(false);\n      return false;\n    }\n    ;\n    ImageCropper.prototype.onTouchStart = function(e) {\n      if (this.isImageSet()) {\n        this.isMouseDown = true;\n      }\n    }\n    ;\n    ImageCropper.prototype.onTouchEnd = function(e) {\n      if (this.isImageSet()) {\n        /**\n         * fixes behaviour if event is wrapped by jquery\n         */\n        var changedTouches = angular.isDefined(e.changedTouches) ? e.changedTouches : e.originalEvent.changedTouches;\n        for (var i = 0; i < changedTouches.length; i++) {\n          var touch = changedTouches[i];\n          var dragTouch = this.getDragTouchForID(touch.identifier);\n          if (dragTouch != null ) {\n            if (dragTouch.dragHandle instanceof CornerMarker || dragTouch.dragHandle instanceof DragMarker) {\n              dragTouch.dragHandle.setOver(false);\n            }\n            this.handleRelease(dragTouch);\n          }\n        }\n        if (this.isImageSet() && this.currentlyInteracting) {\n          var img = this.getCroppedImage(this.scope.cropWidth, this.scope.cropHeight);\n          if (this.attrs.imgDst !== undefined) {\n            this.scope.imgDst = img.src;\n          }\n          this.scope.$apply();\n        }\n        if (this.currentDragTouches.length == 0) {\n          this.isMouseDown = false;\n          this.currentlyInteracting = false;\n        }\n      }\n    }\n    ;\n    //http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n    ImageCropper.prototype.drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n      // Works only if whole image is displayed:\n      // ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n      // The following works correct also when only a part of the image is displayed:\n      ctx.drawImage(img, sx * this.vertSquashRatio, sy * this.vertSquashRatio, sw * this.vertSquashRatio, sh * this.vertSquashRatio, dx, dy, dw, dh);\n    }\n    ;\n    ImageCropper.prototype.detectVerticalSquash = function(img) {\n      var iw = img.naturalWidth\n        , ih = img.naturalHeight;\n      var canvas = document.createElement('canvas');\n      canvas.width = 1;\n      canvas.height = ih;\n      var ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      var data = ctx.getImageData(0, 0, 1, ih).data;\n      // search image edge pixel position in case it is squashed vertically.\n      var sy = 0;\n      var ey = ih;\n      var py = ih;\n      while (py > sy) {\n        var alpha = data[(py - 1) * 4 + 3];\n        if (alpha === 0) {\n          ey = py;\n        } else {\n          sy = py;\n        }\n        py = (ey + sy) >> 1;\n      }\n      var ratio = (py / ih);\n      return (ratio === 0) ? 1 : ratio;\n    }\n    ;\n    ImageCropper.prototype.onMouseDown = function(e) {\n      if (this.isImageSet()) {\n        this.isMouseDown = true;\n      }\n    }\n    ;\n    ImageCropper.prototype.onMouseUp = function(e) {\n      if (this.isImageSet()) {\n        imageCropperDataShare.setReleased(this.canvas);\n        this.isMouseDown = false;\n        this.handleRelease(new CropTouch(0,0,0));\n        if (this.currentlyInteracting == true) {\n          var img = this.getCroppedImage(this.scope.cropWidth, this.scope.cropHeight);\n          if (this.attrs.imgDst !== undefined) {\n            this.scope.imgDst = img.src;\n          }\n          this.scope.$apply();\n        }\n        this.currentlyInteracting = false;\n      }\n    }\n    ;\n    return ImageCropper;\n  });\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('PointPool', function (Point) {\n\n    function PointPool(inst) {\n      this.borrowed = 0; //for debugging\n      PointPool.instance = this;\n      var prev = null;\n      for (var i = 0; i < inst; i++) {\n        if (i === 0) {\n          this.firstAvailable = new Point();\n          prev = this.firstAvailable;\n        }\n        else {\n          var p = new Point();\n          prev.setNext(p);\n          prev = p;\n        }\n      }\n    }\n\n    PointPool.prototype.borrow = function (x, y) {\n      if (this.firstAvailable == null) {\n        throw \"Pool exhausted\";\n      }\n      this.borrowed++;\n      var p = this.firstAvailable;\n      this.firstAvailable = p.getNext();\n      p.x = x;\n      p.y = y;\n      return p;\n    };\n    PointPool.prototype.returnPoint = function (p) {\n      this.borrowed--;\n      p.x = 0;\n      p.y = 0;\n      p.setNext(this.firstAvailable);\n      this.firstAvailable = p;\n    };\n    return PointPool;\n\n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));\n\n(function (angular, $, mod) {\n  'use strict';\n\n  mod.factory('Point', function () {\n\n    function Point(x, y) {\n      if (x === void 0) {\n        x = 0;\n      }\n      if (y === void 0) {\n        y = 0;\n      }\n      this.x = x;\n      this.y = y;\n    }\n\n    Point.prototype.setNext = function (p) {\n      this.next = p;\n    };\n    Point.prototype.getNext = function () {\n      return this.next;\n    };\n\n    Point.prototype.scale = function(x, y) {\n      this.x *= x;\n      this.y *= y;\n    };\n\n    return Point;\n    \n  });\n\n})(angular, angular.element, angular.module('angular-img-cropper'));"],"sourceRoot":"assets/scripts/"}