{"version":3,"sources":["../bower_components/angular-sortable-view/src/angular-sortable-view.js"],"names":["window","angular","touchFix","e","touches","originalEvent","length","clientX","clientY","preventDefault","getPreviousSibling","element","previousElementSibling","sib","previousSibling","nodeType","insertElementBefore","newElement","prevSibl","after","parent","prepend","elementMatchesSelector","selector","matchingFunction","module","directive","shouldBeAfter","elem","pointer","isGrid","x","y","getSortableElements","key","ROOTS_MAP","removeSortableElements","sortingInProgress","Object","create","restrict","controller","$scope","$attrs","$interpolate","$parse","mapKey","svRoot","$id","candidates","$placeholder","options","$helper","$original","$target","onSort","svOnSort","svOnStart","$$element","attributes","value","svOnStop","onStart","onStop","this","svGrid","$watchCollection","collection","array","filter","item","container","map","part","getPart","id","getBoundingClientRect","top","dict","forEach","push","keys","sort","index","$moveUpdate","opts","mouse","svElement","svOriginal","svPlaceholder","originatingPart","originatingIndex","svRect","tolerance","left","width","height","clone","removeClass","addClass","css","$part","model","scope","$index","$item","$root","$$phase","$apply","reposition","document","body","scrollLeft","offset","scrollTop","se","containment","rect","center","scrollHeight","scrollWidth","q","view","targetIndex","getIndex","querySelector","pRect","pCenter","placeholder","a","b","cand","append","$drop","afterRevert","remove","spliced","splice","$partTo","$partFrom","$indexTo","$indexFrom","revert","placeholderRect","helperRect","distance","Math","sqrt","pow","duration","min","prefix","style","setTimeout","addToSortableElements","removeFromSortableElements","elems","indexOf","require","$ctrl","$sortableRoot","link","$element","$sortable","svPart","Error","assign","sortablePart","$on","$controllers","onMousedown","onMousemove","moveExecuted","pointerOffset","button","type","extend","containmentRect","closestElement","call","target","clientRect","helper","coords","targetLeft","targetTop","html","on","mouseup","off","sortableElement","handle","$watch","customHandle","customHelper","customPlaceholder","documentElement","add","head","join","dde","matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector","prototype","closest","el","parentNode","i","res"],"mappings":"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","file":"angular-sortable-view.js","sourcesContent":["//\n// Copyright Kamil PÄ™kala http://github.com/kamilkp\n// angular-sortable-view v0.0.15 2015/01/18\n//\n\n;(function(window, angular){\n\t'use strict';\n\t/* jshint eqnull:true */\n\t/* jshint -W041 */\n\t/* jshint -W030 */\n\n\tvar module = angular.module('angular-sortable-view', []);\n\tmodule.directive('svRoot', [function(){\n\t\tfunction shouldBeAfter(elem, pointer, isGrid){\n\t\t\treturn isGrid ? elem.x - pointer.x < 0 : elem.y - pointer.y < 0;\n\t\t}\n\t\tfunction getSortableElements(key){\n\t\t\treturn ROOTS_MAP[key];\n\t\t}\n\t\tfunction removeSortableElements(key){\n\t\t\tdelete ROOTS_MAP[key];\n\t\t}\n\n\t\tvar sortingInProgress;\n\t\tvar ROOTS_MAP = Object.create(null);\n\t\t// window.ROOTS_MAP = ROOTS_MAP; // for debug purposes\n\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tcontroller: ['$scope', '$attrs', '$interpolate', '$parse', function($scope, $attrs, $interpolate, $parse){\n\t\t\t\tvar mapKey = $interpolate($attrs.svRoot)($scope) || $scope.$id;\n\t\t\t\tif(!ROOTS_MAP[mapKey]) ROOTS_MAP[mapKey] = [];\n\n\t\t\t\tvar that         = this;\n\t\t\t\tvar candidates;  // set of possible destinations\n\t\t\t\tvar $placeholder;// placeholder element\n\t\t\t\tvar options;     // sortable options\n\t\t\t\tvar $helper;     // helper element - the one thats being dragged around with the mouse pointer\n\t\t\t\tvar $original;   // original element\n\t\t\t\tvar $target;     // last best candidate\n\t\t\t\tvar isGrid       = false;\n\t\t\t\tvar onSort       = $parse($attrs.svOnSort);\n\n\t\t\t\t// ----- hack due to https://github.com/angular/angular.js/issues/8044\n\t\t\t\t$attrs.svOnStart = $attrs.$$element[0].attributes['sv-on-start'];\n\t\t\t\t$attrs.svOnStart = $attrs.svOnStart && $attrs.svOnStart.value;\n\n\t\t\t\t$attrs.svOnStop = $attrs.$$element[0].attributes['sv-on-stop'];\n\t\t\t\t$attrs.svOnStop = $attrs.svOnStop && $attrs.svOnStop.value;\n\t\t\t\t// -------------------------------------------------------------------\n\n\t\t\t\tvar onStart = $parse($attrs.svOnStart);\n\t\t\t\tvar onStop = $parse($attrs.svOnStop);\n\n\t\t\t\tthis.sortingInProgress = function(){\n\t\t\t\t\treturn sortingInProgress;\n\t\t\t\t};\n\n\t\t\t\tif($attrs.svGrid){ // sv-grid determined explicite\n\t\t\t\t\tisGrid = $attrs.svGrid === \"true\" ? true : $attrs.svGrid === \"false\" ? false : null;\n\t\t\t\t\tif(isGrid === null)\n\t\t\t\t\t\tthrow 'Invalid value of sv-grid attribute';\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t// check if at least one of the lists have a grid like layout\n\t\t\t\t\t$scope.$watchCollection(function(){\n\t\t\t\t\t\treturn getSortableElements(mapKey);\n\t\t\t\t\t}, function(collection){\n\t\t\t\t\t\tisGrid = false;\n\t\t\t\t\t\tvar array = collection.filter(function(item){\n\t\t\t\t\t\t\treturn !item.container;\n\t\t\t\t\t\t}).map(function(item){\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tpart: item.getPart().id,\n\t\t\t\t\t\t\t\ty: item.element[0].getBoundingClientRect().top\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar dict = Object.create(null);\n\t\t\t\t\t\tarray.forEach(function(item){\n\t\t\t\t\t\t\tif(dict[item.part])\n\t\t\t\t\t\t\t\tdict[item.part].push(item.y);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tdict[item.part] = [item.y];\n\t\t\t\t\t\t});\n\t\t\t\t\t\tObject.keys(dict).forEach(function(key){\n\t\t\t\t\t\t\tdict[key].sort();\n\t\t\t\t\t\t\tdict[key].forEach(function(item, index){\n\t\t\t\t\t\t\t\tif(index < dict[key].length - 1){\n\t\t\t\t\t\t\t\t\tif(item > 0 && item === dict[key][index + 1]){\n\t\t\t\t\t\t\t\t\t\tisGrid = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.$moveUpdate = function(opts, mouse, svElement, svOriginal, svPlaceholder, originatingPart, originatingIndex){\n\t\t\t\t\tvar svRect = svElement[0].getBoundingClientRect();\n\t\t\t\t\tif(opts.tolerance === 'element')\n\t\t\t\t\t\tmouse = {\n\t\t\t\t\t\t\tx: ~~(svRect.left + svRect.width/2),\n\t\t\t\t\t\t\ty: ~~(svRect.top + svRect.height/2)\n\t\t\t\t\t\t};\n\n\t\t\t\t\tsortingInProgress = true;\n\t\t\t\t\tcandidates = [];\n\t\t\t\t\tif(!$placeholder){\n\t\t\t\t\t\tif(svPlaceholder){ // custom placeholder\n\t\t\t\t\t\t\t$placeholder = svPlaceholder.clone();\n\t\t\t\t\t\t\t$placeholder.removeClass('ng-hide');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{ // default placeholder\n\t\t\t\t\t\t\t$placeholder = svOriginal.clone();\n\t\t\t\t\t\t\t$placeholder.addClass('sv-visibility-hidden');\n\t\t\t\t\t\t\t$placeholder.addClass('sv-placeholder');\n\t\t\t\t\t\t\t$placeholder.css({\n\t\t\t\t\t\t\t\t'height': svRect.height + 'px',\n\t\t\t\t\t\t\t\t'width': svRect.width + 'px'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsvOriginal.after($placeholder);\n\t\t\t\t\t\tsvOriginal.addClass('ng-hide');\n\n\t\t\t\t\t\t// cache options, helper and original element reference\n\t\t\t\t\t\t$original = svOriginal;\n\t\t\t\t\t\toptions = opts;\n\t\t\t\t\t\t$helper = svElement;\n\n\t\t\t\t\t\tonStart($scope, {\n\t\t\t\t\t\t\t$helper: {element: $helper},\n\t\t\t\t\t\t\t$part: originatingPart.model(originatingPart.scope),\n\t\t\t\t\t\t\t$index: originatingIndex,\n\t\t\t\t\t\t\t$item: originatingPart.model(originatingPart.scope)[originatingIndex]\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$scope.$root && $scope.$root.$$phase || $scope.$apply();\n\t\t\t\t\t}\n\n\t\t\t\t\t// ----- move the element\n\t\t\t\t\t$helper[0].reposition({\n\t\t\t\t\t\tx: mouse.x + document.body.scrollLeft - mouse.offset.x*svRect.width,\n\t\t\t\t\t\ty: mouse.y + document.body.scrollTop - mouse.offset.y*svRect.height\n\t\t\t\t\t});\n\n\t\t\t\t\t// ----- manage candidates\n\t\t\t\t\tgetSortableElements(mapKey).forEach(function(se, index){\n\t\t\t\t\t\tif(opts.containment != null){\n\t\t\t\t\t\t\t// TODO: optimize this since it could be calculated only once when the moving begins\n\t\t\t\t\t\t\tif(\n\t\t\t\t\t\t\t\t!elementMatchesSelector(se.element, opts.containment) &&\n\t\t\t\t\t\t\t\t!elementMatchesSelector(se.element, opts.containment + ' *')\n\t\t\t\t\t\t\t) return; // element is not within allowed containment\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar rect = se.element[0].getBoundingClientRect();\n\t\t\t\t\t\tvar center = {\n\t\t\t\t\t\t\tx: ~~(rect.left + rect.width/2),\n\t\t\t\t\t\t\ty: ~~(rect.top + rect.height/2)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif(!se.container && // not the container element\n\t\t\t\t\t\t\t(se.element[0].scrollHeight || se.element[0].scrollWidth)){ // element is visible\n\t\t\t\t\t\t\tcandidates.push({\n\t\t\t\t\t\t\t\telement: se.element,\n\t\t\t\t\t\t\t\tq: (center.x - mouse.x)*(center.x - mouse.x) + (center.y - mouse.y)*(center.y - mouse.y),\n\t\t\t\t\t\t\t\tview: se.getPart(),\n\t\t\t\t\t\t\t\ttargetIndex: se.getIndex(),\n\t\t\t\t\t\t\t\tafter: shouldBeAfter(center, mouse, isGrid)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(se.container && !se.element[0].querySelector('[sv-element]:not(.sv-placeholder):not(.sv-source)')){ // empty container\n\t\t\t\t\t\t\tcandidates.push({\n\t\t\t\t\t\t\t\telement: se.element,\n\t\t\t\t\t\t\t\tq: (center.x - mouse.x)*(center.x - mouse.x) + (center.y - mouse.y)*(center.y - mouse.y),\n\t\t\t\t\t\t\t\tview: se.getPart(),\n\t\t\t\t\t\t\t\ttargetIndex: 0,\n\t\t\t\t\t\t\t\tcontainer: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar pRect = $placeholder[0].getBoundingClientRect();\n\t\t\t\t\tvar pCenter = {\n\t\t\t\t\t\tx: ~~(pRect.left + pRect.width/2),\n\t\t\t\t\t\ty: ~~(pRect.top + pRect.height/2)\n\t\t\t\t\t};\n\t\t\t\t\tcandidates.push({\n\t\t\t\t\t\tq: (pCenter.x - mouse.x)*(pCenter.x - mouse.x) + (pCenter.y - mouse.y)*(pCenter.y - mouse.y),\n\t\t\t\t\t\telement: $placeholder,\n\t\t\t\t\t\tplaceholder: true\n\t\t\t\t\t});\n\t\t\t\t\tcandidates.sort(function(a, b){\n\t\t\t\t\t\treturn a.q - b.q;\n\t\t\t\t\t});\n\n\t\t\t\t\tcandidates.forEach(function(cand, index){\n\t\t\t\t\t\tif(index === 0 && !cand.placeholder && !cand.container){\n\t\t\t\t\t\t\t$target = cand;\n\t\t\t\t\t\t\tcand.element.addClass('sv-candidate');\n\t\t\t\t\t\t\tif(cand.after)\n\t\t\t\t\t\t\t\tcand.element.after($placeholder);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tinsertElementBefore(cand.element, $placeholder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(index === 0 && cand.container){\n\t\t\t\t\t\t\t$target = cand;\n\t\t\t\t\t\t\tcand.element.append($placeholder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tcand.element.removeClass('sv-candidate');\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tthis.$drop = function(originatingPart, index, options){\n\t\t\t\t\tif(!$placeholder) return;\n\n\t\t\t\t\tif(options.revert){\n\t\t\t\t\t\tvar placeholderRect = $placeholder[0].getBoundingClientRect();\n\t\t\t\t\t\tvar helperRect = $helper[0].getBoundingClientRect();\n\t\t\t\t\t\tvar distance = Math.sqrt(\n\t\t\t\t\t\t\tMath.pow(helperRect.top - placeholderRect.top, 2) +\n\t\t\t\t\t\t\tMath.pow(helperRect.left - placeholderRect.left, 2)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar duration = +options.revert*distance/200; // constant speed: duration depends on distance\n\t\t\t\t\t\tduration = Math.min(duration, +options.revert); // however it's not longer that options.revert\n\n\t\t\t\t\t\t['-webkit-', '-moz-', '-ms-', '-o-', ''].forEach(function(prefix){\n\t\t\t\t\t\t\tif(typeof $helper[0].style[prefix + 'transition'] !== \"undefined\")\n\t\t\t\t\t\t\t\t$helper[0].style[prefix + 'transition'] = 'all ' + duration + 'ms ease';\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTimeout(afterRevert, duration);\n\t\t\t\t\t\t$helper.css({\n\t\t\t\t\t\t\t'top': placeholderRect.top + document.body.scrollTop + 'px',\n\t\t\t\t\t\t\t'left': placeholderRect.left + document.body.scrollLeft + 'px'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tafterRevert();\n\n\t\t\t\t\tfunction afterRevert(){\n\t\t\t\t\t\tsortingInProgress = false;\n\t\t\t\t\t\t$placeholder.remove();\n\t\t\t\t\t\t$helper.remove();\n\t\t\t\t\t\t$original.removeClass('ng-hide');\n\n\t\t\t\t\t\tcandidates = void 0;\n\t\t\t\t\t\t$placeholder = void 0;\n\t\t\t\t\t\toptions = void 0;\n\t\t\t\t\t\t$helper = void 0;\n\t\t\t\t\t\t$original = void 0;\n\n\t\t\t\t\t\t// sv-on-stop callback\n\t\t\t\t\t\tonStop($scope, {\n\t\t\t\t\t\t\t$part: originatingPart.model(originatingPart.scope),\n\t\t\t\t\t\t\t$index: index,\n\t\t\t\t\t\t\t$item: originatingPart.model(originatingPart.scope)[index]\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif($target){\n\t\t\t\t\t\t\t$target.element.removeClass('sv-candidate');\n\t\t\t\t\t\t\tvar spliced = originatingPart.model(originatingPart.scope).splice(index, 1);\n\t\t\t\t\t\t\tvar targetIndex = $target.targetIndex;\n\t\t\t\t\t\t\tif($target.view === originatingPart && $target.targetIndex > index)\n\t\t\t\t\t\t\t\ttargetIndex--;\n\t\t\t\t\t\t\tif($target.after)\n\t\t\t\t\t\t\t\ttargetIndex++;\n\t\t\t\t\t\t\t$target.view.model($target.view.scope).splice(targetIndex, 0, spliced[0]);\n\n\t\t\t\t\t\t\t// sv-on-sort callback\n\t\t\t\t\t\t\tif($target.view !== originatingPart || index !== targetIndex)\n\t\t\t\t\t\t\t\tonSort($scope, {\n\t\t\t\t\t\t\t\t\t$partTo: $target.view.model($target.view.scope),\n\t\t\t\t\t\t\t\t\t$partFrom: originatingPart.model(originatingPart.scope),\n\t\t\t\t\t\t\t\t\t$item: spliced[0],\n\t\t\t\t\t\t\t\t\t$indexTo: targetIndex,\n\t\t\t\t\t\t\t\t\t$indexFrom: index\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$target = void 0;\n\n\t\t\t\t\t\t$scope.$root && $scope.$root.$$phase || $scope.$apply();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.addToSortableElements = function(se){\n\t\t\t\t\tgetSortableElements(mapKey).push(se);\n\t\t\t\t};\n\t\t\t\tthis.removeFromSortableElements = function(se){\n\t\t\t\t\tvar elems = getSortableElements(mapKey);\n\t\t\t\t\tvar index = elems.indexOf(se);\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\telems.splice(index, 1);\n\t\t\t\t\t\tif(elems.length === 0)\n\t\t\t\t\t\t\tremoveSortableElements(mapKey);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}]\n\t\t};\n\t}]);\n\n\tmodule.directive('svPart', ['$parse', function($parse){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\trequire: '^svRoot',\n\t\t\tcontroller: ['$scope', function($scope){\n\t\t\t\t$scope.$ctrl = this;\n\t\t\t\tthis.getPart = function(){\n\t\t\t\t\treturn $scope.part;\n\t\t\t\t};\n\t\t\t\tthis.$drop = function(index, options){\n\t\t\t\t\t$scope.$sortableRoot.$drop($scope.part, index, options);\n\t\t\t\t};\n\t\t\t}],\n\t\t\tscope: true,\n\t\t\tlink: function($scope, $element, $attrs, $sortable){\n\t\t\t\tif(!$attrs.svPart) throw new Error('no model provided');\n\t\t\t\tvar model = $parse($attrs.svPart);\n\t\t\t\tif(!model.assign) throw new Error('model not assignable');\n\n\t\t\t\t$scope.part = {\n\t\t\t\t\tid: $scope.$id,\n\t\t\t\t\telement: $element,\n\t\t\t\t\tmodel: model,\n\t\t\t\t\tscope: $scope\n\t\t\t\t};\n\t\t\t\t$scope.$sortableRoot = $sortable;\n\n\t\t\t\tvar sortablePart = {\n\t\t\t\t\telement: $element,\n\t\t\t\t\tgetPart: $scope.$ctrl.getPart,\n\t\t\t\t\tcontainer: true\n\t\t\t\t};\n\t\t\t\t$sortable.addToSortableElements(sortablePart);\n\t\t\t\t$scope.$on('$destroy', function(){\n\t\t\t\t\t$sortable.removeFromSortableElements(sortablePart);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}]);\n\n\tmodule.directive('svElement', ['$parse', function($parse){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\trequire: ['^svPart', '^svRoot'],\n\t\t\tcontroller: ['$scope', function($scope){\n\t\t\t\t$scope.$ctrl = this;\n\t\t\t}],\n\t\t\tlink: function($scope, $element, $attrs, $controllers){\n\t\t\t\tvar sortableElement = {\n\t\t\t\t\telement: $element,\n\t\t\t\t\tgetPart: $controllers[0].getPart,\n\t\t\t\t\tgetIndex: function(){\n\t\t\t\t\t\treturn $scope.$index;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t$controllers[1].addToSortableElements(sortableElement);\n\t\t\t\t$scope.$on('$destroy', function(){\n\t\t\t\t\t$controllers[1].removeFromSortableElements(sortableElement);\n\t\t\t\t});\n\n\t\t\t\tvar handle = $element;\n\t\t\t\thandle.on('mousedown touchstart', onMousedown);\n\t\t\t\t$scope.$watch('$ctrl.handle', function(customHandle){\n\t\t\t\t\tif(customHandle){\n\t\t\t\t\t\thandle.off('mousedown touchstart', onMousedown);\n\t\t\t\t\t\thandle = customHandle;\n\t\t\t\t\t\thandle.on('mousedown touchstart', onMousedown);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar helper;\n\t\t\t\t$scope.$watch('$ctrl.helper', function(customHelper){\n\t\t\t\t\tif(customHelper){\n\t\t\t\t\t\thelper = customHelper;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar placeholder;\n\t\t\t\t$scope.$watch('$ctrl.placeholder', function(customPlaceholder){\n\t\t\t\t\tif(customPlaceholder){\n\t\t\t\t\t\tplaceholder = customPlaceholder;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar body = angular.element(document.body);\n\t\t\t\tvar html = angular.element(document.documentElement);\n\n\t\t\t\tvar moveExecuted;\n\n\t\t\t\tfunction onMousedown(e){\n\t\t\t\t\ttouchFix(e);\n\n\t\t\t\t\tif($controllers[1].sortingInProgress()) return;\n\t\t\t\t\tif(e.button != 0 && e.type === 'mousedown') return;\n\n\t\t\t\t\tmoveExecuted = false;\n\t\t\t\t\tvar opts = $parse($attrs.svElement)($scope);\n\t\t\t\t\topts = angular.extend({}, {\n\t\t\t\t\t\ttolerance: 'pointer',\n\t\t\t\t\t\trevert: 200,\n\t\t\t\t\t\tcontainment: 'html'\n\t\t\t\t\t}, opts);\n\t\t\t\t\tif(opts.containment){\n\t\t\t\t\t\tvar containmentRect = closestElement.call($element, opts.containment)[0].getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar target = $element;\n\t\t\t\t\tvar clientRect = $element[0].getBoundingClientRect();\n\t\t\t\t\tvar clone;\n\n\t\t\t\t\tif(!helper) helper = $controllers[0].helper;\n\t\t\t\t\tif(!placeholder) placeholder = $controllers[0].placeholder;\n\t\t\t\t\tif(helper){\n\t\t\t\t\t\tclone = helper.clone();\n\t\t\t\t\t\tclone.removeClass('ng-hide');\n\t\t\t\t\t\tclone.css({\n\t\t\t\t\t\t\t'left': clientRect.left + document.body.scrollLeft + 'px',\n\t\t\t\t\t\t\t'top': clientRect.top + document.body.scrollTop + 'px'\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttarget.addClass('sv-visibility-hidden');\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tclone = target.clone();\n\t\t\t\t\t\tclone.addClass('sv-helper').css({\n\t\t\t\t\t\t\t'left': clientRect.left + document.body.scrollLeft + 'px',\n\t\t\t\t\t\t\t'top': clientRect.top + document.body.scrollTop + 'px',\n\t\t\t\t\t\t\t'width': clientRect.width + 'px'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tclone[0].reposition = function(coords){\n\t\t\t\t\t\tvar targetLeft = coords.x;\n\t\t\t\t\t\tvar targetTop = coords.y;\n\t\t\t\t\t\tvar helperRect = clone[0].getBoundingClientRect();\n\n\t\t\t\t\t\tvar body = document.body;\n\n\t\t\t\t\t\tif(containmentRect){\n\t\t\t\t\t\t\tif(targetTop < containmentRect.top + body.scrollTop) // top boundary\n\t\t\t\t\t\t\t\ttargetTop = containmentRect.top + body.scrollTop;\n\t\t\t\t\t\t\tif(targetTop + helperRect.height > containmentRect.top + body.scrollTop + containmentRect.height) // bottom boundary\n\t\t\t\t\t\t\t\ttargetTop = containmentRect.top + body.scrollTop + containmentRect.height - helperRect.height;\n\t\t\t\t\t\t\tif(targetLeft < containmentRect.left + body.scrollLeft) // left boundary\n\t\t\t\t\t\t\t\ttargetLeft = containmentRect.left + body.scrollLeft;\n\t\t\t\t\t\t\tif(targetLeft + helperRect.width > containmentRect.left + body.scrollLeft + containmentRect.width) // right boundary\n\t\t\t\t\t\t\t\ttargetLeft = containmentRect.left + body.scrollLeft + containmentRect.width - helperRect.width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.style.left = targetLeft - body.scrollLeft + 'px';\n\t\t\t\t\t\tthis.style.top = targetTop - body.scrollTop + 'px';\n\t\t\t\t\t};\n\n\t\t\t\t\tvar pointerOffset = {\n\t\t\t\t\t\tx: (e.clientX - clientRect.left)/clientRect.width,\n\t\t\t\t\t\ty: (e.clientY - clientRect.top)/clientRect.height\n\t\t\t\t\t};\n\t\t\t\t\thtml.addClass('sv-sorting-in-progress');\n\t\t\t\t\thtml.on('mousemove touchmove', onMousemove).on('mouseup touchend touchcancel', function mouseup(e){\n\t\t\t\t\t\thtml.off('mousemove touchmove', onMousemove);\n\t\t\t\t\t\thtml.off('mouseup touchend', mouseup);\n\t\t\t\t\t\thtml.removeClass('sv-sorting-in-progress');\n\t\t\t\t\t\tif(moveExecuted){\n\t\t\t\t\t\t\t$controllers[0].$drop($scope.$index, opts);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$element.removeClass('sv-visibility-hidden');\n\t\t\t\t\t});\n\n\t\t\t\t\t// onMousemove(e);\n\t\t\t\t\tfunction onMousemove(e){\n\t\t\t\t\t\ttouchFix(e);\n\t\t\t\t\t\tif(!moveExecuted){\n\t\t\t\t\t\t\t$element.parent().prepend(clone);\n\t\t\t\t\t\t\tmoveExecuted = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$controllers[1].$moveUpdate(opts, {\n\t\t\t\t\t\t\tx: e.clientX,\n\t\t\t\t\t\t\ty: e.clientY,\n\t\t\t\t\t\t\toffset: pointerOffset\n\t\t\t\t\t\t}, clone, $element, placeholder, $controllers[0].getPart(), $scope.$index);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}]);\n\n\tmodule.directive('svHandle', function(){\n\t\treturn {\n\t\t\trequire: '?^svElement',\n\t\t\tlink: function($scope, $element, $attrs, $ctrl){\n\t\t\t\tif($ctrl)\n\t\t\t\t\t$ctrl.handle = $element.add($ctrl.handle); // support multiple handles\n\t\t\t}\n\t\t};\n\t});\n\n\tmodule.directive('svHelper', function(){\n\t\treturn {\n\t\t\trequire: ['?^svPart', '?^svElement'],\n\t\t\tlink: function($scope, $element, $attrs, $ctrl){\n\t\t\t\t$element.addClass('sv-helper').addClass('ng-hide');\n\t\t\t\tif($ctrl[1])\n\t\t\t\t\t$ctrl[1].helper = $element;\n\t\t\t\telse if($ctrl[0])\n\t\t\t\t\t$ctrl[0].helper = $element;\n\t\t\t}\n\t\t};\n\t});\n\n\tmodule.directive('svPlaceholder', function(){\n\t\treturn {\n\t\t\trequire: ['?^svPart', '?^svElement'],\n\t\t\tlink: function($scope, $element, $attrs, $ctrl){\n\t\t\t\t$element.addClass('sv-placeholder').addClass('ng-hide');\n\t\t\t\tif($ctrl[1])\n\t\t\t\t\t$ctrl[1].placeholder = $element;\n\t\t\t\telse if($ctrl[0])\n\t\t\t\t\t$ctrl[0].placeholder = $element;\n\t\t\t}\n\t\t};\n\t});\n\n\tangular.element(document.head).append([\n\t\t'<style>' +\n\t\t'.sv-helper{' +\n\t\t\t'position: fixed !important;' +\n\t\t\t'z-index: 99999;' +\n\t\t\t'margin: 0 !important;' +\n\t\t'}' +\n\t\t'.sv-candidate{' +\n\t\t'}' +\n\t\t'.sv-placeholder{' +\n\t\t\t// 'opacity: 0;' +\n\t\t'}' +\n\t\t'.sv-sorting-in-progress{' +\n\t\t\t'-webkit-user-select: none;' +\n\t\t\t'-moz-user-select: none;' +\n\t\t\t'-ms-user-select: none;' +\n\t\t\t'user-select: none;' +\n\t\t'}' +\n\t\t'.sv-visibility-hidden{' +\n\t\t\t'visibility: hidden !important;' +\n\t\t\t'opacity: 0 !important;' +\n\t\t'}' +\n\t\t'</style>'\n\t].join(''));\n\n\tfunction touchFix(e){\n\t\tif(!('clientX' in e) && !('clientY' in e)) {\n\t\t\tvar touches = e.touches || e.originalEvent.touches;\n\t\t\tif(touches && touches.length) {\n\t\t\t\te.clientX = touches[0].clientX;\n\t\t\t\te.clientY = touches[0].clientY;\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\tfunction getPreviousSibling(element){\n\t\telement = element[0];\n\t\tif(element.previousElementSibling)\n\t\t\treturn angular.element(element.previousElementSibling);\n\t\telse{\n\t\t\tvar sib = element.previousSibling;\n\t\t\twhile(sib != null && sib.nodeType != 1)\n\t\t\t\tsib = sib.previousSibling;\n\t\t\treturn angular.element(sib);\n\t\t}\n\t}\n\n\tfunction insertElementBefore(element, newElement){\n\t\tvar prevSibl = getPreviousSibling(element);\n\t\tif(prevSibl.length > 0){\n\t\t\tprevSibl.after(newElement);\n\t\t}\n\t\telse{\n\t\t\telement.parent().prepend(newElement);\n\t\t}\n\t}\n\n\tvar dde = document.documentElement,\n\tmatchingFunction = dde.matches ? 'matches' :\n\t\t\t\t\t\tdde.matchesSelector ? 'matchesSelector' :\n\t\t\t\t\t\tdde.webkitMatches ? 'webkitMatches' :\n\t\t\t\t\t\tdde.webkitMatchesSelector ? 'webkitMatchesSelector' :\n\t\t\t\t\t\tdde.msMatches ? 'msMatches' :\n\t\t\t\t\t\tdde.msMatchesSelector ? 'msMatchesSelector' :\n\t\t\t\t\t\tdde.mozMatches ? 'mozMatches' :\n\t\t\t\t\t\tdde.mozMatchesSelector ? 'mozMatchesSelector' : null;\n\tif(matchingFunction == null)\n\t\tthrow 'This browser doesn\\'t support the HTMLElement.matches method';\n\n\tfunction elementMatchesSelector(element, selector){\n\t\tif(element instanceof angular.element) element = element[0];\n\t\tif(matchingFunction !== null)\n\t\t\treturn element[matchingFunction](selector);\n\t}\n\n\tvar closestElement = angular.element.prototype.closest || function (selector){\n\t\tvar el = this[0].parentNode;\n\t\twhile(el !== document.documentElement && !el[matchingFunction](selector))\n\t\t\tel = el.parentNode;\n\n\t\tif(el[matchingFunction](selector))\n\t\t\treturn angular.element(el);\n\t\telse\n\t\t\treturn angular.element();\n\t};\n\n\t/*\n\t\tSimple implementation of jQuery's .add method\n\t */\n\tif(typeof angular.element.prototype.add !== 'function'){\n\t\tangular.element.prototype.add = function(elem){\n\t\t\tvar i, res = angular.element();\n\t\t\telem = angular.element(elem);\n\t\t\tfor(i=0;i<this.length;i++){\n\t\t\t\tres.push(this[i]);\n\t\t\t}\n\t\t\tfor(i=0;i<elem.length;i++){\n\t\t\t\tres.push(elem[i]);\n\t\t\t}\n\t\t\treturn res;\n\t\t};\n\t}\n\n})(window, window.angular);"],"sourceRoot":"assets/scripts/"}