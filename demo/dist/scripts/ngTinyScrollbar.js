!function(){"use strict";angular.module("ngTinyScrollbar",[]).provider("scrollbar",function(){this.defaults={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1,alwaysVisible:!0,autoUpdate:!1},this.$get=function(){return this}}).directive("scrollbar",["$window","$timeout","$parse","$animate","scrollbar",function(t,e,o,i,n){return{restrict:"A",transclude:!0,template:'<div class="scroll-bar"><div class="scroll-thumb"></div></div><div class="scroll-viewport"><div class="scroll-overview" ng-transclude></div></div>',controller:["$scope","$element","$attrs",function(s,a,l){function c(){b.contentRatio<=1&&b.contentPosition>b.contentSize-b.viewportSize?b.contentPosition=b.contentSize-b.viewportSize:b.contentRatio>1&&b.contentPosition>0&&(b.contentPosition=0)}function r(){M&&P.on("touchstart",h),x.on("mousedown",p),k.on("mousedown",d),angular.element(t).on("resize",u),b.options.wheel&&a.on($,v),b.options.autoUpdate&&"function"==typeof MutationObserver&&function(){var t,o=y[0].offsetWidth,i=y[0].offsetHeight;new MutationObserver(function(){(o!==y[0].offsetWidth||i!==y[0].offsetHeight)&&(e.cancel(t),t=e(function(){o=y[0].offsetWidth,i=y[0].offsetHeight,b.update()}))}).observe(a[0],{childList:!0,subtree:!0,characterData:!0,attributes:!0})}()}function u(){b.update()}function h(e){var o=e&&e.originalEvent||e||t.event;1===o.touches.length&&(e.stopPropagation(),p(o.touches[0]))}function p(t){z.addClass("scroll-no-select"),a.addClass("scroll-no-select"),b.options.alwaysVisible||k.addClass("visible"),C=R?t.pageX:t.pageY,b.thumbPosition=parseInt(x.css(X),10)||0,M&&(g.on("touchmove",f),g.on("touchend",m)),g.on("mousemove",d),g.on("mouseup",m),x.on("mouseup",m)}function v(o){if(!(b.contentRatio>=1)){b.options.alwaysVisible||(w&&e.cancel(w),k.addClass("visible"),w=e(function(){k.removeClass("visible")},100));var i=o&&o.originalEvent||o||t.event,n=b.options.axis.toUpperCase(),s={X:i.deltaX,Y:i.deltaY},l=0==i.deltaMode?b.options.wheelSpeed:1;b.options.scrollInvert&&(l*=-1),"mousewheel"===$&&(s.Y=-1*i.wheelDelta/40,i.wheelDeltaX&&(s.X=-1*i.wheelDeltaX/40)),s.X*=-1/l,s.Y*=-1/l;var r=s[n];b.contentPosition-=r*b.options.wheelSpeed,b.contentPosition=Math.min(b.contentSize-b.viewportSize,Math.max(0,b.contentPosition)),a[0].dispatchEvent(A),c(),x.css(X,b.contentPosition/b.trackRatio+"px"),y.css(X,-b.contentPosition+"px"),(b.options.wheelLock||b.contentPosition!==b.contentSize-b.viewportSize&&0!==b.contentPosition)&&i.preventDefault(),i.stopPropagation()}}function f(e){var o=e&&e.originalEvent||e||t.event;1===o.touches.length&&(e.preventDefault(),d(o.touches[0]))}function d(t){if(!(b.contentRatio>=1)){var e=R?t.pageX:t.pageY,o=e-C;(b.options.scrollInvert&&"mousemove"===t.type||"mousemove"!==t.type&&!b.options.scrollInvert)&&(o=C-e);var i=Math.min(b.trackSize-b.thumbSize,Math.max(0,b.thumbPosition+o));b.contentPosition=i*b.trackRatio,a[0].dispatchEvent(A),c(),x.css(X,i+"px"),y.css(X,-b.contentPosition+"px")}}function m(){z.removeClass("scroll-no-select"),a.removeClass("scroll-no-select"),b.options.alwaysVisible||k.removeClass("visible"),g.off("mousemove",d),g.off("mouseup",m),x.off("mouseup",m),g.off("touchmove",f),g.off("ontouchend",m)}var S=l.scrollbar;S=S?o(S)(s):{},this.options=angular.extend({},n.defaults,S),this._defaults=n.defaults;var w,b=this,z=angular.element(document.querySelectorAll("body")[0]),g=angular.element(document),P=angular.element(a[0].querySelectorAll(".scroll-viewport")[0]),y=angular.element(a[0].querySelectorAll(".scroll-overview")[0]),k=angular.element(a[0].querySelectorAll(".scroll-bar")[0]),x=angular.element(a[0].querySelectorAll(".scroll-thumb")[0]),C=0,R="x"===this.options.axis,M="ontouchstart"in t,$="onwheel"in document?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",E=R?"width":"height",V=E.charAt(0).toUpperCase()+E.slice(1).toLowerCase(),X=R?"left":"top",A=document.createEvent("HTMLEvents");A.initEvent("move",!0,!0),this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.initialize=function(){return this.options.alwaysVisible||k.css("opacity",0),b.update(),r(),b},this.update=function(t){if(this.viewportSize=P.prop("offset"+V),this.contentSize=y.prop("scroll"+V),this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,C=k.prop("offsetTop"),k.toggleClass("disable",this.contentRatio>=1||isNaN(this.contentRatio)),!this.options.alwaysVisible&&this.contentRatio<1&&this.viewportSize>0&&i.addClass(k,"visible").then(function(){i.removeClass(k,"visible")}),null!=t)switch(t){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;default:this.contentPosition=parseInt(t,10)||0}return c(),x.css(X,b.contentPosition/b.trackRatio+"px"),k.css(E,b.trackSize+"px"),x.css(E,b.thumbSize+"px"),y.css(X,-b.contentPosition+"px"),this},this.cleanup=function(){P.off("touchstart",h),x.off("mousedown",p),k.off("mousedown",d),angular.element(t).off("resize",u),a.off($,v),b.options.alwaysVisible=!0,m()}}],link:function(e,o,i,n){var s=t.getComputedStyle(o[0]).getPropertyValue("position");"relative"!==s&&"absolute"!==s&&o.css("position","relative"),n.initialize(),o.on("$destroy",function(){n.cleanup()})}}}])}();
//# sourceMappingURL=ngTinyScrollbar.js.map
