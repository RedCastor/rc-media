!function(e){"use strict";e.module("rcMedia",["ngResource"])}(angular),function(e){"use strict";e.module("rcMedia").constant("RCMEDIA_UPLOAD_STATES",{SELECT_FILES:"selectFiles",CROP_IMAGE:"cropImage",PROGRESS_FILES:"progressFiles"})}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmGalleryControls",["$log","$parse","$compile",function(t,r,l){return{restrict:"EA",require:"^rcMedia",scope:{deleteClick:"@?rcmDeleteClick",saveClick:"@?rcmSaveClick"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-gallery-controls.tpl.html"},link:function(t,l,a,i){t.deleteSources=function(){i.deleteSources(),t.$parent.$parent.$applyAsync(r(t.deleteClick))},t.deselectSources=function(){i.deselectSources()},t.saveSources=function(){i.saveSources(),t.$parent.$parent.$applyAsync(r(t.saveClick))},i.galleryControlsElement=e.element(l),t.rcMediaApi=i}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmGallery",["$window","$timeout","$log",function(t,r,l){return{restrict:"EA",require:"^rcMedia",scope:{sources:"=?ngModel",seletedSources:"=?rcmSelectedSources",order:"@?rcmOrder",multiple:"=?rcmMultiple",search:"@?rcmSearchValue",loadIcon:"@?rcmLoadIcon"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-gallery.tpl.html"},link:function(a,i,o,c){a.alerts=[],a.loading=!1,a.loadMore=!1,a.sources=e.isDefined(a.sources)?a.sources:[],a.seletedSources=e.isDefined(a.seletedSources)?a.seletedSources:[],a.order=e.isDefined(a.order)?a.order:"date",a.multiple=!!e.isDefined(a.multiple)&&a.multiple,a.search=e.isDefined(a.search)?a.search:"",a.onChangeGalleryLoading=function(t,r){!1===t?(a.loadMore=c.gallery.loadMore,e.isObject(c.gallery.result)&&e.isDefined(c.gallery.result.message)&&a.alerts.push({type:"alert",msg:c.gallery.result.message})):a.alerts=[],a.loading=t},a.onChangeSources=function(e,t){e!==t&&(l.debug("onSearch"),a.sources=e)},a.onChangeSourcesSelected=function(e,t){e!==t&&(l.debug("onChangeSourcesSelected"),a.seletedSources=e)},a.selectSource=function(e,t){c.selectSource(e,t),a.seletedSources=c.sourcesSelected},a.loadMoreSources=function(){c.loadMoreSources().then(function(e){a.loadMore=e.length>0,r(function(){t.dispatchEvent(new Event("resize"))},50)},function(e){})},a.closeAlert=function(e){a.alerts.splice(e,1)},c.galleryElement=e.element(i),c.initMediaGallery({loading:a.loading,order:a.order,multiple:a.multiple,loadMore:a.loadMore},a.search),a.rcMediaApi=c,a.$watch("rcMediaApi.sources",a.onChangeSources),a.$watch("rcMediaApi.sourcesSelected",a.onChangeSourcesSelected),a.$watch("rcMediaApi.gallery.loading",a.onChangeGalleryLoading)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmSearch",["$log",function(t){return{restrict:"EA",require:"^rcMedia",scope:{search:"=?ngModel",value:"@?rcmValue"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-search.tpl.html"},link:function(r,l,a,i){r.search=e.isDefined(r.value)?r.value:r.search,r.value=e.isDefined(r.value)?r.value:"",r.onSearch=function(e,r){e!==r&&(t.debug("onSearch"),i.search=e,i.searchSources())},i.searchElement=e.element(l),i.initMediaSearch(r.search),r.rcMediaApi=i,r.$watch("search",r.onSearch)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmTranslate",["$log","rcMedia",function(e,t){return{restrict:"EA",require:"^rcMedia",link:function(e,r,l,a){var i=r.html();if(i.length>0){var o=t.getLocalizedText(i);r.html(r.html().replace(i,o))}}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmUploadControls",["$log","$parse","$compile",function(t,r,l){return{restrict:"EA",require:"^rcMedia",scope:{file:"=?ngModel",saveClick:"@?rcmSaveClick",cancelClick:"@?rcmCancelClick"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-upload-controls.tpl.html"},link:function(l,a,i,o){l.file=e.isDefined(l.file)?l.file:null,l.uploadFile=function(){return l.file=o.upload.file,o.uploadFile().then(function(e){t.debug(e),l.$parent.$parent.$applyAsync(r(l.saveClick))},function(e){t.debug(e)},function(e){t.debug(e)})},l.cancelUploadFile=function(){o.cancelUploadFile()},l.resetUploadFile=function(e){l.file=null,o.resetUploadFile(),!0===e&&l.$parent.$parent.$applyAsync(r(l.cancelClick))},o.uploadControlsElement=e.element(a),l.rcMediaApi=o}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmUpload",["$log",function(t){return{restrict:"EA",require:"^rcMedia",scope:{file:"=?ngModel",multiple:"=?rcmMultiple",accept:"@?rcmAccept",pattern:"@?rcmPattern",minWidth:"=?rcmMinWidth",minHeight:"=?rcmMinHeight",crop:"=?rcmCrop",cropArea:"=?rcmCropArea",loadIcon:"@?rcmLoadIcon"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-upload.tpl.html"},link:function(r,l,a,i){r.alerts=[],r.loading=!1,r.progress=0,r.currentState="",r.file=e.isDefined(r.file)?r.file:i.resetUploadFile(),r.multiple=!!e.isDefined(r.multiple)&&r.multiple,r.accept=e.isDefined(r.accept)?r.accept:"image/*",r.pattern=e.isDefined(r.pattern)?r.pattern:"image/*",r.minWidth=e.isDefined(r.minWidth)?r.minWidth:300,r.minHeight=e.isDefined(r.minHeight)?r.minHeight:300,r.crop=!e.isDefined(r.crop)||r.crop;var o={auto:!0,width:500,height:500,minWidth:100,minHeaight:100,cropWidth:2048,cropHeight:2048,keepAspect:!0,touchRadius:30,color:"rgba(118, 118, 118, 0.8)",colorDrag:"rgba(118, 118, 118, 0.8)",colorBg:"rgba(200, 200, 200, 0.8)",colorCropBg:"rgba(118, 118, 118, 0.8)"};r.cropArea=e.isObject(r.cropArea)?e.extend(o,r.cropArea):o,r.onChangeUploadLoading=function(e,t){!1===e&&(r.loadMore=i.gallery.loadMore),r.loading=e},r.onChangeUploadResult=function(t,l){t!==l&&(e.isObject(i.upload.result)&&e.isDefined(i.upload.result.message)?r.alerts.push({type:"alert",msg:i.upload.result.message}):r.alerts=[])},r.onChangeUploadFile=function(e,l){e!==l&&(t.debug("onChangeUploadFile"),r.file=e)},r.onChangeUploadMultiple=function(e,l){e!==l&&(t.debug("onChangeUploadMultiple"),r.multiple=e)},r.onChangeUploadCrop=function(e,l){e!==l&&(t.debug("onChangeUploadCrop"),r.crop=e)},r.onChangeUploadCrop=function(e,l){e!==l&&(t.debug("onChangeUploadCrop"),r.cropArea=e)},r.onChangeUploadProgress=function(e,l){e!==l&&(t.debug("onChangeUploadProgress"),r.progress=e)},r.onChangeUploadCurrentState=function(e,l){t.debug("onChangeUploadCurrentState"),r.currentState=e},r.uploadSelectFiles=function(e){r.alerts=[],i.uploadSelectFiles(e)},r.closeAlert=function(e){r.alerts.splice(e,1)},i.uploadElement=e.element(l),i.initMediaUpload({multiple:r.multiple,accept:r.accept,pattern:r.pattern,minWidth:r.minWidth,minHeight:r.minHeight,crop:r.crop,cropArea:r.cropArea,file:r.file}),r.rcMediaApi=i,r.$watch("rcMediaApi.upload.file",r.onChangeUploadFile),r.$watch("rcMediaApi.upload.multiple",r.onChangeUploadMultiple),r.$watch("rcMediaApi.upload.crop",r.onChangeUploadCrop),r.$watch("rcMediaApi.upload.cropArea",r.onChangeUploadCropArea),r.$watch("rcMediaApi.upload.progress",r.onChangeUploadProgress),r.$watch("rcMediaApi.upload.loading",r.onChangeUploadLoading),r.$watch("rcMediaApi.upload.result",r.onChangeUploadResult),r.$watch("rcMediaApi.upload.currentState",r.onChangeUploadCurrentState)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcMedia",[function(){return{restrict:"EA",require:["?ngModel"],scope:{model:"=ngModel",modelPreview:"=ngModelPreview",sourceUrl:"@rcmSourceUrl",returnModelType:"@rcmReturnModelType",returnModelKey:"@rcmReturnModelKey",returnModelPush:"=?rcmReturnModelPush",sourceId:"@rcmSourceId",sourceUrlKey:"@rcmSourceUrlKey",sourceTitle:"@rcmSourceTitle",sourcesOffsetKey:"@rcmSourcesOffsetKey",sourcesLimitKey:"@rcmSourcesLimitKey",sourcesSearchKey:"@rcmSourcesSearchKey",deleteQuery:"@rcmDeleteQuery",sourcesQuery:"@rcmSourcesQuery",onMediaReady:"&rcmOnMediaReady",onUploadUpdateState:"&rcmOnUploadUpdateState",onUploadFile:"&rcmOnUploadFile",onResetUploadFile:"&rcmOnResetUploadFile",onSaveSources:"&rcmOnSaveSources",onDeleteSources:"&rcmOnDeleteSources",onSelectSource:"&rcmOnSelectSource",onSearchSources:"&rcmOnSearchSources",onLoadMoreSources:"&rcmOnLoadMoreSources"},controller:"rcMediaCtrl",controllerAs:"rcMediaApi",link:{post:function(t,r,l,a){t.rcMediaApi.rcMediaElement=e.element(r)}}}}])}(angular),function(e){"use strict";e.module("rcMedia").controller("rcMediaCtrl",["$scope","$q","$injector","$filter","$log","$timeout","RCMEDIA_UPLOAD_STATES","rcMediaService",function(t,r,l,a,i,o,c,n){var s=this;this.rcMediaElement=null,this.init=function(){i.debug("rcMedia Init"),this.upload={multiple:!1,accept:"image/*",pattern:"image/*",minWidth:"300",minHeight:"300",crop:!0,cropArea:{auto:!0,color:"rgba(118, 118, 118, 0.8)",width:500,height:500,minWidth:100,minHeight:100},file:{},loading:!1,result:null,progress:0,currentState:"",deferred:null,uploadFile:null},this.search="",this.sourceUrl=e.isDefined(t.sourceUrl)?t.sourceUrl:"",this.sourceId=e.isDefined(t.sourceId)?t.sourceId:"id",this.sourceUrlKey=e.isDefined(t.sourceUrlKey)?t.sourceUrlKey:"source_url",this.sourceTitle=e.isDefined(t.sourceTitle)?t.sourceTitle:"title.rendered",this.returnModelType=e.isDefined(t.returnModelType)?t.returnModelType:"string",this.returnModelKey=e.isDefined(t.returnModelKey)?t.returnModelKey:null,this.returnModelPush=!!e.isDefined(t.returnModelPush)&&t.returnModelPush,this.accept=e.isDefined(t.accept)?t.accept:"image/*",this.sourcesLimitKey=e.isDefined(t.sourcesLimitKey)?t.sourcesLimitKey:"limit",this.sourcesOffsetKey=e.isDefined(t.sourcesOffsetKey)?t.sourcesOffsetKey:"offset",this.sourcesSearchKey=e.isDefined(t.sourcesSearchKey)?t.sourcesSearchKey:"search",this.sourcesQuery=e.isDefined(t.sourcesQuery)?t.$eval(t.sourcesQuery):{},this.deleteQuery=e.isDefined(t.deleteQuery)?t.$eval(t.deleteQuery):{},this.sources=e.isDefined(this.sources)?this.sources:[],this.sourcesSelected=[],e.isUndefined(this.sourcesQuery[this.sourcesLimitKey])&&(this.sourcesQuery[this.sourcesLimitKey]=10),e.isUndefined(this.sourcesQuery[this.sourcesOffsetKey])&&(this.sourcesQuery[this.sourcesOffsetKey]=0),e.isUndefined(this.sourcesQuery[this.sourcesSearchKey])&&(this.sourcesQuery[this.sourcesSearchKey]=""),this.addBindings(),t.onMediaReady({$rcMediaApi:this})},this.initMediaGallery=function(t,r){i.debug("initMediaGallery"),this.gallery={result:null,loading:!1,loadMore:!1,multiple:!1,order:"date"},e.isObject(t)&&e.extend(this.gallery,t),e.isString(r)&&r.length>0?(this.search=r,this.searchSources()):this.getSources(this.sourcesQuery)},this.initMediaSearch=function(t){i.debug("initMediaSearch"),e.isString(t)&&t.length>0&&(this.search=t,this.searchSources())},this.initMediaUpload=function(t){i.debug("initMediaUpload"),e.isObject(t)&&e.extend(this.upload,t),this.setUploadState(c.SELECT_FILES)},this.getSourceTitle=function(e){for(var t=this.sourceTitle.split("."),r=e,l=0;l<t.length-1;l++){var a=t[l];r[a]||(r[a]={}),r=r[a]}var i=r[t[t.length-1]];return i?i.replace("_"," "):""},this.setUploadState=function(e){return e&&e!==this.upload.currentState&&(t.onUploadUpdateState({$state:e}),this.upload.currentState=e),this.upload.currentState},this.uploadSelectFiles=function(t){t.length>0&&(i.debug("Upload selectFiles"),!1===this.upload.multiple&&!0===this.upload.crop?(e.isDefined(this.uploadElement)&&e.isDefined(this.upload.cropArea.auto)&&!0===this.upload.cropArea.auto&&(this.upload.cropArea.width=this.uploadElement[0].clientWidth,this.upload.cropArea.height=this.uploadElement[0].clientHeight,this.upload.cropArea.minWidth=this.upload.cropArea.width/10,this.upload.cropArea.minHeight=this.upload.cropArea.height/10),this.setUploadState(c.CROP_IMAGE)):this.uploadFile())},this.uploadFile=function(){i.debug("upload"),this.upload.deferred=r.defer(),this.upload.loading=!0,this.upload.progress=0,this.setUploadState(c.PROGRESS_FILES);try{var a=l.get("Upload");e.isUndefined(this.upload.file.destDataUrl)||!this.upload.file.destDataUrl?this.upload.file.destDataUrl=this.upload.file.source.$ngfBlobUrl:this.upload.file.source=a.dataUrltoBlob(this.upload.file.destDataUrl,this.upload.file.source.name),this.upload.uploadFile=a.upload({url:n.getRestUrl(),data:{file:this.upload.file.source}}),this.upload.uploadFile.then(function(r){s.resetUploadFile(),s.sources.push(e.copy(r.data)),t.onUploadFile({$file:s.upload.file}),s.setUploadState(c.SELECT_FILES),s.upload.result=null,s.upload.loading=!1,s.upload.deferred.resolve(r)},function(e){i.debug("error status: "+e),s.resetUploadFile(),s.setUploadState(c.SELECT_FILES),s.upload.result=e.data,s.upload.loading=!1,s.upload.deferred.reject(e)},function(e){i.debug("Progress status: "+e);var t=parseInt(100*e.loaded/e.total);s.upload.progress=t,s.upload.deferred.notify(t)})}catch(e){i.error(e),s.setUploadState(c.SELECT_FILES),s.upload.deferred.reject()}return this.upload.deferred.promise},this.cancelUploadFile=function(){this.upload.uploadFile.abort()},this.resetUploadFile=function(){return this.upload.file={source:null,destDataUrl:""},this.setUploadState(c.SELECT_FILES),t.onResetUploadFile({$file:this.upload.file}),this.upload.file},this.selectSource=function(r){if(i.debug("selectSource"),-1===s.sourcesSelected.indexOf(r))this.gallery.multiple?(r.activeClass=!0,this.sourcesSelected.push(r)):(e.forEach(s.sources,function(e,t){s.sources[t].activeClass=!1}),r.activeClass=!0,this.sourcesSelected=[],this.sourcesSelected.push(r)),t.onSelectSource({$source:r});else{var l=s.sources.indexOf(r);e.forEach(s.sourcesSelected,function(e,t){e===r&&(-1!==l&&(s.sources[l].activeClass=!1),s.sourcesSelected.splice(t,1))})}},this.deselectSources=function(){e.forEach(s.sources,function(e,t){s.sources[t].activeClass=!1}),s.sourcesSelected=[]},this.getSources=function(t){i.debug("getGallerySources"),this.gallery.loading=!0;var r=n.get(t,!0);return r.then(function(t){s.sources=e.copy(t),s.gallery.loadMore=s.sources.length>0,s.gallery.loading=!1,s.gallery.result=null},function(e){s.gallery.loadMore=s.sources.length>0,s.gallery.loading=!1,s.gallery.result=e.data}),r},this.deleteSources=function(){i.debug("deleteSources"),e.forEach(this.sourcesSelected,function(e,r){n.delete(e[s.sourceId],s.deleteQuery).then(function(r){s.removeSource(e),t.onDeleteSources({$source:e})},function(r){404===r.status&&(s.removeSource(e),t.onDeleteSources({$source:e}))})})},this.removeSource=function(e){var t=s.sources.map(function(e){return e[s.sourceId]}).indexOf(e[s.sourceId]);-1!==t&&s.sources.splice(t,1),-1!==(t=s.sourcesSelected.map(function(e){return e[s.sourceId]}).indexOf(e[s.sourceId]))&&s.sourcesSelected.splice(t,1)},this.saveSources=function(){if(i.debug("saveSources"),this.sourcesSelected.length>0){var r=[];switch(!1===this.returnModelPush&&(t.modelPreview=[]),e.forEach(s.sourcesSelected,function(e){s.returnModelKey?r.push(e[s.returnModelKey]):r.push(e),t.modelPreview.push(e)}),this.returnModelType){case"string":if(!0===this.returnModelPush){var l=t.model;l.length>0&&(l+=","),r=l+r.toString()}t.model=r.toString();break;case"array":!0===this.returnModelPush&&(r=t.model.concat(r)),t.model=r}t.onSaveSources({$model:t.model})}},this.loadMoreSources=function(){i.debug("loadMore"),this.sourcesQuery[this.sourcesOffsetKey]=this.sources.length,this.gallery.loading=!0;var r=n.get(this.sourcesQuery);return r.then(function(r){r.length>0?e.forEach(r,function(t){s.sources.push(e.copy(t))},s):s.gallery.loadMore=!1,s.gallery.result=null,s.gallery.loading=!1,t.onLoadMoreSources()},function(e){s.gallery.result=e.data,s.gallery.loading=!1}),r},this.searchSources=function(){i.debug("searchSources"),this.sourcesQuery[this.sourcesSearchKey]=this.search,this.sourcesQuery[this.sourcesOffsetKey]=0,this.gallery.loading=!0;var r=n.get(this.sourcesQuery,!0);return r.then(function(r){r.length>0?s.sources=e.copy(r):s.sources=[],s.gallery.loadMore=s.sources.length>0,s.gallery.result=null,s.gallery.loading=!1,t.onSearchSources({$search:s.search})},function(e){s.sources=[],s.gallery.loadMore=!1,s.gallery.result=e.data,s.gallery.loading=!1}),r},this.addBindings=function(){i.debug("addBindings")},this.init()}])}(angular),function(e){"use strict";var t=e.module("rcMedia");t.config(["$resourceProvider",function(e){e.defaults.cancellable=!0}]),t.provider("rcMedia",[function(){this.rest={url:"",path:"/wp-json/wp/v2/media"},this.locale=null,this.defaultText={"en-us":{TITLE_GALLERY:"Gallery",TITLE_UPLOAD:"Upload files",TITLE_DRAG_FILE:"Drag files to upload",SUB_TITLE_DRAG_FILE:"or",BTN_CANCEL:"Cancel",BTN_SAVE:"Save",BTN_DELETE_FILE:"Delete file",BTN_DELETE_FILES:"Delete files",BTN_DESELECT_ALL:"Deselect all",BTN_SELECT_FILE:"Select file",BTN_SELECT_FILES:"Select files",BTN_SHOW_MORE:"Show More",BTN_BACK_GALLERY:"Back to gallery",BTN_UPLOAD_FILE:"Upload file",BTN_UPLOAD_FILES:"Upload files",BTN_BROWSE_FILE:"Browse a file"},"fr-FR":{TITLE_GALLERY:"Gallerie",TITLE_UPLOAD:"Télécharger un fichier",TITLE_DRAG_FILE:"Glisser le fichier ici",SUB_TITLE_DRAG_FILE:"ou",BTN_CANCEL:"Annuler",BTN_SAVE:"Sauver",BTN_DELETE_FILE:"Supprimer le fichier",BTN_DELETE_FILES:"Supprimer les fichiers",BTN_DESELECT_ALL:"Déselectioner tous",BTN_SELECT_FILE:"Selectioner le fichier",BTN_SELECT_FILES:"Selectioner les fichiers",BTN_SHOW_MORE:"Voir plus",BTN_BACK_GALLERY:"Revenir à la gallerie",BTN_UPLOAD_FILE:"Télécharger le fichier",BTN_UPLOAD_FILES:"Télécharger les fichiers",BTN_BROWSE_FILE:"Choisir un fichier"}},this.interfaceText=e.copy(this.defaultText),this.$get=["$http","$locale",function(e,t){var r,l=this.rest;return e.defaults.useXDomain=!0,e.defaults.headers.common["If-Modified-Since"]="0",e.defaults.headers.common["cache-control"]="private, max-age=0, no-cache",r=this.locale?this.interfaceText[this.locale]:this.interfaceText[t.id],r||(r=this.defaultText["en-us"]),{getRest:function(){return l},getLocalizedText:function(e){if(e){var t=r[e];return t||""}return r}}}],this.setLocalizedText=function(t,r){if(!t)throw new Error("localeId must be a string formatted as languageId-countryId");this.interfaceText[t]||(this.interfaceText[t]={}),this.interfaceText[t]=e.extend(this.interfaceText[t],r)},this.useLocale=function(e){this.locale=e},this.setRest=function(e){this.rest=e}}]),t.factory("rcMediaResource",["$resource","rcMedia",function(e,t){return{Media:e(t.getRest().url+t.getRest().path+"/:mediaId",{mediaId:"@media_id"},{get:{method:"GET",isArray:!1,cache:!1}},{query:{method:"GET",params:{},isArray:!0,cache:!1,cancellable:!0}})}}]),t.factory("rcMediaService",["$log","$q","rcMedia","rcMediaResource",function(t,r,l,a){return{getRestUrl:function(){return l.getRest().url+l.getRest().path},get:function(t,r){return!0===r&&void 0!==this.request&&e.isFunction(this.request.$cancelRequest)&&this.request.$cancelRequest(),e.isNumber(t)?(t={mediaId:t},this.request=a.Media.get(t)):(e.isObject(t)||(t={}),this.request=a.Media.query(t)),this.request.$promise},delete:function(t,r){return e.isUndefined(r)&&(r={}),e.extend(r,{mediaId:t}),a.Media.delete(r).$promise}}}])}(angular),angular.module("rcMedia").run(["$templateCache",function(e){e.put("rc-media-dialog-zf.tpl.html",'<div class="rc-media" rc-media\n     rcm-source-url="{{rcDialogApi.data.sourceUrl}}"\n     rcm-source-url-key="{{rcDialogApi.data.sourceUrlKey}}"\n     rcm-source-id="{{rcDialogApi.data.sourceId}}"\n     rcm-source-title="{{rcDialogApi.data.sourceTitle}}"\n     data-ng-model="rcDialogApi.data.sources"\n     data-ng-model-preview="rcDialogApi.data.sourcesPreview"\n     rcm-return-model-type="{{rcDialogApi.data.returnModelType}}"\n     rcm-return-model-key="{{rcDialogApi.data.returnModelKey}}"\n     rcm-return-model-push="rcDialogApi.data.returnModelPush"\n     rcm-delete-query="{{rcDialogApi.data.deleteQuery}}"\n     rcm-sources-query="{{rcDialogApi.data.sourcesQuery}}"\n     rcm-sources-offset-key="{{rcDialogApi.data.sourcesOffsetKey}}"\n     rcm-sources-limit-key="{{rcDialogApi.data.sourcesLimitKey}}"\n     rcm-sources-search-key="{{rcDialogApi.data.sourcesSearchKey}}"\n>\n<div class="dialog-header">\n    <div class="gallery-view" data-ng-show="!selectedView">\n        <h3 class="float-left dialog-title"><rcm-translate>TITLE_GALLERY</rcm-translate></h3>\n        <button class="button secondary hollow float-right dialog-close" type="button" data-ng-click="rcDialogApi.closeDialog()" aria-label="Close reveal" >\n            <span aria-hidden="true">&times;</span>\n        </button>\n        <button class="button primary hollow float-right upload" type="button" data-ng-show="!selectedView" data-ng-click="selectedView=\'fileUpload\'" >\n            <svg width="25" height="25" version="1.1" id="rcm_upload_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                   x="0px" y="0px" viewBox="0 0 23 20.5" style="enable-background:new 0 0 23 20.5;" xml:space="preserve"\n              >\n                <g id="rcm_upload_svg_arrow">\n                  <line id="rcm_upload_svg_line" class="st0" x1="11.5" y1="20.5" x2="11.5" y2="7.5"/>\n                  <polyline id="rcm_upload_svg_point" class="st1" points="8.5,10.5 11.5,7.5 14.5,10.5 \t"/>\n                </g>\n                <path\n                  id="rcm_upload_svg_cloud"\n                  class="st1"\n                  d="M15.5,15.5h3c2.2,0,4-1.8,4-4c0-2.2-1.8-4-4-4c-0.3-3.9-3.5-7-7.5-7c-4,0-7.3,3.2-7.5,7.1c-1.7,0.4-3,2-3,3.9c0,2.2,1.8,4,4,4h3"\n                />\n            </svg>\n            <rcm-translate>BTN_UPLOAD_FILE</rcm-translate>\n        </button>\n    </div>\n\n    <div class="upload-view" data-ng-show="selectedView==\'fileUpload\'">\n        <h3 class="float-left dialog-title" ><rcm-translate>TITLE_UPLOAD</rcm-translate></h3>\n        <button class="button secondary hollow float-right dialog-close" type="button" data-ng-click="rcDialogApi.closeDialog()" aria-label="Close reveal" >\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>\n</div>\n<div class="dialog-body">\n\n    \x3c!-- Directive rc-media-upload --\x3e\n    <div class="upload-view" data-ng-if="selectedView==\'fileUpload\'"\n         rcm-upload\n         rcm-template-url="rc-media-upload-zf.tpl.html"\n         rcm-multiple="rcDialogApi.data.upload.multiple"\n         rcm-accept="{{rcDialogApi.data.upload.accept}}"\n         rcm-crop="rcDialogApi.data.upload.crop"\n         rcm-crop-area="rcDialogApi.data.upload.cropArea"\n         rcm-load-icon="{{rcDialogApi.data.upload.loadIcon}}"\n    ></div>\n\n    <div class="gallery-view" data-ng-show="!selectedView">\n        \x3c!-- Directive rc-media-gallery --\x3e\n        <div rcm-gallery\n             rcm-template-url="rc-media-gallery-zf.tpl.html"\n             rcm-order="{{rcDialogApi.data.gallery.order}}"\n             rcm-multiple="rcDialogApi.data.gallery.multiple"\n             rcm-selected-sources="rcDialogApi.data.gallery.selectedSources"\n             rcm-search-value="{{rcDialogApi.data.gallery.searchValue}}"\n             rcm-load-icon="{{rcDialogApi.data.gallery.loadIcon}}"\n        ></div>\n    </div>\n</div>\n<div class="dialog-footer" data-ng-show="selectedView || rcDialogApi.data.gallery.selectedSources.length">\n    <div class="upload-view" data-ng-if="selectedView==\'fileUpload\'" rcm-upload-controls\n         rcm-template-url="rc-media-upload-controls-zf.tpl.html"\n         data-ng-model="rcDialogApi.data.uploadFile"\n         rcm-save-click="selectedView=false"\n         rcm-cancel-click="selectedView=false"\n    ></div>\n\n    <div class="gallery-view" data-ng-if="!selectedView" rcm-gallery-controls\n         rcm-template-url="rc-media-gallery-controls-zf.tpl.html"\n         rcm-save-click="rcDialogApi.confirmDialog()"\n    ></div>\n</div>\n</div>'),e.put("rc-media-gallery-controls-zf.tpl.html",'<button class="button alert hollow float-left delete-file" data-ng-click="deleteSources()"><rcm-translate>BTN_DELETE_FILE</rcm-translate></button>\n<button class="button secondary hollow float-left deselect-all" data-ng-click="deselectSources()"><rcm-translate>BTN_DESELECT_ALL</rcm-translate></button>\n<button class="button primary float-right select-file" data-ng-click="saveSources()"><rcm-translate>BTN_SELECT_FILE</rcm-translate></button>'),e.put("rc-media-gallery-zf.tpl.html",'<div class="rcm-gallery" >\n\n    <alert class="message" data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>\n\n    <div data-ng-hide="!loading" class="loading-overlay">\n        <webicon  class="loading-icon" icon="{{loadIcon}}"></webicon>\n    </div>\n\n    <div class="gallery-overlay" scrollbar="{autoUpdate: true}">\n\n        <div data-ng-repeat="source in sources | orderBy:order:true"\n             class="thumbnail-block"\n             data-ng-class="{\'selected\': source.activeClass}"\n             data-ng-click="selectSource(source)">\n            <div class="thumbnail"\n                 data-ng-style="{\'background-image\':\'url({{rcMediaApi.sourceUrl + source[rcMediaApi.sourceUrlKey]}})\', \'background-repeat\': \'no-repeat\', \'background-position\': \'center center\', \'background-size\': \'contain\'}"\n                 tooltip-placement="bottom"\n                 tooltip-html-unsafe="{{rcMediaApi.getSourceTitle(source)}}"\n            ></div>\n        </div>\n\n        <button type="button" class="button secondary float-center load-more" data-ng-show="loadMore" data-ng-click="loadMoreSources()" data-ng-disabled="loading">\n            <i class="fa fa-plus"></i>\n            <rcm-translate>BTN_SHOW_MORE</rcm-translate>\n        </button>\n\n    </div>\n</div>'),e.put("rc-media-upload-controls-zf.tpl.html",'<div data-ng-show="rcMediaApi.upload.currentState==\'selectFiles\'">\n    <button class="button secondary hollow float-left" data-ng-click="resetUploadFile(true)"><rcm-translate>BTN_BACK_GALLERY</rcm-translate></button>\n</div>\n\n<div data-ng-show="rcMediaApi.upload.currentState==\'cropImage\'">\n    <button class="button primary float-right" data-ng-click="uploadFile()"><rcm-translate>BTN_SAVE</rcm-translate></button>\n    <button class="button hollow secondary float-right" data-ng-click="resetUploadFile()"><rcm-translate>BTN_CANCEL</rcm-translate></button>\n</div>\n\n<div data-ng-show="rcMediaApi.upload.currentState==\'progressFiles\'">\n    <button class="button secondary float-right" data-ng-click="cancelUploadFile()"><rcm-translate>BTN_CANCEL</rcm-translate></button>\n</div>\n'),e.put("rc-media-upload-zf.tpl.html",'<div class="rcm-upload">\n\n  <alert class="message" data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>\n\n  <div data-ng-show="currentState==\'selectFiles\'" class="rcm-dropzone"\n       ngf-drop="uploadSelectFiles($files)"\n       data-ng-model="file.source"\n       ngf-drag-over-class="dragover"\n       ngf-multiple="multiple"\n       ngf-pattern="{{pattern}}"\n       ngf-accept="{{accept}}"\n       ngf-min-width="minWidth"\n       ngf-min-height="minHeight"\n  >\n\n    <div class="select-file" >\n      <svg width="150" height="150" version="1.1" id="rcm_upload_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n           x="0px" y="0px" viewBox="0 0 23 20.5" style="enable-background:new 0 0 23 20.5;" xml:space="preserve"\n      >\n        <g id="rcm_upload_svg_arrow">\n\t      <line id="rcm_upload_svg_line" class="st0" x1="11.5" y1="20.5" x2="11.5" y2="7.5"/>\n\t      <polyline id="rcm_upload_svg_point" class="st1" points="8.5,10.5 11.5,7.5 14.5,10.5 \t"/>\n        </g>\n        <path\n          id="rcm_upload_svg_cloud"\n          class="st1"\n          d="M15.5,15.5h3c2.2,0,4-1.8,4-4c0-2.2-1.8-4-4-4c-0.3-3.9-3.5-7-7.5-7c-4,0-7.3,3.2-7.5,7.1c-1.7,0.4-3,2-3,3.9c0,2.2,1.8,4,4,4h3"\n        />\n      </svg>\n\n      <h3><rcm-translate>TITLE_DRAG_FILE</rcm-translate></h3>\n      <p class="lead"><rcm-translate>SUB_TITLE_DRAG_FILE</rcm-translate></p>\n\n      <button ngf-select="uploadSelectFiles($files)"\n              data-ng-model="file.source"\n              ngf-multiple="multiple"\n              ngf-accept="{{accept}}"\n              ngf-pattern="{{pattern}}"\n              ngf-min-width="minWidth"\n              ngf-min-height="minHeight"\n              type="button"\n              class="button primary large"\n      >\n        <rcm-translate>BTN_BROWSE_FILE</rcm-translate>\n      </button>\n    </div>\n  </div>\n\n  <div class="crop-area" data-ng-if="currentState==\'cropImage\'">\n    <div>\n      <canvas\n              height="{{cropArea.height}}px"\n              width="{{cropArea.width}}px"\n              min-width="cropArea.minWidth"\n              min-height="cropArea.minHeight"\n              id="canvas"\n              img-cropper\n              img-src="{imageData: (file.source | ngfDataUrl), fileType: file.source.type}"\n              img-dst="file.destDataUrl"\n              crop-width="cropArea.cropWidth"\n              crop-height="cropArea.cropHeight"\n              keep-aspect="cropArea.keepAspect"\n              touch-radius="cropArea.touchRadius"\n              color="{{cropArea.color}}"\n              color-drag="{{cropArea.colorDrag}}"\n              color-bg="{{cropArea.colorBg}}"\n              color-crop-bg="{{cropArea.colorCropBg}}"\n      >\n      </canvas>\n    </div>\n  </div>\n\n  <div data-ng-show="currentState==\'progressFiles\'" class="preview-file" >\n\n    <div class="loading-overlay">\n      <webicon  class="loading-icon" icon="{{loadIcon}}"></webicon>\n    </div>\n\n    <img class="float-center" width="200" height="200" data-ng-src="{{file.destDataUrl}}" alt="">\n  </div>\n</div>'),e.put("rc-media-search-zf.tpl.html",'<div class="rcm-search input-group">\n  <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>\n  <input type="text" class="form-control" data-ng-model="search" placeholder="Search ...">\n</div>')}]);