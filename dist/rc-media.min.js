!function(e){"use strict";e.module("rcMedia",["ngResource"])}(angular),function(e){"use strict";e.module("rcMedia").constant("RCMEDIA_UPLOAD_STATES",{SELECT_FILES:"selectFiles",CROP_IMAGE:"cropImage",PROGRESS_FILES:"progressFiles"})}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmGalleryControls",["$log","$parse","$compile",function(t,r,a){return{restrict:"EA",require:"^rcMedia",scope:{deleteClick:"@?rcmDeleteClick",saveClick:"@?rcmSaveClick"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-gallery-controls.tpl.html"},link:function(t,a,l,i){t.loading=!1,t.deleteSources=function(){t.loading=!0,i.deleteSources().then(function(e){t.loading=!1,i.bindResize()},function(e){t.loading=!1,i.bindResize()}),t.$parent.$parent.$applyAsync(r(t.deleteClick))},t.deselectSources=function(){i.deselectSources()},t.saveSources=function(){i.saveSources(),t.$parent.$parent.$applyAsync(r(t.saveClick))},i.galleryControlsElement=e.element(a),t.rcMediaApi=i}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmGallery",["$window","$timeout","$log",function(t,r,a){return{restrict:"EA",require:"^rcMedia",scope:{sources:"=?ngModel",seletedSources:"=?rcmSelectedSources",order:"@?rcmOrder",multiple:"=?rcmMultiple",search:"@?rcmSearchValue",loadIcon:"@?rcmLoadIcon"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-gallery.tpl.html"},link:function(t,r,l,i){t.alerts=[],t.loading=!1,t.loadMore=!1,t.sources=e.isDefined(t.sources)?t.sources:[],t.seletedSources=e.isDefined(t.seletedSources)?t.seletedSources:[],t.order=e.isDefined(t.order)?t.order:"date",t.multiple=!!e.isDefined(t.multiple)&&t.multiple,t.search=e.isDefined(t.search)?t.search:"",t.onChangeGalleryLoading=function(r,a){!1===r?(t.loadMore=i.gallery.loadMore,e.isObject(i.gallery.result)&&e.isDefined(i.gallery.result.message)&&t.alerts.push({type:"alert",msg:i.gallery.result.message})):t.alerts=[],t.loading=r},t.onChangeSources=function(e,r){a.debug("onChangeSources"),e!==r&&(a.debug("onChangeSources"),t.sources=e)},t.onChangeSourcesSelected=function(e,r){e!==r&&(a.debug("onChangeSourcesSelected"),t.seletedSources=e)},t.selectSource=function(e,r){i.selectSource(e,r),t.seletedSources=i.sourcesSelected},t.loadMoreSources=function(){i.loadMoreSources().then(function(e){t.loadMore=e.length>0,i.bindResize()},function(e){i.bindResize()})},t.closeAlert=function(e){t.alerts.splice(e,1)},i.galleryElement=e.element(r),i.initMediaGallery({loading:t.loading,order:t.order,multiple:t.multiple,loadMore:t.loadMore},t.search),t.rcMediaApi=i,t.$watchCollection("rcMediaApi.sources",t.onChangeSources),t.$watchCollection("rcMediaApi.sourcesSelected",t.onChangeSourcesSelected),t.$watch("rcMediaApi.gallery.loading",t.onChangeGalleryLoading)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmSearch",["$log",function(t){return{restrict:"EA",require:"^rcMedia",scope:{search:"=?ngModel",value:"@?rcmValue"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-search.tpl.html"},link:function(r,a,l,i){r.search=e.isDefined(r.value)?r.value:r.search,r.value=e.isDefined(r.value)?r.value:"",r.onSearch=function(e,r){e!==r&&(t.debug("onSearch"),i.search=e,i.searchSources())},i.searchElement=e.element(a),i.initMediaSearch(r.search),r.rcMediaApi=i,r.$watch("search",r.onSearch)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmTranslate",["$log","rcMedia",function(e,t){return{restrict:"EA",require:"^rcMedia",link:function(e,r,a,l){var i=r.html();if(i.length>0){var n=t.getLocalizedText(i);r.html(r.html().replace(i,n))}}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmUploadControls",["$log","$parse","$compile",function(t,r,a){return{restrict:"EA",require:"^rcMedia",scope:{file:"=?ngModel",saveClick:"@?rcmSaveClick",cancelClick:"@?rcmCancelClick"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-upload-controls.tpl.html"},link:function(a,l,i,n){a.file=e.isDefined(a.file)?a.file:null,a.uploadFile=function(){return a.file=n.upload.file,n.uploadFile().then(function(e){t.debug(e),a.$parent.$parent.$applyAsync(r(a.saveClick))},function(e){t.debug(e)},function(e){t.debug(e)})},a.cancelUploadFile=function(){n.cancelUploadFile()},a.resetUploadFile=function(e){a.file=null,n.resetUploadFile(),!0===e&&a.$parent.$parent.$applyAsync(r(a.cancelClick))},n.uploadControlsElement=e.element(l),a.rcMediaApi=n}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmUpload",["rcMedia","$log",function(t,r){return{restrict:"EA",require:"^rcMedia",scope:{file:"=?ngModel",multiple:"=?rcmMultiple",accept:"@?rcmAccept",pattern:"@?rcmPattern",minWidth:"=?rcmMinWidth",minHeight:"=?rcmMinHeight",fixOrientation:"=?rcmFixOrientation",crop:"=?rcmCrop",cropArea:"=?rcmCropArea",loadIcon:"@?rcmLoadIcon"},templateUrl:function(e,t){return t.rcmTemplateUrl||"rc-media-upload.tpl.html"},link:function(a,l,i,n){a.alerts=[],a.loading=!1,a.progress=0,a.currentState="",a.file=e.isDefined(a.file)?a.file:n.resetUploadFile(),a.multiple=!!e.isDefined(a.multiple)&&a.multiple,a.accept=e.isDefined(a.accept)?a.accept:"*/*",a.pattern=e.isDefined(a.pattern)?a.pattern:"*/*",a.minWidth=e.isDefined(a.minWidth)?a.minWidth:0,a.minHeight=e.isDefined(a.minHeight)?a.minHeight:0,a.fixOrientation=!!e.isDefined(a.fixOrientation)&&a.fixOrientation,a.crop=!e.isDefined(a.crop)||a.crop;var o={auto:!0,width:a.minWidth,height:a.minHeight,minWidth:a.minWidth,minHeight:a.minHeight,cropWidth:0,cropHeight:0,keepAspect:!0,enforceCropAspect:!1,touchRadius:30,color:"rgba(118, 118, 118, 0.8)",colorDrag:"rgba(118, 118, 118, 0.8)",colorBg:"rgba(200, 200, 200, 0.8)",colorCropBg:"rgba(118, 118, 118, 0.8)"};a.cropArea=e.isObject(a.cropArea)?e.extend(o,a.cropArea):o,a.onChangeUploadLoading=function(e,t){a.loading=e},a.onChangeUploadResult=function(t,r){t!==r&&(e.isObject(n.upload.result)&&e.isDefined(n.upload.result.message)?a.addAlert("alert",n.upload.result.message):a.alerts=[])},a.onChangeUploadFile=function(e,t){e!==t&&(r.debug("onChangeUploadFile"),a.file=e)},a.onChangeUploadMultiple=function(e,t){e!==t&&(r.debug("onChangeUploadMultiple"),a.multiple=e)},a.onChangeUploadCrop=function(e,t){e!==t&&(r.debug("onChangeUploadCrop"),a.crop=e)},a.onChangeUploadProgress=function(e,t){e!==t&&(r.debug("onChangeUploadProgress"),a.progress=e)},a.onChangeUploadCurrentState=function(t,l){r.debug("onChangeUploadCurrentState"),e.extend(a.cropArea,n.upload.cropArea),a.currentState=t},a.uploadSelectFiles=function(e){a.alerts=[],n.uploadSelectFiles(e)},a.changeFiles=function(l,i,o,c,s,d){if(r.debug(s),s.length>0){var u=t.getLocalizedText("UPLOAD_INVALID_FILE");e.forEach(s,function(r,a){a>0&&(u+="\r\n");var l=0;e.forEach(r.$errorMessages,function(e,r){if(u+=l>0?", ":" ",!0===e)switch(u+=t.getLocalizedText("UPLOAD_INVALID_"+r),r){case"minHeight":u+=" "+n.upload.minHeight+"px";break;case"minWidth":u+=" "+n.upload.minWidth+"px"}l++})}),a.addAlert("alert",u)}else a.uploadSelectFiles(l)},a.addAlert=function(e,t){a.alerts.push({type:e,msg:t})},a.closeAlert=function(e){a.alerts.splice(e,1)},n.uploadElement=e.element(l),n.initMediaUpload({multiple:a.multiple,accept:a.accept,pattern:a.pattern,minWidth:a.minWidth,minHeight:a.minHeight,crop:a.crop,cropArea:a.cropArea,file:a.file}),a.rcMediaApi=n,a.$watch("rcMediaApi.upload.file",a.onChangeUploadFile),a.$watch("rcMediaApi.upload.multiple",a.onChangeUploadMultiple),a.$watch("rcMediaApi.upload.crop",a.onChangeUploadCrop),a.$watch("rcMediaApi.upload.progress",a.onChangeUploadProgress),a.$watch("rcMediaApi.upload.loading",a.onChangeUploadLoading),a.$watch("rcMediaApi.upload.result",a.onChangeUploadResult),a.$watch("rcMediaApi.upload.currentState",a.onChangeUploadCurrentState)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcMedia",[function(){return{restrict:"EA",require:["?ngModel"],scope:{model:"=ngModel",modelPreview:"=ngModelPreview",sourceUrl:"@rcmSourceUrl",returnModelType:"@rcmReturnModelType",returnModelKey:"@rcmReturnModelKey",returnModelPush:"=?rcmReturnModelPush",sourceId:"@rcmSourceId",sourceUrlKey:"@rcmSourceUrlKey",sourceTitle:"@rcmSourceTitle",sourcesOffsetKey:"@rcmSourcesOffsetKey",sourcesLimitKey:"@rcmSourcesLimitKey",sourcesSearchKey:"@rcmSourcesSearchKey",deleteQuery:"@rcmDeleteQuery",sourcesQuery:"@rcmSourcesQuery",onMediaReady:"&rcmOnMediaReady",onUploadUpdateState:"&rcmOnUploadUpdateState",onUploadFile:"&rcmOnUploadFile",onResetUploadFile:"&rcmOnResetUploadFile",onSaveSources:"&rcmOnSaveSources",onDeleteSources:"&rcmOnDeleteSources",onSelectSource:"&rcmOnSelectSource",onSearchSources:"&rcmOnSearchSources",onLoadMoreSources:"&rcmOnLoadMoreSources"},controller:"rcMediaCtrl",controllerAs:"rcMediaApi",link:{post:function(t,r,a,l){t.rcMediaApi.rcMediaElement=e.element(r)}}}}])}(angular),function(e){"use strict";e.module("rcMedia").controller("rcMediaCtrl",["$scope","$q","$window","$injector","$filter","$log","$timeout","RCMEDIA_UPLOAD_STATES","rcMediaService",function(t,r,a,l,i,n,o,c,s){var d=this;this.rcMediaElement=null,this.init=function(){n.debug("rcMedia Init"),this.upload={multiple:!1,accept:"*/*",pattern:"*/*",minWidth:0,minHeight:0,fixOrientation:!1,crop:!0,cropArea:{auto:!0},file:{},loading:!1,result:null,progress:0,currentState:"",deferred:null,uploadFile:null},this.search="",this.sourceUrl=e.isDefined(t.sourceUrl)?t.sourceUrl:"",this.sourceId=e.isDefined(t.sourceId)?t.sourceId:"id",this.sourceUrlKey=e.isDefined(t.sourceUrlKey)?t.sourceUrlKey:"source_url",this.sourceTitle=e.isDefined(t.sourceTitle)?t.sourceTitle:"title.rendered",this.returnModelType=e.isDefined(t.returnModelType)?t.returnModelType:"string",this.returnModelKey=e.isDefined(t.returnModelKey)?t.returnModelKey:null,this.returnModelPush=!!e.isDefined(t.returnModelPush)&&t.returnModelPush,this.accept=e.isDefined(t.accept)?t.accept:"image/*",this.sourcesLimitKey=e.isDefined(t.sourcesLimitKey)?t.sourcesLimitKey:"limit",this.sourcesOffsetKey=e.isDefined(t.sourcesOffsetKey)?t.sourcesOffsetKey:"offset",this.sourcesSearchKey=e.isDefined(t.sourcesSearchKey)?t.sourcesSearchKey:"search",this.sourcesQuery=e.isDefined(t.sourcesQuery)?t.$eval(t.sourcesQuery):{},this.deleteQuery=e.isDefined(t.deleteQuery)?t.$eval(t.deleteQuery):{},this.sources=e.isDefined(this.sources)?this.sources:[],this.sourcesSelected=[],e.isUndefined(this.sourcesQuery[this.sourcesLimitKey])&&(this.sourcesQuery[this.sourcesLimitKey]=10),e.isUndefined(this.sourcesQuery[this.sourcesOffsetKey])&&(this.sourcesQuery[this.sourcesOffsetKey]=0),e.isUndefined(this.sourcesQuery[this.sourcesSearchKey])&&(this.sourcesQuery[this.sourcesSearchKey]=""),this.addBindings(),t.onMediaReady({$rcMediaApi:this})},this.initMediaGallery=function(t,r){n.debug("initMediaGallery"),this.gallery={result:null,loading:!1,loadMore:!1,multiple:!1,order:"date"},e.isObject(t)&&e.extend(this.gallery,t),e.isString(r)&&r.length>0?(this.search=r,this.searchSources()):this.getSources(this.sourcesQuery)},this.initMediaSearch=function(t){n.debug("initMediaSearch"),e.isString(t)&&t.length>0&&(this.search=t,this.searchSources())},this.initMediaUpload=function(t){n.debug("initMediaUpload"),e.isObject(t)&&e.extend(this.upload,t),this.setUploadState(c.SELECT_FILES)},this.getSourceTitle=function(e){for(var t=this.sourceTitle.split("."),r=e,a=0;a<t.length-1;a++){var l=t[a];r[l]||(r[l]={}),r=r[l]}var i=r[t[t.length-1]];return i?i.split("_").join(" "):""},this.setUploadState=function(e){return e&&e!==this.upload.currentState&&(t.onUploadUpdateState({$state:e}),this.upload.currentState=e),this.upload.currentState},this.uploadSelectFiles=function(t){if(t.length>0){n.debug("Upload selectFiles"),n.debug(t);try{l.get("Upload").imageDimensions(t[0]).then(function(t){if(!1===d.upload.multiple&&!0===d.upload.crop){if(e.isDefined(d.uploadElement)&&e.isDefined(d.upload.cropArea.auto)&&!0===d.upload.cropArea.auto){var r=d.uploadElement[0].clientWidth,a=d.uploadElement[0].clientHeight;d.upload.cropArea.cropHeight||(d.upload.cropArea.cropHeight=d.upload.minHeight),d.upload.cropArea.cropWidth||(d.upload.cropArea.cropWidth=d.upload.minWidth),d.upload.cropArea.width=r,d.upload.cropArea.height=a;var l,i=t.height/a,o=t.width/r;l=i>=o?i:o,d.upload.cropArea.minWidth=parseInt(d.upload.cropArea.cropWidth/l),d.upload.cropArea.minHeight=parseInt(d.upload.cropArea.cropHeight/l)}n.debug("change state to Crop"),d.setUploadState(c.CROP_IMAGE)}else d.uploadFile()},function(e){d.uploadFile()})}catch(e){n.error(e)}}},this.uploadFile=function(){n.debug("upload"),this.upload.deferred=r.defer(),this.upload.loading=!0,this.upload.progress=0,this.setUploadState(c.PROGRESS_FILES);try{var a=l.get("Upload");e.isUndefined(this.upload.file.destDataUrl)||!this.upload.file.destDataUrl?this.upload.file.destDataUrl=this.upload.file.source.$ngfBlobUrl:this.upload.file.source=a.dataUrltoBlob(this.upload.file.destDataUrl,this.upload.file.source.name),this.upload.uploadFile=a.upload({url:s.getRestUrl(),data:{file:this.upload.file.source}}),this.upload.uploadFile.then(function(e){d.resetUploadFile(),d.addSource(e.data),t.onUploadFile({$file:d.upload.file}),d.setUploadState(c.SELECT_FILES),d.upload.result=null,d.upload.loading=!1,d.upload.deferred.resolve(e)},function(e){n.debug("error status: "+e),d.resetUploadFile(),d.setUploadState(c.SELECT_FILES),d.upload.result=e.data,d.upload.loading=!1,d.upload.deferred.reject(e)},function(e){n.debug("Progress status: "+e);var t=parseInt(100*e.loaded/e.total);d.upload.progress=t,d.upload.deferred.notify(t)})}catch(e){n.error(e),d.setUploadState(c.SELECT_FILES),d.upload.deferred.reject()}return this.upload.deferred.promise},this.cancelUploadFile=function(){this.upload.uploadFile.abort()},this.resetUploadFile=function(){return this.upload.file={source:null,destDataUrl:""},this.setUploadState(c.SELECT_FILES),t.onResetUploadFile({$file:this.upload.file}),this.upload.file},this.selectSource=function(r){if(n.debug("selectSource"),-1===d.sourcesSelected.indexOf(r))this.gallery.multiple?(r.activeClass=!0,this.sourcesSelected.push(r)):(e.forEach(d.sources,function(e,t){d.sources[t].activeClass=!1}),r.activeClass=!0,this.sourcesSelected=[],this.sourcesSelected.push(r)),t.onSelectSource({$source:r});else{var a=d.sources.indexOf(r);e.forEach(d.sourcesSelected,function(e,t){e===r&&(-1!==a&&(d.sources[a].activeClass=!1),d.sourcesSelected.splice(t,1))})}},this.deselectSources=function(){e.forEach(d.sources,function(e,t){d.sources[t].activeClass=!1}),d.sourcesSelected=[]},this.getSources=function(t){n.debug("getGallerySources"),this.gallery.loading=!0;var r=s.get(t,!0);return r.then(function(t){t.length>0&&e.forEach(t,function(e,t){d.addSource(e)}),d.gallery.loadMore=d.sources.length>0,d.gallery.loading=!1,d.gallery.result=null},function(e){d.sources=[],d.gallery.loadMore=d.sources.length>0,d.gallery.loading=!1,d.gallery.result=e.data}),r},this.deleteSources=function(){n.debug("deleteSources");var a=[];e.forEach(this.sourcesSelected,function(e,r){a.push(s.delete(e[d.sourceId],d.deleteQuery).then(function(r){d.removeSource(e),t.onDeleteSources({$source:e})},function(r){404===r.status&&(d.removeSource(e),t.onDeleteSources({$source:e}))}))}),this.gallery.loading=!0;var l=r.all(a);return l.then(function(e){d.gallery.loading=!1},function(e){d.gallery.loading=!1}),l},this.removeSource=function(e){var t=d.sources.map(function(e){return e[d.sourceId]}).indexOf(e[d.sourceId]);-1!==t&&d.sources.splice(t,1),-1!==(t=d.sourcesSelected.map(function(e){return e[d.sourceId]}).indexOf(e[d.sourceId]))&&d.sourcesSelected.splice(t,1)},this.addSource=function(t){t.tooltipTitle=d.getSourceTitle(t),d.sources.push(e.copy(t))},this.saveSources=function(){if(n.debug("saveSources"),this.sourcesSelected.length>0){var r=[];switch(!1===this.returnModelPush&&(t.modelPreview=[]),e.forEach(d.sourcesSelected,function(e){d.returnModelKey?r.push(e[d.returnModelKey]):r.push(e),t.modelPreview.push(e)}),this.returnModelType){case"string":if(!0===this.returnModelPush){var a=t.model;a.length>0&&(a+=","),r=a+r.toString()}t.model=r.toString();break;case"array":!0===this.returnModelPush&&(r=t.model.concat(r)),t.model=r}t.onSaveSources({$model:t.model})}},this.loadMoreSources=function(){n.debug("loadMore"),this.sourcesQuery[this.sourcesOffsetKey]=this.sources.length,this.gallery.loading=!0;var r=s.get(this.sourcesQuery);return r.then(function(r){r.length>0?e.forEach(r,function(e,t){d.addSource(e)}):d.gallery.loadMore=!1,d.gallery.result=null,d.gallery.loading=!1,t.onLoadMoreSources()},function(e){d.gallery.result=e.data,d.gallery.loading=!1}),r},this.searchSources=function(){n.debug("searchSources"),this.sourcesQuery[this.sourcesSearchKey]=this.search,this.sourcesQuery[this.sourcesOffsetKey]=0,this.gallery.loading=!0;var r=s.get(this.sourcesQuery,!0);return r.then(function(r){r.length>0?(d.sources=[],e.forEach(r,function(e,t){d.addSource(e)})):d.sources=[],d.gallery.loadMore=d.sources.length>0,d.gallery.result=null,d.gallery.loading=!1,t.onSearchSources({$search:d.search})},function(e){d.sources=[],d.gallery.loadMore=!1,d.gallery.result=e.data,d.gallery.loading=!1}),r},this.bindResize=function(){o(function(){a.dispatchEvent(new Event("resize"))},50)},this.addBindings=function(){n.debug("addBindings")},this.init()}])}(angular),function(e){"use strict";var t=e.module("rcMedia");t.config(["$resourceProvider",function(e){e.defaults.cancellable=!0}]),t.provider("rcMedia",[function(){this.rest={url:"",path:"/wp-json/wp/v2/media"},this.locale=null,this.defaultText={"en-us":{TITLE_GALLERY:"Gallery",TITLE_UPLOAD:"Upload files",TITLE_DRAG_FILE:"Drag files to upload",SUB_TITLE_DRAG_FILE:"or",BTN_CANCEL:"Cancel",BTN_SAVE:"Save",BTN_DELETE_FILE:"Delete file",BTN_DELETE_FILES:"Delete files",BTN_DESELECT_ALL:"Deselect all",BTN_SELECT_FILE:"Select file",BTN_SELECT_FILES:"Select files",BTN_SHOW_MORE:"Show More",BTN_BACK_GALLERY:"Back to gallery",BTN_UPLOAD_FILE:"Upload file",BTN_UPLOAD_FILES:"Upload files",BTN_BROWSE_FILE:"Browse a file",UPLOAD_INVALID_FILE:"Your file is not valid.",UPLOAD_INVALID_minWidth:"Minimum width",UPLOAD_INVALID_minHeight:"Minimum height",UPLOAD_INVALID_pattern:"File type error"},"fr-FR":{TITLE_GALLERY:"Gallerie",TITLE_UPLOAD:"Télécharger un fichier",TITLE_DRAG_FILE:"Glisser le fichier ici",SUB_TITLE_DRAG_FILE:"ou",BTN_CANCEL:"Annuler",BTN_SAVE:"Sauver",BTN_DELETE_FILE:"Supprimer le fichier",BTN_DELETE_FILES:"Supprimer les fichiers",BTN_DESELECT_ALL:"Déselectioner tous",BTN_SELECT_FILE:"Selectioner le fichier",BTN_SELECT_FILES:"Selectioner les fichiers",BTN_SHOW_MORE:"Voir plus",BTN_BACK_GALLERY:"Revenir à la gallerie",BTN_UPLOAD_FILE:"Télécharger le fichier",BTN_UPLOAD_FILES:"Télécharger les fichiers",BTN_BROWSE_FILE:"Choisir un fichier",UPLOAD_INVALID_FILE:"Votre fichier n'est pas valide.",UPLOAD_INVALID_minWidth:"Largeur minimum",UPLOAD_INVALID_minHeight:"Hauteur minimum",UPLOAD_INVALID_pattern:"Type de fichier erroné"}},this.interfaceText=e.copy(this.defaultText),this.$get=["$http","$locale",function(e,t){var r,a=this.rest;return e.defaults.useXDomain=!0,e.defaults.headers.common["Access-Control-Allow-Origin"]="*",e.defaults.headers.common["If-Modified-Since"]="0",e.defaults.headers.common["cache-control"]="private, max-age=0, no-cache",r=this.locale?this.interfaceText[this.locale]:this.interfaceText[t.id],r||(r=this.defaultText["en-us"]),{getRest:function(){return a},getLocalizedText:function(e){if(e){var t=r[e];return t||""}return r}}}],this.setLocalizedText=function(t,r){if(!t)throw new Error("localeId must be a string formatted as languageId-countryId");this.interfaceText[t]||(this.interfaceText[t]={}),this.interfaceText[t]=e.extend(this.interfaceText[t],r)},this.useLocale=function(e){this.locale=e},this.setRest=function(e){this.rest=e}}]),t.factory("rcMediaResource",["$resource","rcMedia",function(e,t){return{Media:e(t.getRest().url+t.getRest().path+"/:mediaId",{mediaId:"@media_id"},{get:{method:"GET",isArray:!1,cache:!1}},{query:{method:"GET",params:{},isArray:!0,cache:!1,cancellable:!0}})}}]),t.factory("rcMediaService",["$log","$q","rcMedia","rcMediaResource",function(t,r,a,l){return{getRestUrl:function(){return a.getRest().url+a.getRest().path},get:function(t,r){return!0===r&&void 0!==this.request&&e.isFunction(this.request.$cancelRequest)&&this.request.$cancelRequest(),e.isNumber(t)?(t={mediaId:t},this.request=l.Media.get(t)):(e.isObject(t)||(t={}),this.request=l.Media.query(t)),this.request.$promise},delete:function(t,r){return e.isUndefined(r)&&(r={}),e.extend(r,{mediaId:t}),l.Media.delete(r).$promise}}}])}(angular),angular.module("rcMedia").run(["$templateCache",function(e){e.put("rc-media-dialog-zf.tpl.html",'<div class="rc-media" rc-media\n     rcm-source-url="{{rcDialogApi.data.sourceUrl}}"\n     rcm-source-url-key="{{rcDialogApi.data.sourceUrlKey}}"\n     rcm-source-id="{{rcDialogApi.data.sourceId}}"\n     rcm-source-title="{{rcDialogApi.data.sourceTitle}}"\n     data-ng-model="rcDialogApi.data.sources"\n     data-ng-model-preview="rcDialogApi.data.sourcesPreview"\n     rcm-return-model-type="{{rcDialogApi.data.returnModelType}}"\n     rcm-return-model-key="{{rcDialogApi.data.returnModelKey}}"\n     rcm-return-model-push="rcDialogApi.data.returnModelPush"\n     rcm-delete-query="{{rcDialogApi.data.deleteQuery}}"\n     rcm-sources-query="{{rcDialogApi.data.sourcesQuery}}"\n     rcm-sources-offset-key="{{rcDialogApi.data.sourcesOffsetKey}}"\n     rcm-sources-limit-key="{{rcDialogApi.data.sourcesLimitKey}}"\n     rcm-sources-search-key="{{rcDialogApi.data.sourcesSearchKey}}"\n>\n<div class="dialog-header">\n    <div class="gallery-view" data-ng-show="!selectedView">\n        <h3 class="float-left dialog-title"><rcm-translate>TITLE_GALLERY</rcm-translate></h3>\n        <button class="button secondary hollow float-right dialog-close" type="button" data-ng-click="rcDialogApi.closeDialog()" aria-label="Close reveal" >\n            <span aria-hidden="true">&times;</span>\n        </button>\n        <button class="button primary hollow float-right upload" type="button" data-ng-show="!selectedView" data-ng-click="selectedView=\'fileUpload\'" >\n            <svg width="25" height="25" version="1.1" id="rcm_upload_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                   x="0px" y="0px" viewBox="0 0 23 20.5" style="enable-background:new 0 0 23 20.5;" xml:space="preserve"\n              >\n                <g id="rcm_upload_svg_arrow">\n                  <line id="rcm_upload_svg_line" class="st0" x1="11.5" y1="20.5" x2="11.5" y2="7.5"/>\n                  <polyline id="rcm_upload_svg_point" class="st1" points="8.5,10.5 11.5,7.5 14.5,10.5 \t"/>\n                </g>\n                <path\n                  id="rcm_upload_svg_cloud"\n                  class="st1"\n                  d="M15.5,15.5h3c2.2,0,4-1.8,4-4c0-2.2-1.8-4-4-4c-0.3-3.9-3.5-7-7.5-7c-4,0-7.3,3.2-7.5,7.1c-1.7,0.4-3,2-3,3.9c0,2.2,1.8,4,4,4h3"\n                />\n            </svg>\n            <rcm-translate>BTN_UPLOAD_FILE</rcm-translate>\n        </button>\n    </div>\n\n    <div class="upload-view" data-ng-show="selectedView==\'fileUpload\'">\n        <h3 class="float-left dialog-title" ><rcm-translate>TITLE_UPLOAD</rcm-translate></h3>\n        <button class="button secondary hollow float-right dialog-close" type="button" data-ng-click="rcDialogApi.closeDialog()" aria-label="Close reveal" >\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>\n</div>\n<div class="dialog-body">\n\n    \x3c!-- Directive rc-media-upload --\x3e\n    <div class="upload-view" data-ng-if="selectedView==\'fileUpload\'"\n         rcm-upload\n         rcm-template-url="rc-media-upload-zf.tpl.html"\n         rcm-multiple="rcDialogApi.data.upload.multiple"\n         rcm-accept="\'{{rcDialogApi.data.upload.accept}}\'"\n         rcm-pattern="\'{{rcDialogApi.data.upload.pattern}}\'"\n         rcm-min-width="rcDialogApi.data.upload.minWidth"\n         rcm-min-height="rcDialogApi.data.upload.minHeight"\n         rcm-fix-orientation="rcDialogApi.data.upload.fixOrientation"\n         rcm-crop="rcDialogApi.data.upload.crop"\n         rcm-crop-area="rcDialogApi.data.upload.cropArea"\n         rcm-load-icon="{{rcDialogApi.data.upload.loadIcon}}"\n    ></div>\n\n    <div class="gallery-view" data-ng-show="!selectedView">\n        \x3c!-- Directive rc-media-gallery --\x3e\n        <div rcm-gallery\n             rcm-template-url="rc-media-gallery-zf.tpl.html"\n             rcm-order="{{rcDialogApi.data.gallery.order}}"\n             rcm-multiple="rcDialogApi.data.gallery.multiple"\n             rcm-selected-sources="rcDialogApi.data.gallery.selectedSources"\n             rcm-search-value="{{rcDialogApi.data.gallery.searchValue}}"\n             rcm-load-icon="{{rcDialogApi.data.gallery.loadIcon}}"\n        ></div>\n    </div>\n</div>\n<div class="dialog-footer" data-ng-show="selectedView || rcDialogApi.data.gallery.selectedSources.length">\n    <div class="upload-view" data-ng-if="selectedView==\'fileUpload\'" rcm-upload-controls\n         rcm-template-url="rc-media-upload-controls-zf.tpl.html"\n         data-ng-model="rcDialogApi.data.uploadFile"\n         rcm-save-click="selectedView=false"\n         rcm-cancel-click="selectedView=false"\n    ></div>\n\n    <div class="gallery-view" data-ng-if="!selectedView" rcm-gallery-controls\n         rcm-template-url="rc-media-gallery-controls-zf.tpl.html"\n         rcm-save-click="rcDialogApi.confirmDialog()"\n    ></div>\n</div>\n</div>'),e.put("rc-media-gallery-controls-zf.tpl.html",'<button class="button alert hollow float-left delete-file" data-ng-click="deleteSources()" data-ng-disabled="loading"><rcm-translate>BTN_DELETE_FILE</rcm-translate></button>\n<button class="button secondary hollow float-left deselect-all" data-ng-click="deselectSources()" data-ng-disabled="loading"><rcm-translate>BTN_DESELECT_ALL</rcm-translate></button>\n<button class="button primary float-right select-file" data-ng-click="saveSources()" data-ng-disabled="loading"><rcm-translate>BTN_SELECT_FILE</rcm-translate></button>'),e.put("rc-media-gallery-zf.tpl.html",'<div class="rcm-gallery" >\n\n    <alert class="message" data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>\n\n    <div data-ng-hide="!loading" class="loading-overlay">\n        <webicon  class="loading-icon" icon="{{loadIcon}}"></webicon>\n    </div>\n\n    <div class="gallery-overlay" scrollbar="{autoUpdate: true}">\n\n        <div data-ng-repeat="source in sources | orderBy:order:true"\n             class="thumbnail-block"\n             data-ng-class="{\'selected\': source.activeClass}"\n             data-ng-click="selectSource(source)">\n            <div class="thumbnail"\n                 data-ng-style="{\'background-image\':\'url({{rcMediaApi.sourceUrl + source[rcMediaApi.sourceUrlKey]}})\', \'background-repeat\': \'no-repeat\', \'background-position\': \'center center\', \'background-size\': \'contain\'}"\n                 tooltip-placement="bottom"\n                 tooltip-html-unsafe="{{source.tooltipTitle}}"\n            ></div>\n        </div>\n\n        <button type="button" class="button secondary float-center load-more" data-ng-show="loadMore" data-ng-click="loadMoreSources()" data-ng-disabled="loading">\n            <i class="fa fa-plus"></i>\n            <rcm-translate>BTN_SHOW_MORE</rcm-translate>\n        </button>\n\n    </div>\n</div>'),e.put("rc-media-upload-controls-zf.tpl.html",'<div data-ng-show="rcMediaApi.upload.currentState==\'selectFiles\'">\n    <button class="button secondary hollow float-left" data-ng-click="resetUploadFile(true)"><rcm-translate>BTN_BACK_GALLERY</rcm-translate></button>\n</div>\n\n<div data-ng-show="rcMediaApi.upload.currentState==\'cropImage\'">\n    <button class="button primary float-right" data-ng-click="uploadFile()"><rcm-translate>BTN_SAVE</rcm-translate></button>\n    <button class="button hollow secondary float-right" data-ng-click="resetUploadFile()"><rcm-translate>BTN_CANCEL</rcm-translate></button>\n</div>\n\n<div data-ng-show="rcMediaApi.upload.currentState==\'progressFiles\'">\n    <button class="button secondary float-right" data-ng-click="cancelUploadFile()"><rcm-translate>BTN_CANCEL</rcm-translate></button>\n</div>\n'),e.put("rc-media-upload-zf.tpl.html",'<div class="rcm-upload">\n\n  <alert class="message" data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>\n\n  <div data-ng-show="currentState==\'selectFiles\'" class="rcm-dropzone"\n       ngf-drop\n       data-ng-model="file.source"\n       ngf-change="changeFiles($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-drag-over-class="dragover"\n       ngf-multiple="multiple"\n       ngf-accept="{{accept}}"\n       ngf-pattern="{{pattern}}"\n       ngf-min-width="minWidth"\n       ngf-min-height="minHeight"\n       ngf-fix-orientation="fixOrientation"\n  >\n\n    <div class="select-file" >\n      <svg width="150" height="150" version="1.1" id="rcm_upload_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n           x="0px" y="0px" viewBox="0 0 23 20.5" style="enable-background:new 0 0 23 20.5;" xml:space="preserve"\n      >\n        <g id="rcm_upload_svg_arrow">\n\t      <line id="rcm_upload_svg_line" class="st0" x1="11.5" y1="20.5" x2="11.5" y2="7.5"/>\n\t      <polyline id="rcm_upload_svg_point" class="st1" points="8.5,10.5 11.5,7.5 14.5,10.5 \t"/>\n        </g>\n        <path\n          id="rcm_upload_svg_cloud"\n          class="st1"\n          d="M15.5,15.5h3c2.2,0,4-1.8,4-4c0-2.2-1.8-4-4-4c-0.3-3.9-3.5-7-7.5-7c-4,0-7.3,3.2-7.5,7.1c-1.7,0.4-3,2-3,3.9c0,2.2,1.8,4,4,4h3"\n        />\n      </svg>\n\n      <h3><rcm-translate>TITLE_DRAG_FILE</rcm-translate></h3>\n      <p class="lead"><rcm-translate>SUB_TITLE_DRAG_FILE</rcm-translate></p>\n\n      <button ngf-select\n              data-ng-model="file.source"\n              ngf-change="changeFiles($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n              ngf-multiple="multiple"\n              ngf-accept="{{accept}}"\n              ngf-pattern="{{pattern}}"\n              ngf-min-width="minWidth"\n              ngf-min-height="minHeight"\n              type="button"\n              class="button primary large"\n      >\n        <rcm-translate>BTN_BROWSE_FILE</rcm-translate>\n      </button>\n    </div>\n  </div>\n\n  <div class="crop-area" data-ng-if="currentState==\'cropImage\'">\n    <div>\n      <canvas\n              height="{{cropArea.height}}px"\n              width="{{cropArea.width}}px"\n              min-width="cropArea.minWidth"\n              min-height="cropArea.minHeight"\n              id="canvas"\n              img-cropper\n              img-src="{imageData: (file.source | ngfDataUrl), fileType: file.source.type}"\n              img-dst="file.destDataUrl"\n              crop-width="cropArea.cropWidth"\n              crop-height="cropArea.cropHeight"\n              keep-aspect="cropArea.keepAspect"\n              enforce-crop-aspect="cropArea.enforceCropAspect"\n              touch-radius="cropArea.touchRadius"\n              color="{{cropArea.color}}"\n              color-drag="{{cropArea.colorDrag}}"\n              color-bg="{{cropArea.colorBg}}"\n              color-crop-bg="{{cropArea.colorCropBg}}"\n      >\n      </canvas>\n    </div>\n  </div>\n\n  <div data-ng-show="currentState==\'progressFiles\'" class="preview-file" >\n\n    <div class="loading-overlay">\n      <webicon  class="loading-icon" icon="{{loadIcon}}"></webicon>\n    </div>\n\n    <img class="float-center" width="200" height="200" data-ng-src="{{file.destDataUrl}}" alt="">\n  </div>\n</div>'),e.put("rc-media-search-zf.tpl.html",'<div class="rcm-search input-group">\n  <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>\n  <input type="text" class="form-control" data-ng-model="search" placeholder="Search ...">\n</div>')}]);