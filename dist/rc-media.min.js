!function(e){"use strict";e.module("rcMedia",["ngResource"])}(angular),function(e){"use strict";e.module("rcMedia").constant("RCMEDIA_UPLOAD_STATES",{SELECT_FILES:"selectFiles",CROP_IMAGE:"cropImage",PROGRESS_FILES:"progressFiles"})}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmGalleryControls",["$log","$parse","$compile",function(r,t,i){return{restrict:"EA",require:"^rcMedia",scope:{deleteClick:"@?rcmDeleteClick",saveClick:"@?rcmSaveClick"},templateUrl:function(e,r){return r.rcmTemplateUrl||"rc-media-gallery-controls.tpl.html"},link:function(r,i,a,l){r.loading=!1,r.deleteSources=function(){r.loading=!0,l.deleteSources().then(function(e){r.loading=!1},function(e){r.loading=!1}),r.$parent.$parent.$applyAsync(t(r.deleteClick))},r.deselectSources=function(){l.deselectSources()},r.saveSources=function(){l.saveSources(),r.$parent.$parent.$applyAsync(t(r.saveClick))},l.galleryControlsElement=e.element(i),r.rcMediaApi=l}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmGallery",["$parse","$compile","$window","$timeout","$log",function(r,t,i,a,l){return{restrict:"EA",require:"^rcMedia",scope:{sources:"=?ngModel",seletedSources:"=?rcmSelectedSources",order:"@?rcmOrder",multiple:"=?rcmMultiple",search:"@?rcmSearchValue",loadIcon:"@?rcmLoadIcon",uploadClick:"@?rcmUploadClick"},templateUrl:function(e,r){return r.rcmTemplateUrl||"rc-media-gallery.tpl.html"},link:function(r,t,i,a){r.alerts=[],r.loading=!1,r.loadMore=!1,r.sources=e.isDefined(r.sources)?r.sources:[],r.seletedSources=e.isDefined(r.seletedSources)?r.seletedSources:[],r.order=e.isDefined(r.order)?r.order:"date",r.multiple=!!e.isDefined(r.multiple)&&r.multiple,r.search=e.isDefined(r.search)?r.search:"",r.onChangeGalleryLoading=function(t,i){!1===t?(r.loadMore=a.gallery.loadMore,e.isObject(a.gallery.result)&&e.isDefined(a.gallery.result.message)&&r.alerts.push({type:"alert",msg:a.gallery.result.message})):r.alerts=[],r.loading=t},r.onChangeSources=function(e,t){l.debug("onChangeSources"),e!==t&&(l.debug("onChangeSources"),r.sources=e)},r.onChangeSourcesSelected=function(e,t){e!==t&&(l.debug("onChangeSourcesSelected"),r.seletedSources=e)},r.selectSource=function(e,t){a.selectSource(e,t),r.seletedSources=a.sourcesSelected},r.loadMoreSources=function(){a.loadMoreSources().then(function(e){r.loadMore=e.length>0},function(e){})},r.closeAlert=function(e){r.alerts.splice(e,1)},a.galleryElement=e.element(t),a.initMediaGallery({loading:r.loading,order:r.order,multiple:r.multiple,loadMore:r.loadMore},r.search),r.rcMediaApi=a,r.$watchCollection("rcMediaApi.sources",r.onChangeSources),r.$watchCollection("rcMediaApi.sourcesSelected",r.onChangeSourcesSelected),r.$watch("rcMediaApi.gallery.loading",r.onChangeGalleryLoading)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmSearch",["$log",function(r){return{restrict:"EA",require:"^rcMedia",scope:{search:"=?ngModel",value:"@?rcmValue"},templateUrl:function(e,r){return r.rcmTemplateUrl||"rc-media-search.tpl.html"},link:function(t,i,a,l){t.search=e.isDefined(t.value)?t.value:t.search,t.value=e.isDefined(t.value)?t.value:"",t.onSearch=function(e,t){e!==t&&(r.debug("onSearch"),l.search=e,l.searchSources())},l.searchElement=e.element(i),l.initMediaSearch(t.search),t.rcMediaApi=l,t.$watch("search",t.onSearch)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmSelect",["$log",function(r){return{restrict:"EA",transclude:!0,scope:{theme:"@?rcmTheme",name:"@?rcmName",type:"@?rcmType",id:"@?rcmId",class:"@?rcmClass",onetime:"=?rcmOnetime",single:"=?rcmSingle",media:"=?rcmMedia",config:"&?rcmConfig",initSources:"&?rcmInitSources"},templateUrl:function(e,r){return r.rcmTemplateUrl||"rc-media-select.tpl.html"},controller:"rcMediaSelectCtrl",link:function(r,t,i){r.theme=e.isDefined(i.rcmSelect)?i.rcmSelect:r.theme}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmTranslate",["$log","rcMedia",function(e,r){return{restrict:"EA",require:"^rcMedia",link:function(e,t,i,a){var l=t.html();if(l.length>0){var n=r.getLocalizedText(l);t.html(t.html().replace(l,n))}}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmUploadControls",["$log","$parse","$compile",function(r,t,i){return{restrict:"EA",require:"^rcMedia",scope:{file:"=?ngModel",saveClick:"@?rcmSaveClick",cancelClick:"@?rcmCancelClick"},templateUrl:function(e,r){return r.rcmTemplateUrl||"rc-media-upload-controls.tpl.html"},link:function(i,a,l,n){i.file=e.isDefined(i.file)?i.file:null,i.uploadFile=function(){return i.file=n.upload.file,n.uploadFile().then(function(e){r.debug("Upload success"),r.debug(e),i.$parent.$parent.$applyAsync(t(i.saveClick))},function(e){r.debug("Upload error"),r.debug(e)},function(e){r.debug(e)})},i.cancelUploadFile=function(){n.cancelUploadFile()},i.resetUploadFile=function(e){i.file=null,n.resetUploadFile(),!0===e&&i.$parent.$parent.$applyAsync(t(i.cancelClick))},n.uploadControlsElement=e.element(a),i.rcMediaApi=n}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcmUpload",["rcMedia","$log","$parse",function(r,t,i){return{restrict:"EA",require:"^rcMedia",scope:{file:"=?ngModel",multiple:"=?rcmMultiple",accept:"@?rcmAccept",pattern:"@?rcmPattern",fileName:"@?rcmFileName",fields:"@rcmFields",minWidth:"=?rcmMinWidth",minHeight:"=?rcmMinHeight",fixOrientation:"=?rcmFixOrientation",crop:"=?rcmCrop",cropArea:"=?rcmCropArea",loadIcon:"@?rcmLoadIcon",change:"@?rcmChange"},templateUrl:function(e,r){return r.rcmTemplateUrl||"rc-media-upload.tpl.html"},link:function(a,l,n,o){function c(e,r){a.alerts.push({type:e,msg:r})}a.alerts=[],a.loading=!1,a.progress=0,a.currentState="",a.file=e.isDefined(a.file)?a.file:o.resetUploadFile(),a.multiple=!!e.isDefined(a.multiple)&&a.multiple,a.accept=e.isDefined(a.accept)?a.accept:"*/*",a.pattern=e.isDefined(a.pattern)?a.pattern:"*/*",a.fileName=e.isDefined(a.fileName)?a.fileName:"",a.fields=e.isDefined(a.fields)?a.$eval(a.fields):{},a.minWidth=e.isDefined(a.minWidth)?a.minWidth:0,a.minHeight=e.isDefined(a.minHeight)?a.minHeight:0,a.fixOrientation=!!e.isDefined(a.fixOrientation)&&a.fixOrientation,a.crop=!e.isDefined(a.crop)||a.crop;var s={auto:!0,width:a.minWidth,height:a.minHeight,minWidth:a.minWidth,minHeight:a.minHeight,cropWidth:0,cropHeight:0,keepAspect:!0,keepAspectRatio:!1,enforceCropAspect:!1,touchRadius:10,color:"rgba(118, 118, 118, 0.8)",colorDrag:"rgba(118, 118, 118, 0.8)",colorBg:"rgba(200, 200, 200, 0.8)",colorCropBg:"rgba(118, 118, 118, 0.8)"};a.cropArea=e.isObject(a.cropArea)?e.extend(s,a.cropArea):s,a.onChangeUploadLoading=function(e,r){a.loading=e},a.onChangeUploadResult=function(r,i){t.debug("onChangeUploadResult"),t.debug(r),t.debug(i),r!==i&&(e.isObject(o.upload.result)&&e.isDefined(o.upload.result.message)?c("alert",o.upload.result.message):a.alerts=[])},a.onChangeUploadFile=function(e,r){e!==r&&(t.debug("onChangeUploadFile"),a.file=e)},a.onChangeUploadMultiple=function(e,r){e!==r&&(t.debug("onChangeUploadMultiple"),a.multiple=e)},a.onChangeUploadCrop=function(e,r){e!==r&&(t.debug("onChangeUploadCrop"),a.crop=e)},a.onChangeUploadProgress=function(e,r){e!==r&&(t.debug("onChangeUploadProgress"),a.progress=e)},a.onChangeUploadCurrentState=function(r,i){t.debug("onChangeUploadCurrentState"),e.extend(a.cropArea,o.upload.cropArea),a.currentState=r},a.uploadSelectFiles=function(r){a.alerts=[];var l=o.uploadSelectFiles(r);e.isObject(l)&&e.isFunction(l.then)&&l.then(function(e){a.$parent.$parent.$applyAsync(i(a.change))},function(e){t.debug("Upload error"),t.debug(e)},function(e){t.debug(e)})},a.changeFiles=function(t,i,l,n,s,d){if(s.length>0){var u=r.getLocalizedText("UPLOAD_INVALID_FILE");e.forEach(s,function(t,i){i>0&&(u+="\r\n");var a=0;e.forEach(t.$errorMessages,function(e,t){if(u+=a>0?", ":" ",!0===e)switch(u+=r.getLocalizedText("UPLOAD_INVALID_"+t),t){case"minHeight":u+=" "+o.upload.minHeight+"px";break;case"minWidth":u+=" "+o.upload.minWidth+"px"}a++})}),c("alert",u)}else t.length>0&&a.uploadSelectFiles(t)},a.closeAlert=function(e){a.alerts.splice(e,1)},o.uploadElement=e.element(l),o.initMediaUpload({multiple:a.multiple,accept:a.accept,pattern:a.pattern,fileName:a.fileName,fields:a.fields,minWidth:a.minWidth,minHeight:a.minHeight,crop:a.crop,cropArea:a.cropArea,file:a.file}),a.rcMediaApi=o,a.$watch("rcMediaApi.upload.file",a.onChangeUploadFile),a.$watch("rcMediaApi.upload.multiple",a.onChangeUploadMultiple),a.$watch("rcMediaApi.upload.crop",a.onChangeUploadCrop),a.$watch("rcMediaApi.upload.progress",a.onChangeUploadProgress),a.$watch("rcMediaApi.upload.loading",a.onChangeUploadLoading),a.$watch("rcMediaApi.upload.result",a.onChangeUploadResult),a.$watch("rcMediaApi.upload.currentState",a.onChangeUploadCurrentState)}}}])}(angular),function(e){"use strict";e.module("rcMedia").directive("rcMedia",[function(){return{restrict:"EA",require:["?ngModel"],scope:{model:"=ngModel",modelSources:"=ngModelSources",sourceUrl:"@rcmSourceUrl",returnModelType:"@rcmReturnModelType",returnModelKey:"@rcmReturnModelKey",returnModelPush:"=?rcmReturnModelPush",sourceId:"@rcmSourceId",sourceUrlKey:"@rcmSourceUrlKey",sourceTitle:"@rcmSourceTitle",sourcesOffsetKey:"@rcmSourcesOffsetKey",sourcesLimitKey:"@rcmSourcesLimitKey",sourcesSearchKey:"@rcmSourcesSearchKey",deleteQuery:"@rcmDeleteQuery",sourcesQuery:"@rcmSourcesQuery",onMediaReady:"&rcmOnMediaReady",onUploadUpdateState:"&rcmOnUploadUpdateState",onUploadFile:"&rcmOnUploadFile",onResetUploadFile:"&rcmOnResetUploadFile",onSaveSources:"&rcmOnSaveSources",onDeleteSources:"&rcmOnDeleteSources",onSelectSource:"&rcmOnSelectSource",onSearchSources:"&rcmOnSearchSources",onLoadMoreSources:"&rcmOnLoadMoreSources"},controller:"rcMediaCtrl",controllerAs:"rcMediaApi",link:{post:function(r,t,i,a){r.rcMediaApi.rcMediaElement=e.element(t)}}}}])}(angular),function(e){"use strict";e.module("rcMedia").controller("rcMediaCtrl",["$scope","$q","$window","$injector","$filter","$log","$timeout","RCMEDIA_UPLOAD_STATES","rcMedia","rcMediaService",function(r,t,i,a,l,n,o,c,s,d){var u,p=this;this.rcMediaElement=null,this.init=function(){n.debug("rcMedia Init"),this.upload={multiple:!1,accept:"*/*",pattern:"*/*",fileName:"",fields:{},minWidth:0,minHeight:0,fixOrientation:!1,crop:!0,cropArea:{auto:!0},file:{},loading:!1,result:null,progress:0,currentState:"",deferred:null,uploadFile:null},this.search="",this.sourceUrl=e.isDefined(r.sourceUrl)?r.sourceUrl:"",this.sourceId=e.isDefined(r.sourceId)?r.sourceId:"id",this.sourceUrlKey=e.isDefined(r.sourceUrlKey)?r.sourceUrlKey:"source_url",this.sourceTitle=e.isDefined(r.sourceTitle)?r.sourceTitle:"title.rendered",this.returnModelType=e.isDefined(r.returnModelType)?r.returnModelType:"string",this.returnModelKey=e.isDefined(r.returnModelKey)?r.returnModelKey:this.sourceId,this.returnModelPush=!!e.isDefined(r.returnModelPush)&&r.returnModelPush,this.altKey=e.isDefined(r.altKey)?r.altKey:"alt_text",this.accept=e.isDefined(r.accept)?r.accept:"image/*",this.sourcesLimitKey=e.isDefined(r.sourcesLimitKey)?r.sourcesLimitKey:"limit",this.sourcesOffsetKey=e.isDefined(r.sourcesOffsetKey)?r.sourcesOffsetKey:"offset",this.sourcesSearchKey=e.isDefined(r.sourcesSearchKey)?r.sourcesSearchKey:"search",this.sourcesQuery=e.isDefined(r.sourcesQuery)?r.$eval(r.sourcesQuery):{},this.deleteQuery=e.isDefined(r.deleteQuery)?r.$eval(r.deleteQuery):{},this.sources=e.isDefined(this.sources)?this.sources:[],this.sourcesSelected=[],e.isUndefined(this.sourcesQuery[this.sourcesLimitKey])&&(this.sourcesQuery[this.sourcesLimitKey]=10),e.isUndefined(this.sourcesQuery[this.sourcesOffsetKey])&&(this.sourcesQuery[this.sourcesOffsetKey]=0),e.isUndefined(this.sourcesQuery[this.sourcesSearchKey])&&(this.sourcesQuery[this.sourcesSearchKey]=""),this.addBindings(),r.onMediaReady({$rcMediaApi:this})},this.timeStamp=function(){return parseInt((new Date).getTime()/1e3)},this.initMediaGallery=function(r,t){n.debug("initMediaGallery"),this.gallery={result:null,loading:!1,loadMore:!1,multiple:!1,order:"date"},e.isObject(r)&&e.extend(this.gallery,r),e.isString(t)&&t.length>0?(this.search=t,this.searchSources()):this.getSources(this.sourcesQuery)},this.initMediaSearch=function(r){n.debug("initMediaSearch"),e.isString(r)&&r.length>0&&(this.search=r,this.searchSources())},this.initMediaUpload=function(r){n.debug("initMediaUpload"),e.isObject(r)&&e.extend(this.upload,r),this.setUploadState(c.SELECT_FILES)},this.getSourceTitle=function(e){for(var r=this.sourceTitle.split("."),t=e,i=0;i<r.length-1;i++){var a=r[i];t[a]||(t[a]={}),t=t[a]}var l=t[r[r.length-1]];return l?l.split("_").join(" "):""},this.setUploadState=function(e){return e&&e!==this.upload.currentState&&(r.onUploadUpdateState({$state:e}),this.upload.currentState=e),this.upload.currentState},this.uploadSelectFiles=function(r){if(r.length>0){if(n.debug("Upload selectFiles"),n.debug(r),!1!==p.upload.multiple||!0!==p.upload.crop)return n.debug("Upload no crop"),p.uploadFile();n.debug("Upload Crop");try{a.get("Upload").imageDimensions(r[0]).then(function(r){if(e.isDefined(p.uploadElement)&&e.isDefined(p.upload.cropArea.auto)&&!0===p.upload.cropArea.auto){var t,i=p.uploadElement[0].clientWidth,a=p.uploadElement[0].clientHeight,l=r.height/a,o=r.width/i;t=l>=o?l:o,p.upload.cropArea.cropHeight||(!0===p.upload.cropArea.keepAspect?p.upload.cropArea.cropHeight=p.upload.minHeight:p.upload.cropArea.cropHeight=r.height),p.upload.cropArea.cropWidth||(!0===p.upload.cropArea.keepAspect?p.upload.cropArea.cropWidth=p.upload.minWidth:p.upload.cropArea.cropWidth=r.width),p.upload.cropArea.width=i,p.upload.cropArea.height=a,p.upload.cropArea.minWidth=p.upload.minWidth/t,p.upload.cropArea.minHeight=p.upload.minHeight/t}n.debug("change state to Crop"),p.setUploadState(c.CROP_IMAGE)},function(e){n.debug("Upload Dimension Error"),n.debug(e)})}catch(e){n.error(e)}}return!1},this.uploadFile=function(){n.debug("upload"),this.upload.deferred=t.defer(),this.upload.loading=!0,this.upload.progress=0,this.setUploadState(c.PROGRESS_FILES);try{var i=a.get("Upload");if(e.isUndefined(this.upload.file.destDataUrl)||!this.upload.file.destDataUrl?(this.upload.file.destDataUrl=this.upload.file.source.$ngfBlobUrl,i.rename(this.upload.file.source,this.upload.file.source.name)):this.upload.file.source=i.dataUrltoBlob(this.upload.file.destDataUrl,this.upload.file.source.name),n.debug(this.upload.file.source),this.upload.fileName.length>0){var l="";e.isDefined(this.upload.file.source.$ngfName)&&(l=this.upload.file.source.$ngfName.slice(2+(this.upload.file.source.$ngfName.lastIndexOf(".")-1>>>0)),this.upload.file.source.$ngfName=this.upload.fileName+"."+l),e.isDefined(this.upload.file.source.ngfName)&&(l=this.upload.file.source.ngfName.slice(2+(this.upload.file.source.ngfName.lastIndexOf(".")-1>>>0)),this.upload.file.source.ngfName=this.upload.fileName+"."+l)}n.debug(this.upload.file.source),this.upload.uploadFile=i.upload({url:d.getRestUrl(),file:this.upload.file.source,fields:this.upload.fields}),this.upload.uploadFile.then(function(t){n.debug("Upload Success"),p.resetUploadFile();var i;if(e.isString(t.data))p.upload.result={message:s.getLocalizedText("UPLOAD_INVALID_FILE")},i=p.upload.deferred.reject(t);else{var a=p.addSource(t.data);p.selectSource(a),r.onUploadFile({$file:p.upload.file}),p.setUploadState(c.SELECT_FILES),p.upload.result=null,i=p.upload.deferred.resolve(t)}return p.upload.loading=!1,i},function(e){n.debug("error status: "+e),p.resetUploadFile(),p.setUploadState(c.SELECT_FILES),p.upload.result=e.data,p.upload.loading=!1,p.upload.deferred.reject(e)},function(e){n.debug("Progress status"),n.debug(e);var r=parseInt(100*e.loaded/e.total);p.upload.progress=r,p.upload.deferred.notify(r)})}catch(e){n.error(e),p.setUploadState(c.SELECT_FILES),p.upload.deferred.reject()}return this.upload.deferred.promise},this.cancelUploadFile=function(){this.upload.uploadFile.abort()},this.resetUploadFile=function(){return p.upload.file={source:null,destDataUrl:""},p.setUploadState(c.SELECT_FILES),r.onResetUploadFile({$file:p.upload.file}),p.upload.file},this.selectSource=function(t){if(n.debug("selectSource"),-1===p.sourcesSelected.indexOf(t))p.gallery.multiple?(t.activeClass=!0,p.sourcesSelected.push(t)):(e.forEach(p.sources,function(e,r){p.sources[r].activeClass=!1}),t.activeClass=!0,p.sourcesSelected=[],p.sourcesSelected.push(t)),r.onSelectSource({$source:t});else{var i=p.sources.indexOf(t);e.forEach(p.sourcesSelected,function(e,r){e===t&&(-1!==i&&(p.sources[i].activeClass=!1),p.sourcesSelected.splice(r,1))})}},this.deselectSources=function(){e.forEach(p.sources,function(e,r){p.sources[r].activeClass=!1}),p.sourcesSelected=[]},this.getSources=function(r){n.debug("getGallerySources"),this.gallery.loading=!0;var t=d.get(r,!0);return t.then(function(r){r.length>0&&e.forEach(r,function(e,r){p.addSource(e)}),p.gallery.loadMore=p.sources.length>0,p.gallery.loading=!1,p.gallery.result=null},function(e){p.sources=[],p.gallery.loadMore=p.sources.length>0,p.gallery.loading=!1,p.gallery.result=e.data}),t},this.deleteSources=function(){n.debug("deleteSources");var i=[];e.forEach(this.sourcesSelected,function(e,t){i.push(d.delete(e[p.sourceId],p.deleteQuery).then(function(t){p.removeSource(e),r.onDeleteSources({$source:e})},function(t){404===t.status&&(p.removeSource(e),r.onDeleteSources({$source:e}))}))}),this.gallery.loading=!0;var a=t.all(i);return a.then(function(e){p.gallery.loading=!1},function(e){p.gallery.loading=!1}),a},this.removeSource=function(t){var i=p.sourceId,a=t[p.sourceId],l=d.indexOf(p.sources,a,i);if(-1!==l&&p.sources.splice(l,1),-1!==(l=d.indexOf(p.sourcesSelected,a,i))&&p.sourcesSelected.splice(l,1),-1!==(l=d.indexOf(r.modelSources,a,i))&&r.modelSources.splice(l,1),e.isArray(r.model))-1!==(l=r.model.indexOf(a))&&r.model.splice(l,1);else if(e.isString(r.model)){var n=r.model.split(",");-1!==(l=n.indexOf(a.toString()))&&n.splice(l,1),r.model=n.join(",")}p.bindResize()},this.addSource=function(r){r.tooltipTitle=p.getSourceTitle(r);var t=e.copy(r);return t[p.sourceUrlKey]+="?"+this.timeStamp(),p.sources.push(t),p.bindResize(),t},this.saveSources=function(){if(n.debug("saveSources"),this.sourcesSelected.length>0){var t=[];switch(!1===this.returnModelPush&&(r.modelSources=[]),e.forEach(p.sourcesSelected,function(e){-1===d.indexOf(r.modelSources,e[p.sourceId],p.sourceId)&&r.modelSources.push(e)}),t=r.modelSources.map(function(e){return e[p.returnModelKey]}),this.returnModelType){case"string":r.model=t.join(",");break;case"array":r.model=t}r.onSaveSources({$model:r.model})}},this.loadMoreSources=function(){n.debug("loadMore"),this.sourcesQuery[this.sourcesOffsetKey]=this.sources.length,this.gallery.loading=!0;var t=d.get(this.sourcesQuery);return t.then(function(t){t.length>0?e.forEach(t,function(e,r){p.addSource(e)}):p.gallery.loadMore=!1,p.gallery.result=null,p.gallery.loading=!1,r.onLoadMoreSources()},function(e){p.gallery.result=e.data,p.gallery.loading=!1}),t},this.searchSources=function(){n.debug("searchSources"),this.sourcesQuery[this.sourcesSearchKey]=this.search,this.sourcesQuery[this.sourcesOffsetKey]=0,this.gallery.loading=!0;var t=d.get(this.sourcesQuery,!0);return t.then(function(t){t.length>0?(p.sources=[],e.forEach(t,function(e,r){p.addSource(e)})):p.sources=[],p.gallery.loadMore=p.sources.length>0,p.gallery.result=null,p.gallery.loading=!1,r.onSearchSources({$search:p.search})},function(e){p.sources=[],p.gallery.loadMore=!1,p.gallery.result=e.data,p.gallery.loading=!1}),t},this.bindResize=function(){u&&o.cancel(u),u=o(function(){n.debug("Bind Resize for scroll"),e.element(i).triggerHandler("resize")},300)},this.addBindings=function(){n.debug("addBindings")},this.init()}])}(angular),function(e){"use strict";e.module("rcMedia").controller("rcMediaSelectCtrl",["$scope","$log","rcMediaService",function(r,t,i){this.init=function(){t.debug("Media Select Init"),r.sourcePreviewHover=!1,r.loading=!1,r.media=e.isDefined(r.media)?r.media:{},r.theme=e.isDefined(r.theme)?r.theme:"",r.name=e.isDefined(r.name)?r.name:"media_sources",r.id=e.isDefined(r.id)?r.id:r.name+"_select",r.type=e.isDefined(r.type)?r.type:"text",r.class=e.isDefined(r.class)?r.class:"",r.onetime=!!e.isDefined(r.onetime)&&r.onetime,r.single=!!e.isDefined(r.single)&&r.single,r.initSources=e.isDefined(r.initSources)?r.initSources():[],r.config=e.isDefined(r.config)?r.config():{};var a={sourceId:"id",sourceUrl:"",sourceUrlKey:"source_url",sourceTitle:"title.rendered",returnModelType:"string",returnModelKey:"id",returnModelPush:!1,sourcesOffsetKey:"offset",sourcesLimitKey:"per_page",sourcesSearchKey:"search",sourcesQuery:{per_page:20},deleteQuery:{force:!0},upload:{crop:!0,multiple:!1,pattern:"image/*",minWidth:300,minHeight:300,cropArea:{color:"rgba(118, 118, 118, 0.8)",colorDrag:"rgba(118, 118, 118, 0.8)",colorBg:"rgba(200, 200, 200, 0.8)",colorCropBg:"rgba(0, 0, 0, 0.6)"},loadIcon:"spinner:clock"},gallery:{order:"date",searchValue:"",multiple:!r.single,selectedSources:[],loadIcon:"spinner:ripple"},model:[],sources:[]};t.debug(r.media),r.media=i.merge({},a,r.media,r.config),t.debug(r.media),e.isDefined(r.initSources)&&(r.media.model=r.initSources,e.isArray(r.initSources)&&(r.media.sources=r.initSources)),e.isDefined(r.single)&&(r.media.gallery.multiple=!r.single),t.debug(r.media),r.getSourcesFromModel(r.media.model)},r.removeSource=function(t){r.media.sources.splice(t,1),e.isArray(r.media.model)?r.media.model.splice(t,1):e.isString(r.media.model)&&(r.media.model=r.media.model.split(","),r.media.model.splice(t,1),r.media.model=r.media.model.join(","))},r.getModel=function(){var e=r.media.sources.map(function(e){return e[r.media.returnModelKey]});switch(r.media.returnModelType){case"string":r.media.model=e.join(",");break;case"array":r.media.model=e}},r.onSortSources=function(e,i,a,l,n){t.debug(r.media.sources),r.getModel()},r.getSourcesFromModel=function(t){var a="",l=[];if(e.isArray(t)?(a=t.join(","),l=t):e.isString(t)&&(a=t,l=t.split(",")),!a.length)return!1;var n=e.copy(r.media.sourcesQuery);n=e.extend(n,{include:a}),r.loading=!0,i.get(n).then(function(t){var a=[];e.forEach(l,function(e,l){var n=i.indexOf(t,e,r.media.returnModelKey);-1!==n&&a.push(t[n])}),r.media.sources=a,r.getModel(),r.loading=!1},function(e){r.loading=!1})},this.init()}])}(angular),function(e){"use strict";var r=e.module("rcMedia");r.config(["$resourceProvider",function(e){e.defaults.cancellable=!0}]),r.provider("rcMedia",[function(){this.rest={url:"",path:"/wp-json/wp/v2/media"},this.locale=null,this.defaultText={"en-us":{TITLE_GALLERY:"Gallery",TITLE_EMPTY_GALLERY:"Your gallery is empty",TITLE_UPLOAD:"Upload file",TITLE_DRAG_FILE:"Drag files to upload",SUB_TITLE_EMPTY_GALLERY:"Upload your first file.",SUB_TITLE_DRAG_FILE:"or",BTN_CANCEL:"Cancel",BTN_SAVE:"Save",BTN_DELETE_FILE:"Delete file",BTN_DELETE_FILES:"Delete files",BTN_DESELECT_ALL:"Deselect all",BTN_SELECT_FILE:"Select file",BTN_SELECT_FILES:"Select files",BTN_SHOW_MORE:"Show More",BTN_BACK_GALLERY:"Back to gallery",BTN_UPLOAD_FILE:"Upload file",BTN_UPLOAD_FILES:"Upload files",BTN_BROWSE_FILE:"Browse a file",UPLOAD_INVALID_FILE:"Your file is not valid.",UPLOAD_INVALID_minWidth:"Minimum width",UPLOAD_INVALID_minHeight:"Minimum height",UPLOAD_INVALID_pattern:"File type error",UPLOAD_ERROR_SERVER:"This file is not supported by server"},"fr-FR":{TITLE_GALLERY:"Galerie",TITLE_EMPTY_GALLERY:"La galerie est vide",TITLE_UPLOAD:"Télécharger un fichier",TITLE_DRAG_FILE:"Glisser le fichier ici",SUB_TITLE_EMPTY_GALLERY:"Veuillez charger votre premier fichier.",SUB_TITLE_DRAG_FILE:"ou",BTN_CANCEL:"Annuler",BTN_SAVE:"Sauver",BTN_DELETE_FILE:"Supprimer le fichier",BTN_DELETE_FILES:"Supprimer les fichiers",BTN_DESELECT_ALL:"Désélectionner tous",BTN_SELECT_FILE:"Sélectionner le fichier",BTN_SELECT_FILES:"Sélectionner les fichiers",BTN_SHOW_MORE:"Voir plus",BTN_BACK_GALLERY:"Revenir à la galerie",BTN_UPLOAD_FILE:"Télécharger le fichier",BTN_UPLOAD_FILES:"Télécharger les fichiers",BTN_BROWSE_FILE:"Choisir un fichier",UPLOAD_INVALID_FILE:"Votre fichier n'est pas valide.",UPLOAD_INVALID_minWidth:"Largeur minimum",UPLOAD_INVALID_minHeight:"Hauteur minimum",UPLOAD_INVALID_pattern:"Type de fichier erroné",UPLOAD_ERROR_SERVER:"Ce fichier n'est pas pris en charge par le serveur"},"nl-NL":{TITLE_GALLERY:"Fotogalerij",TITLE_EMPTY_GALLERY:"Uw galerij is leeg",TITLE_UPLOAD:"File uploaden",TITLE_DRAG_FILE:"Zet de file hier neer",SUB_TITLE_EMPTY_GALLERY:"Upload hier uw eerste file.",SUB_TITLE_DRAG_FILE:"of",BTN_CANCEL:"Annuleren",BTN_SAVE:"Opslaan",BTN_DELETE_FILE:"File deleten",BTN_DELETE_FILES:"Files deleten",BTN_DESELECT_ALL:"Alles deselecteren",BTN_SELECT_FILE:"File selecteren",BTN_SELECT_FILES:"Files selecteren",BTN_SHOW_MORE:"Meer zien",BTN_BACK_GALLERY:"Terug naar de fotogalerij",BTN_UPLOAD_FILE:"File uploaden",BTN_UPLOAD_FILES:"Files uploaden",BTN_BROWSE_FILE:"File kiezen",UPLOAD_INVALID_FILE:"Uw file is niet geldig.",UPLOAD_INVALID_minWidth:"Minimum breedte",UPLOAD_INVALID_minHeight:"Minimum hoogte",UPLOAD_INVALID_pattern:"Verkeerde file type",UPLOAD_ERROR_SERVER:"Dit file wordt niet ondersteund door de server"}},this.interfaceText=e.copy(this.defaultText),this.$get=["$http","$locale",function(e,r){var t,i=this.rest;return(t=this.locale?this.interfaceText[this.locale]:this.interfaceText[r.id])||(t=this.defaultText["en-us"]),{getRest:function(){return i},getLocalizedText:function(e){if(e){var r=t[e];return r||""}return t}}}],this.setLocalizedText=function(r,t){if(!r)throw new Error("localeId must be a string formatted as languageId-countryId");this.interfaceText[r]||(this.interfaceText[r]={}),this.interfaceText[r]=e.extend(this.interfaceText[r],t)},this.useLocale=function(e){if(1===e.split("-").length)switch(e){case"en":e+="-US";break;default:e+="-"+e.toUpperCase()}this.locale=e},this.setRest=function(e){this.rest=e}}]),r.factory("rcMediaResource",["$resource","rcMedia",function(e,r){return{Media:e(r.getRest().url+r.getRest().path+"/:mediaId",{mediaId:"@media_id"},{get:{method:"GET",isArray:!1,cache:!1}},{query:{method:"GET",params:{},isArray:!0,cache:!1,cancellable:!0}})}}]),r.factory("rcMediaService",["$log","$q","rcMedia","rcMediaResource",function(r,t,i,a){return{getRestUrl:function(){return i.getRest().url+i.getRest().path},get:function(r,t){return!0===t&&void 0!==this.request&&e.isFunction(this.request.$cancelRequest)&&this.request.$cancelRequest(),e.isNumber(r)?(r={mediaId:r},this.request=a.Media.get(r)):(e.isObject(r)||(r={}),this.request=a.Media.query(r)),this.request.$promise},delete:function(r,t){return e.isUndefined(t)&&(t={}),e.extend(t,{mediaId:r}),a.Media.delete(t).$promise},indexOf:function(r,t,i){return e.isUndefined(t)||e.isUndefined(i)||!e.isArray(r)?-1:r.map(function(e){return t.constructor(e[i])}).indexOf(t)},merge:function(r){function t(r,i,l){for(var n=0,o=i.length;n<o;++n){var c=i[n];if(e.isObject(c)||e.isFunction(c))for(var s=Object.keys(c),d=0,u=s.length;d<u;d++){var p=s[d],g=c[p];l&&e.isObject(g)?(e.isObject(r[p])||(r[p]=a(g)?[]:{}),t(r[p],[g],!0)):r[p]=g}}return r}var i=[].slice,a=Array.isArray;return t(r,i.call(arguments,1),!0)}}}])}(angular),angular.module("rcMedia").run(["$templateCache",function(e){e.put("rc-media-dialog-zf.tpl.html",'<rc-media class="rc-media"\n     rcm-source-url="{{rcDialogApi.data.sourceUrl}}"\n     rcm-source-url-key="{{rcDialogApi.data.sourceUrlKey}}"\n     rcm-source-id="{{rcDialogApi.data.sourceId}}"\n     rcm-source-title="{{rcDialogApi.data.sourceTitle}}"\n     data-ng-model="rcDialogApi.data.model"\n     data-ng-model-sources="rcDialogApi.data.sources"\n     rcm-return-model-type="{{rcDialogApi.data.returnModelType}}"\n     rcm-return-model-key="{{rcDialogApi.data.returnModelKey}}"\n     rcm-return-model-push="rcDialogApi.data.returnModelPush"\n     rcm-delete-query="{{rcDialogApi.data.deleteQuery}}"\n     rcm-sources-query="{{rcDialogApi.data.sourcesQuery}}"\n     rcm-sources-offset-key="{{rcDialogApi.data.sourcesOffsetKey}}"\n     rcm-sources-limit-key="{{rcDialogApi.data.sourcesLimitKey}}"\n     rcm-sources-search-key="{{rcDialogApi.data.sourcesSearchKey}}"\n>\n<div class="dialog-header">\n    <div class="gallery-view" data-ng-show="!selectedView" >\n        <h3 class="float-left dialog-title"><rcm-translate>TITLE_GALLERY</rcm-translate></h3>\n        <button class="button secondary hollow float-right dialog-close" type="button" data-ng-click="rcDialogApi.closeDialog()" aria-label="Close reveal" >\n            <span aria-hidden="true">&times;</span>\n        </button>\n        <button class="button primary hollow float-right upload" type="button" data-ng-show="!selectedView" data-ng-click="selectedView=\'fileUpload\'" >\n            <svg width="25" height="25" version="1.1" id="rcm_upload_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                   x="0px" y="0px" viewBox="0 0 23 20.5" style="enable-background:new 0 0 23 20.5;" xml:space="preserve"\n              >\n                <g id="rcm_upload_svg_arrow">\n                  <line id="rcm_upload_svg_line" class="st0" x1="11.5" y1="20.5" x2="11.5" y2="7.5"/>\n                  <polyline id="rcm_upload_svg_point" class="st1" points="8.5,10.5 11.5,7.5 14.5,10.5 \t"/>\n                </g>\n                <path\n                  id="rcm_upload_svg_cloud"\n                  class="st1"\n                  d="M15.5,15.5h3c2.2,0,4-1.8,4-4c0-2.2-1.8-4-4-4c-0.3-3.9-3.5-7-7.5-7c-4,0-7.3,3.2-7.5,7.1c-1.7,0.4-3,2-3,3.9c0,2.2,1.8,4,4,4h3"\n                />\n            </svg>\n            <rcm-translate>BTN_UPLOAD_FILE</rcm-translate>\n        </button>\n    </div>\n\n    <div class="upload-view" data-ng-show="selectedView==\'fileUpload\'">\n        <h3 class="float-left dialog-title" ><rcm-translate>TITLE_UPLOAD</rcm-translate></h3>\n        <button class="button secondary hollow float-right dialog-close" type="button" data-ng-click="rcDialogApi.closeDialog()" aria-label="Close reveal" >\n            <span aria-hidden="true">&times;</span>\n        </button>\n    </div>\n</div>\n<div class="dialog-body">\n\n    \x3c!-- Directive rc-media-upload --\x3e\n    <rcm-upload class="upload-view" data-ng-if="selectedView==\'fileUpload\'"\n         rcm-template-url="rc-media-upload-zf.tpl.html"\n         rcm-multiple="rcDialogApi.data.upload.multiple"\n         rcm-accept="\'{{rcDialogApi.data.upload.accept}}\'"\n         rcm-pattern="\'{{rcDialogApi.data.upload.pattern}}\'"\n         rcm-file-name="{{rcDialogApi.data.upload.fileName}}"\n         rcm-fields="{{rcDialogApi.data.upload.fields}}"\n         rcm-min-width="rcDialogApi.data.upload.minWidth"\n         rcm-min-height="rcDialogApi.data.upload.minHeight"\n         rcm-fix-orientation="rcDialogApi.data.upload.fixOrientation"\n         rcm-crop="rcDialogApi.data.upload.crop"\n         rcm-crop-area="rcDialogApi.data.upload.cropArea"\n         rcm-load-icon="{{rcDialogApi.data.upload.loadIcon}}"\n         rcm-change="selectedView=false"\n    ></rcm-upload>\n\n    <div class="gallery-view" data-ng-show="!selectedView">\n        \x3c!-- Directive rc-media-gallery --\x3e\n        <rcm-gallery\n             rcm-template-url="rc-media-gallery-zf.tpl.html"\n             rcm-order="{{rcDialogApi.data.gallery.order}}"\n             rcm-multiple="rcDialogApi.data.gallery.multiple"\n             rcm-selected-sources="rcDialogApi.data.gallery.selectedSources"\n             rcm-search-value="{{rcDialogApi.data.gallery.searchValue}}"\n             rcm-load-icon="{{rcDialogApi.data.gallery.loadIcon}}"\n        ></rcm-gallery>\n    </div>\n</div>\n<div class="dialog-footer" data-ng-show="selectedView || rcDialogApi.data.gallery.selectedSources.length">\n    <rcm-upload-controls class="upload-view" data-ng-if="selectedView==\'fileUpload\'"\n         rcm-template-url="rc-media-upload-controls-zf.tpl.html"\n         data-ng-model="rcDialogApi.data.uploadFile"\n         rcm-save-click="selectedView=false"\n         rcm-cancel-click="selectedView=false"\n    ></rcm-upload-controls>\n\n    <rcm-gallery-controls class="gallery-view" data-ng-if="!selectedView"\n         rcm-template-url="rc-media-gallery-controls-zf.tpl.html"\n         rcm-save-click="rcDialogApi.confirmDialog()"\n    ></rcm-gallery-controls>\n</div>\n</rc-media>'),e.put("rc-media-gallery-controls-zf.tpl.html",'<button class="button alert hollow float-left delete-file" data-ng-click="deleteSources()" data-ng-disabled="loading"><rcm-translate>BTN_DELETE_FILE</rcm-translate></button>\n<button class="button secondary hollow float-left deselect-all" data-ng-click="deselectSources()" data-ng-disabled="loading"><rcm-translate>BTN_DESELECT_ALL</rcm-translate></button>\n<button class="button primary float-right select-file" data-ng-click="saveSources()" data-ng-disabled="loading"><rcm-translate>BTN_SELECT_FILE</rcm-translate></button>'),e.put("rc-media-gallery-zf.tpl.html",'<div class="rcm-gallery" >\n\n    <alert class="message" data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>\n\n    <div data-ng-show="loading" class="loading-overlay">\n        <div device-detector class="is-not-ie">\n            <webicon class="loading-icon" icon="{{loadIcon}}"></webicon>\n        </div>\n        <div device-detector class="is-ie">\n            <div class=\'loading-icon ripple-css\'><div></div><div></div></div>\n        </div>\n    </div>\n\n    <div class="gallery-overlay" scrollbar="{autoUpdate: true}">\n\n        <div class="gallery-sources" data-ng-show="sources.length > 0">\n            <a data-ng-repeat="source in sources | orderBy:order:true"\n               href=""\n               class="thumbnail-block"\n               data-ng-class="{\'selected\': source.activeClass}"\n               data-ng-click="selectSource(source)">\n                <div class="thumbnail"\n                     data-ng-style="{\'background-image\':\'url(\\\'{{rcMediaApi.sourceUrl + source[rcMediaApi.sourceUrlKey]}}\\\')\', \'background-repeat\': \'no-repeat\', \'background-position\': \'center center\', \'background-size\': \'contain\'}"\n                     tooltip-placement="bottom"\n                     tooltip-html-unsafe="{{source.tooltipTitle}}"\n                ></div>\n            </a>\n\n            <button type="button" class="button secondary float-center load-more" data-ng-show="loadMore" data-ng-click="loadMoreSources()" data-ng-disabled="loading">\n                <i class="fa fa-plus"></i>\n                <rcm-translate>BTN_SHOW_MORE</rcm-translate>\n            </button>\n        </div>\n\n        <div class="gallery-empty" data-ng-hide="sources.length || loading">\n            <div class="center-content">\n                <h4><rcm-translate>TITLE_EMPTY_GALLERY</rcm-translate></h4>\n                <p><rcm-translate>SUB_TITLE_EMPTY_GALLERY</rcm-translate></p>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("rc-media-upload-controls-zf.tpl.html",'<div data-ng-show="rcMediaApi.upload.currentState==\'selectFiles\'">\n    <button class="button secondary hollow float-left" data-ng-click="resetUploadFile(true)"><rcm-translate>BTN_BACK_GALLERY</rcm-translate></button>\n</div>\n\n<div data-ng-show="rcMediaApi.upload.currentState==\'cropImage\'">\n    <button class="button primary float-right" data-ng-click="uploadFile()"><rcm-translate>BTN_SAVE</rcm-translate></button>\n    <button class="button hollow secondary float-right" data-ng-click="resetUploadFile()"><rcm-translate>BTN_CANCEL</rcm-translate></button>\n</div>\n\n<div data-ng-show="rcMediaApi.upload.currentState==\'progressFiles\'">\n    <button class="button secondary float-right" data-ng-click="cancelUploadFile()"><rcm-translate>BTN_CANCEL</rcm-translate></button>\n</div>\n'),e.put("rc-media-upload-zf.tpl.html",'<div class="rcm-upload">\n\n  <alert class="message" data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>\n\n  <div data-ng-show="currentState==\'selectFiles\'" class="rcm-dropzone"\n       ngf-drop\n       data-ng-model="file.source"\n       ngf-change="changeFiles($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-drag-over-class="dragover"\n       ngf-multiple="multiple"\n       ngf-accept="{{accept}}"\n       ngf-pattern="{{pattern}}"\n       ngf-min-width="minWidth"\n       ngf-min-height="minHeight"\n       ngf-fix-orientation="fixOrientation"\n  >\n\n    <div class="select-file" >\n      <svg width="150" height="150" version="1.1" id="rcm_upload_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n           x="0px" y="0px" viewBox="0 0 23 20.5" style="enable-background:new 0 0 23 20.5;" xml:space="preserve"\n      >\n        <g id="rcm_upload_svg_arrow">\n\t      <line id="rcm_upload_svg_line" class="st0" x1="11.5" y1="20.5" x2="11.5" y2="7.5"/>\n\t      <polyline id="rcm_upload_svg_point" class="st1" points="8.5,10.5 11.5,7.5 14.5,10.5 \t"/>\n        </g>\n        <path\n          id="rcm_upload_svg_cloud"\n          class="st1"\n          d="M15.5,15.5h3c2.2,0,4-1.8,4-4c0-2.2-1.8-4-4-4c-0.3-3.9-3.5-7-7.5-7c-4,0-7.3,3.2-7.5,7.1c-1.7,0.4-3,2-3,3.9c0,2.2,1.8,4,4,4h3"\n        />\n      </svg>\n\n      <h3><rcm-translate>TITLE_DRAG_FILE</rcm-translate></h3>\n      <p class="lead"><rcm-translate>SUB_TITLE_DRAG_FILE</rcm-translate></p>\n\n      <button ngf-select\n              data-ng-model="file.source"\n              ngf-change="changeFiles($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n              ngf-multiple="multiple"\n              ngf-accept="{{accept}}"\n              ngf-pattern="{{pattern}}"\n              ngf-min-width="minWidth"\n              ngf-min-height="minHeight"\n              type="button"\n              class="button primary large"\n      >\n        <rcm-translate>BTN_BROWSE_FILE</rcm-translate>\n      </button>\n    </div>\n  </div>\n\n  <div class="crop-area" data-ng-if="currentState==\'cropImage\'">\n    <div>\n      <canvas\n              height="{{cropArea.height}}px"\n              width="{{cropArea.width}}px"\n              min-width="cropArea.minWidth"\n              min-height="cropArea.minHeight"\n              id="canvas"\n              img-cropper\n              img-src="{imageData: (file.source | ngfDataUrl), fileType: file.source.type}"\n              img-dst="file.destDataUrl"\n              crop-width="cropArea.cropWidth"\n              crop-height="cropArea.cropHeight"\n              keep-aspect="cropArea.keepAspect"\n              keep-aspect-ratio="cropArea.keepAspectRatio"\n              enforce-crop-aspect="cropArea.enforceCropAspect"\n              touch-radius="cropArea.touchRadius"\n              color="{{cropArea.color}}"\n              color-drag="{{cropArea.colorDrag}}"\n              color-bg="{{cropArea.colorBg}}"\n              color-crop-bg="{{cropArea.colorCropBg}}"\n      >\n      </canvas>\n    </div>\n  </div>\n\n  <div data-ng-show="currentState==\'progressFiles\'" class="preview-file" >\n\n    <div data-ng-show="loading" class="loading-overlay">\n      <div device-detector class="is-not-ie">\n        <webicon class="loading-icon" icon="{{loadIcon}}"></webicon>\n      </div>\n      <div device-detector class="is-ie">\n        <div class=\'loading-icon ripple-css\'><div></div><div></div></div>\n      </div>\n    </div>\n\n    <img class="float-center" width="300" height="300" data-ng-src="{{file.destDataUrl}}" alt="">\n  </div>\n</div>'),e.put("rc-media-search-zf.tpl.html",'<div class="rcm-search input-group">\n  <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>\n  <input type="text" class="form-control" data-ng-model="search" placeholder="Search ...">\n</div>'),e.put("rc-media-select-draggable.tpl.html",'<div class="rcm-select">\n    <div class="preview-gallery-overlay">\n        <ul class="rcm-preview-gallery" sv-root sv-part="media.sources" sv-on-sort="onSortSources($item, $partFrom, $partTo, $indexFrom, $indexTo)" data-ng-show="media.sources.length">\n            <li sv-placeholder class="placeholder-left image"><div><i class="rcm-placeholder"></i></div></li>\n            <li data-ng-repeat="source in media.sources" class="image" sv-element>\n                <a href="" sv-handle data-ng-mouseenter="sourceHover=true" ng-mouseleave="sourceHover=false" data-ng-click="removeSource($index)" >\n                    <div data-ng-style="{\'background-image\':\'url(\\\'{{media.sourceUrl + source[media.sourceUrlKey]}}\\\')\', \'background-repeat\': \'no-repeat\', \'background-position\': \'center center\', \'background-size\': \'contain\'}">\n                        <i class="rcm-remove" data-ng-show="sourceHover"></i>\n                    </div>\n                </a>\n            </li>\n        </ul>\n        <input name="{{name}}" id="{{id}}" type="{{type}}" data-ng-model="media.model" data-ng-update-hidden />\n        <button type="button" class="{{class}}" data-ng-hide="(media.sources.length && onetime) || loading" rcd-open="{{theme}}" rcd-data="media" rcd-template-url="rc-media-dialog-zf.tpl.html" rcd-backdrop="true" rcd-click-close="false" rcd-class="dialog-media" data-ng-transclude></button>\n    </div>\n</div>'),e.put("rc-media-select.tpl.html",'<div class="rcm-select">\n    <div class="preview-gallery-overlay">\n        <ul class="rcm-preview-gallery" data-ng-show="media.sources.length">\n            <li data-ng-repeat="source in media.sources" class="image">\n                <a href="" data-ng-mouseenter="sourceHover=true" ng-mouseleave="sourceHover=false" data-ng-click="removeSource($index)" >\n                    <div data-ng-style="{\'background-image\':\'url(\\\'{{media.sourceUrl + source[media.sourceUrlKey]}}\\\')\', \'background-repeat\': \'no-repeat\', \'background-position\': \'center center\', \'background-size\': \'contain\'}">\n                        <i class="rcm-remove" data-ng-show="sourceHover"></i>\n                    </div>\n                </a>\n            </li>\n        </ul>\n        <input name="{{name}}" id="{{id}}" type="{{type}}" data-ng-model="media.model" data-ng-update-hidden />\n        <button type="button" class="{{class}}" data-ng-hide="(media.sources.length && onetime) || loading" rcd-open="{{theme}}" rcd-data="media" rcd-template-url="rc-media-dialog-zf.tpl.html" rcd-backdrop="true" rcd-click-close="false" rcd-class="dialog-media" data-ng-transclude></button>\n    </div>\n</div>')}]);